/******/!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}// webpackBootstrap
/******/
var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(1),o=r(i),a=n(3),s=r(a),u=n(4),c=r(u),l=n(5),h=r(l),f=n(30),d=r(f),p=n(103),v=r(p),g=n(104),m=r(g),y=n(114),b=r(y),x=n(115),w=r(x),T=n(116),E=r(T),S=n(117),O=r(S),M=n(118),C=r(M),P=n(119),k=r(P),A=n(120),I=r(A),R=n(121),D=r(R),j=n(122),L=r(j),N=n(125),F=r(N),U=n(126),B=r(U),X=n(127),H=r(X),W=n(128),G=r(W),z=n(129),V=r(z),Y=n(130),$=r(Y),q=n(131),K=r(q),J=n(132),Z=r(J),Q=n(133),tt=r(Q),et=n(135),nt=r(et),rt=n(137),it=r(rt),ot=n(138),at=r(ot),st=n(139),ut=r(st),ct=n(164),lt=r(ct),ht=n(165),ft=r(ht),dt=n(363),pt=r(dt),vt=n(364),gt=r(vt),mt=n(365),yt=r(mt),_t=n(366),bt=r(_t),xt=n(367),wt=r(xt),Tt=n(368),Et=r(Tt),St=n(373),Ot=r(St),Mt=n(374),Ct=r(Mt),Pt=n(375),kt=r(Pt),At=n(376),It=r(At),Rt=n(377),Dt=r(Rt),jt=n(379),Lt=r(jt),Nt=n(380),Ft=r(Nt),Ut=n(382),Bt=r(Ut),Xt=n(383),Ht=r(Xt),Wt=n(384),Gt=r(Wt),zt=n(385),Vt=r(zt),Yt=n(386),$t=r(Yt),qt=n(388),Kt=r(qt),Jt=n(389),Zt=r(Jt),Qt=n(390),te=r(Qt);n(391);var ee=n(392),ne=r(ee),re=n(395),ie=r(re),oe=ie["default"]();angular.module(oe,["viewerConfig","ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ngRoute","hljs","cfp.hotkeys","angularMoment","ngSanitize","btford.markdown","ngTagsInput","angular-click-outside","ui.bootstrap.showErrors","ngSilent","ui.bootstrap.modal","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.tpls","ui.bootstrap.alert","ngclipboard","angularLoad"]).constant("moment",moment).constant("Pusher",Pusher).constant("$",jQuery).constant("_",_).constant("filepicker",filepicker).constant("fabric",fabric).config(o["default"]).config(s["default"]).run(c["default"]).factory("$exceptionHandler",ne["default"]).service("Api",H["default"]).service("analyticsService",G["default"]).service("itemService",L["default"]).service("userService",F["default"]).service("storageService",B["default"]).service("pusherService",V["default"]).service("abilityService",$["default"]).service("commentService",Bt["default"]).service("eventService",Gt["default"]).service("loadingService",Z["default"]).service("mimeTypeService",K["default"]).service("shareViaService",tt["default"]).service("urlService",nt["default"]).service("flashMessagesService",it["default"]).service("sourceService",Vt["default"]).service("toutService",at["default"]).service("transcodingService",ut["default"]).controller("MainController",h["default"]).controller("AnnotationsController",d["default"]).controller("PrivacyController",m["default"]).controller("LoginController",b["default"]).controller("LoginModalController",w["default"]).controller("ShareController",E["default"]).controller("FlagController",O["default"]).controller("EmbedController",C["default"]).controller("OuibounceController",I["default"]).controller("UpgradeController",D["default"]).directive("codeView",function(){return new lt["default"]}).directive("imageView",function(){return new ft["default"]}).directive("otherView",function(){return new pt["default"]}).directive("pdfView",function(){return new gt["default"]}).directive("sidebar",function(){return new Dt["default"]}).directive("textView",function(){return new yt["default"]}).directive("videoView",function(){return new bt["default"]}).directive("comments",function(){return new Ft["default"]}).directive("events",function(){return new Ht["default"]}).directive("navbar",function(){return new Et["default"]}).directive("analytics",function(){return new Ot["default"]}).directive("login",function(){return new kt["default"]}).directive("upgrade",function(){return new Zt["default"]}).directive("related",function(){return new It["default"]}).directive("flashMessages",function(){return new wt["default"]}).directive("unauthorized",function(){return new k["default"]}).directive("chosenSelect",function(){return new te["default"]}).directive("teamSelector",function(){return new Ct["default"]}).directive("tout",function(){return new $t["default"]}).directive("ouibounce",function(){return new Kt["default"]}).factory("AnnotationsUploader",v["default"]).factory("sidebarFactory",Lt["default"])},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n,r,i,o,s,u){"ngInject";o.setKey(t.env.FILEPICKER_KEY),e.classNameFilter(/^(?:(?!ng-animate-disabled).)*$/),n.debugEnabled(t.logger===!0),i.resourceUrlWhitelist(["self","https://d2ffutrenqvap3.cloudfront.net/**","https://dha4w82d62smt.cloudfront.net/**","https://dr5mo5s7lqrtc.cloudfront.net/**","https://d26dzxoao6i3hh.cloudfront.net/**","https://d2ppvlu71ri8gs.cloudfront.net/**","https://d105kas4b86wc3.cloudfront.net/**","https://d3uepj124s5rcx.cloudfront.net/**","https://d17oy1vhnax1f7.cloudfront.net/**","https://d3dr1ze7164817.cloudfront.net/**","https://d3vv6lp55qjaqc.cloudfront.net/**","https://d15sd6k45tg31u.cloudfront.net/**","https://d7zby7rwtzqe4.cloudfront.net/**","https://d2wvs5jsbn4h49.cloudfront.net/**","https://d214l9ppd0b0q6.cloudfront.net/**","https://d1ax1i5f2y3x71.cloudfront.net/**","https://d3uik7083b30dy.cloudfront.net/**","https://d1nvcfeljt87mm.cloudfront.net/**","https://d2jaf1trmkrnj0.cloudfront.net/**","https://d1lbhbfgoue651.cloudfront.net/**","https://d3omwy4q2qio9v.cloudfront.net/**","https://d3uik7083b30dy.cloudfront.net/**","https://s3.amazonaws.com/**","http://s3.amazonaws.com/**"]),r.defaults.withCredentials=!0,s.XHR=function(){var t=new XMLHttpRequest;return t.withCredentials=!0,t},u.options({placement:"bottom"}),a["default"](t.env.SEGMENT_KEY)}i.$inject=["config","$animateProvider","$logProvider","$httpProvider","$sceDelegateProvider","filepicker","Pusher","$uibTooltipProvider"],Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),a=r(o);e["default"]=i},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=function(t){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var n=0;n<e.methods.length;n++){var r=e.methods[n];e[r]=e.factory(r)}e.load=function(t){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}}e.SNIPPET_VERSION="3.1.0",e.load(t)}},function(t,e){"use strict";function n(t,e){"ngInject";var n={templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"},r={templateUrl:"app/annotations/annotations.html",controller:"AnnotationsController",controllerAs:"annotate"};t.when("/",{templateUrl:"app/empty.html"}).when("/:slug",n).when("/:slug/annotate",r).when("/:slug/o",n).when("/:type/:slug/o",n).when("/:type/:slug",n).otherwise({redirectTo:"/"}),e.html5Mode(!0)}n.$inject=["$routeProvider","$locationProvider"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e){"use strict";function n(t){"ngInject";t.debug("runBlock end")}n.$inject=["$log"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(27),c=r(u),l=n(29),h=r(l),f=function(){function t(e,n,r,i,a,s,u,l,h,f,d,p,v,g,m,y){"ngInject";if(o["default"](this,t),a.current.params.revision&&window.console.log("BUILD "+a.current.params.revision),a.current.params._ga)return s.search("_ga",null),void s.replace();if(a.current.params.st)return u.viewItemShare(a.current.params.st),s.search("st",null),void s.replace();if("annotations"===a.current.params.mode)return s.path(i.annotate(u),{}).search("mode",null),void s.replace();n(c["default"].noop,1e3),this._urlService=i,this._filepicker=g,this.item=u,s.path().match("/o$")&&(u.zoom=!0),this._$modal=v,l.inject(e),h.inject(e),this.ability=l,this._storageService=f,this._hotkeys=d;var _=this;u.getItem(),u.getDetails().then(function(t){if("undefined"!=typeof t&&t&&u.data||y.location.reload(),t){if($("body").not(".theme-set").toggleClass("dark","dark"===t.theme),t.custom_js)try{$("head").append(t.custom_js)}catch(e){window.console.error(e.message)}if(t.expires_at){var n=new Date,r=new Date(t.expires_at);n>r&&(_.item.state="expired")}}}),d.bindTo(p).add({combo:["n"],description:"Toggle Noir",callback:function(){return _.toggleNoir()}}).add({combo:["e"],description:"Save elsewhere",callback:function(){m.track("save_elsewhere_modal_opened",{campaign_medium:"shortcut"}),_.saveElsewhere()}}).add({combo:["s"],description:"View original file",callback:function(){return _.showOriginal()}}).add({combo:["d"],description:"Download file",callback:function(){return _.download()}}),$("body").on("keypress","textarea",function(t){13!==t.which||t.shiftKey||($(this).parents("form").find("input[type=submit]").trigger("submit"),t.preventDefault())}),m.page(),_.cta=f.fetch("showCta",!0),f.fetch("user_id")&&window.dataLayer&&window.dataLayer.push({authedUser:!0})}return t.$inject=["$rootScope","$interval","shareViaService","urlService","$route","$location","itemService","abilityService","loadingService","storageService","hotkeys","$scope","$uibModal","filepicker","analyticsService","$window"],s["default"](t,[{key:"init",value:function(){this.item.viewItem(),this.ability.reset()}},{key:"rhcAvailable",value:function(){return this.ability.can("view_comments")||this.ability.can("view_events")}},{key:"rhcHidden",value:function(){return this.rhcAvailable()?this._storageService.fetch("rhcHidden",!1):!0}},{key:"flag",value:function(){h["default"](this._$modal)}},{key:"canFlag",value:function(){return!this._storageService.arrayHas("flags",this.item.slug())}},{key:"download",value:function(){window.location.href=this._urlService.downloadUrl(this.item)}},{key:"showOriginal",value:function(){window.location.href=this._urlService.originalUrl(this.item)}},{key:"saveElsewhere",value:function(){var t=c["default"].get(this.item,"data");t&&this._filepicker.exportFile(t.source_url,{mimetype:t.mimetype,suggestedFilename:t.name})}},{key:"cheatsheet",value:function(){this._hotkeys.toggleCheatSheet()}},{key:"toggleNoir",value:function(){$("body").toggleClass("dark").addClass("theme-set")}}]),t}();e["default"]=f},function(t,e){"use strict";e.__esModule=!0,e["default"]=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(8),o=r(i);e["default"]=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),o["default"](t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}()},function(t,e,n){t.exports={"default":n(9),__esModule:!0}},function(t,e,n){n(10);var r=n(13).Object;t.exports=function(t,e,n){return r.defineProperty(t,e,n)}},function(t,e,n){var r=n(11);r(r.S+r.F*!n(21),"Object",{defineProperty:n(17).f})},function(t,e,n){var r=n(12),i=n(13),o=n(14),a=n(16),s=n(26),u="prototype",c=function(t,e,n){var l,h,f,d=t&c.F,p=t&c.G,v=t&c.S,g=t&c.P,m=t&c.B,y=t&c.W,_=p?i:i[e]||(i[e]={}),b=_[u],x=p?r:v?r[e]:(r[e]||{})[u];p&&(n=e);for(l in n)h=!d&&x&&void 0!==x[l],h&&s(_,l)||(f=h?x[l]:n[l],_[l]=p&&"function"!=typeof x[l]?n[l]:m&&h?o(f,r):y&&x[l]==f?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e[u]=t[u],e}(f):g&&"function"==typeof f?o(Function.call,f):f,g&&((_.virtual||(_.virtual={}))[l]=f,t&c.R&&b&&!b[l]&&a(b,l,f)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(15);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(17),i=n(25);t.exports=n(21)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(18),i=n(20),o=n(24),a=Object.defineProperty;e.f=n(21)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(19);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(21)&&!n(22)(function(){return 7!=Object.defineProperty(n(23)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){t.exports=!n(22)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},function(t,e,n){var r=n(19),i=n(12).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(19);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){if(t!==e){var n=null===t,r=t===M,i=t===t,o=null===e,a=e===M,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(e>t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function a(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function s(t,e,n){if(e!==e)return y(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function u(t){return"function"==typeof t||!1}function c(t){return null==t?"":t+""}function l(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function f(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function d(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,s=i.length,u=n.length;++r<s;){var c=o(i[r],a[r]);if(c){if(r>=u)return c;var l=n[r];return c*("asc"===l||l===!0?1:-1)}}return t.index-e.index}function p(t){return Vt[t]}function v(t){return Yt[t]}function g(t,e,n){return e?t=Kt[t]:n&&(t=Jt[t]),"\\"+t}function m(t){return"\\"+Jt[t]}function y(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function _(t){return!!t&&"object"==typeof t}function b(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=V,o[++i]=n);return o}function w(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var s=t[r],u=e?e(s,r,t):s;r&&n===u||(n=u,a[++o]=s)}return a}function T(t){for(var e=-1,n=t.length;++e<n&&b(t.charCodeAt(e)););return e}function E(t){for(var e=t.length;e--&&b(t.charCodeAt(e)););return e}function S(t){return $t[t]}function O(t){function e(t){if(_(t)&&!Ps(t)&&!(t instanceof i)){if(t instanceof r)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return dr(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ca,this.__views__=[]}function b(){var t=new i(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function Q(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function rt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ps(t),r=0>e,i=n?t.length:0,o=Vn(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,d=Ta(u,this.__takeCount__);if(!n||H>i||i==u&&d==u)return nn(r&&n?t.reverse():t,this.__actions__);var p=[];t:for(;u--&&d>f;){c+=e;for(var v=-1,g=t[c];++v<h;){var m=l[v],y=m.iteratee,_=m.type,b=y(g);if(_==G)g=b;else if(!b){if(_==W)continue t;break t}}p[f++]=g}return p}function ot(){this.__data__={}}function Vt(t){return this.has(t)&&delete this.__data__[t]}function Yt(t){return"__proto__"==t?M:this.__data__[t]}function $t(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function qt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Kt(t){var e=t?t.length:0;for(this.data={hash:ma(null),set:new ha};e--;)this.push(t[e])}function Jt(t,e){var n=t.data,r="string"==typeof e||Di(e)?n.set.has(e):n.hash[e];return r?0:-1}function Zt(t){var e=this.data;"string"==typeof t||Di(t)?e.set.add(t):e.hash[t]=!0}function Qt(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=Xo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function te(t,e){var n=-1,r=t.length;for(e||(e=Xo(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,s=a;++i<o;){var u=t[i],c=+e(u);n(c,a)&&(a=c,s=u)}return s}function se(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function ue(t,e){for(var n=-1,r=t.length,i=Xo(r);++n<r;)i[n]=e(t[n],n,t);return i}function ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function le(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function he(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function fe(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function de(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function pe(t,e){return t===M?e:t}function ve(t,e,n,r){return t!==M&&ea.call(r,n)?t:e}function ge(t,e,n){for(var r=-1,i=Bs(e),o=i.length;++r<o;){var a=i[r],s=t[a],u=n(s,e[a],a,t,e);(u===u?u===s:s!==s)&&(s!==M||a in t)||(t[a]=u)}return t}function me(t,e){return null==e?t:_e(e,Bs(e),t)}function ye(t,e){for(var n=-1,r=null==t,i=!r&&Jn(t),o=i?t.length:0,a=e.length,s=Xo(a);++n<a;){var u=e[n];s[n]=i?Zn(u,o)?t[u]:M:r?M:t[u]}return s}function _e(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===M?t:an(t,e,n):null==t?Co:"object"==r?Ue(t):e===M?Do(t):Be(t,e)}function xe(t,e,n,r,i,o,a){var s;if(n&&(s=i?n(t,r,i):n(t)),s!==M)return s;if(!Di(t))return t;var u=Ps(t);if(u){if(s=Yn(t),!e)return te(t,s)}else{var c=ra.call(t),l=c==Z;if(c!=et&&c!=Y&&(!l||i))return zt[c]?qn(t,c,e):i?t:{};if(s=$n(l?{}:t),!e)return me(s,t)}o||(o=[]),a||(a=[]);for(var h=o.length;h--;)if(o[h]==t)return a[h];return o.push(t),a.push(s),(u?ee:Ae)(t,function(r,i){s[i]=xe(r,e,n,i,t,o,a)}),s}function we(t,e,n){if("function"!=typeof t)throw new Ko(z);return fa(function(){t.apply(M,n)},e)}function Te(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Wn(),a=o==s,u=a&&e.length>=H?vn(e):null,c=e.length;u&&(o=Jt,a=!1,e=u);t:for(;++i<n;){var l=t[i];if(a&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;r.push(l)}else o(e,l,0)<0&&r.push(l)}return r}function Ee(t,e){var n=!0;return La(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Se(t,e,n,r){var i=r,o=i;return La(t,function(t,a,s){var u=+e(t,a,s);(n(u,i)||u===r&&u===o)&&(i=u,o=t)}),o}function Oe(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=r===M||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function Me(t,e){var n=[];return La(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Ce(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function Pe(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];_(a)&&Jn(a)&&(n||Ps(a)||Si(a))?e?Pe(a,e,n,r):ce(r,a):n||(r[r.length]=a)}return r}function ke(t,e){return Fa(t,e,to)}function Ae(t,e){return Fa(t,e,Bs)}function Ie(t,e){return Ua(t,e,Bs)}function Re(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];Ri(t[a])&&(o[++i]=a)}return o}function De(t,e,n){if(null!=t){n!==M&&n in hr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&i>r;)t=t[e[r++]];return r&&r==i?t:M}}function je(t,e,n,r,i,o){return t===e?!0:null==t||null==e||!Di(t)&&!_(e)?t!==t&&e!==e:Le(t,e,je,n,r,i,o)}function Le(t,e,n,r,i,o,a){var s=Ps(t),u=Ps(e),c=$,l=$;s||(c=ra.call(t),c==Y?c=et:c!=et&&(s=Wi(t))),u||(l=ra.call(e),l==Y?l=et:l!=et&&(u=Wi(e)));var h=c==et,f=l==et,d=c==l;if(d&&!s&&!h)return Un(t,e,c);if(!i){var p=h&&ea.call(t,"__wrapped__"),v=f&&ea.call(e,"__wrapped__");if(p||v)return n(p?t.value():t,v?e.value():e,r,i,o,a)}if(!d)return!1;o||(o=[]),a||(a=[]);for(var g=o.length;g--;)if(o[g]==t)return a[g]==e;o.push(t),a.push(e);var m=(s?Fn:Bn)(t,e,n,r,i,o,a);return o.pop(),a.pop(),m}function Ne(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=hr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var s=a[0],u=t[s],c=a[1];if(o&&a[2]){if(u===M&&!(s in t))return!1}else{var l=n?n(u,c,s):M;if(!(l===M?je(c,u,n,!0):l))return!1}}return!0}function Fe(t,e){var n=-1,r=Jn(t)?Xo(t.length):[];return La(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ue(t){var e=Gn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null==t?!1:t[n]===r&&(r!==M||n in hr(t))}}return function(t){return Ne(t,e)}}function Be(t,e){var n=Ps(t),r=tr(t)&&rr(e),i=t+"";return t=fr(t),function(o){if(null==o)return!1;var a=i;if(o=hr(o),!(!n&&r||a in o)){if(o=1==t.length?o:De(o,$e(t,0,-1)),null==o)return!1;a=Or(t),o=hr(o)}return o[a]===e?e!==M||a in o:je(e,o[a],M,!0)}}function Xe(t,e,n,r,i){if(!Di(t))return t;var o=Jn(e)&&(Ps(e)||Wi(e)),a=o?M:Bs(e);return ee(a||e,function(s,u){if(a&&(u=s,s=e[u]),_(s))r||(r=[]),i||(i=[]),He(t,e,u,Xe,n,r,i);else{var c=t[u],l=n?n(c,s,u,t,e):M,h=l===M;h&&(l=s),l===M&&(!o||u in t)||!h&&(l===l?l===c:c!==c)||(t[u]=l)}}),t}function He(t,e,n,r,i,o,a){for(var s=o.length,u=e[n];s--;)if(o[s]==u)return void(t[n]=a[s]);var c=t[n],l=i?i(c,u,n,t,e):M,h=l===M;h&&(l=u,Jn(u)&&(Ps(u)||Wi(u))?l=Ps(c)?c:Jn(c)?te(c):[]:Bi(u)||Si(u)?l=Si(c)?$i(c):Bi(c)?c:{}:h=!1),o.push(u),a.push(l),h?t[n]=r(l,u,i,o,a):(l===l?l!==c:c===c)&&(t[n]=l)}function We(t){return function(e){return null==e?M:e[t]}}function Ge(t){var e=t+"";return t=fr(t),function(n){return De(n,t,e)}}function ze(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Zn(r)){var i=r;da.call(t,r,1)}}return t}function Ve(t,e){return t+ya(Oa()*(e-t+1))}function Ye(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function $e(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===M||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Xo(i);++r<i;)o[r]=t[r+e];return o}function qe(t,e){var n;return La(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ke(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Je(t,e,n){var r=Xn(),i=-1;e=ue(e,function(t){return r(t)});var o=Fe(t,function(t){var n=ue(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Ke(o,function(t,e){return d(t,e,n)})}function Ze(t,e){var n=0;return La(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Qe(t,e){var n=-1,r=Wn(),i=t.length,o=r==s,a=o&&i>=H,u=a?vn():null,c=[];u?(r=Jt,o=!1):(a=!1,u=e?[]:c);t:for(;++n<i;){var l=t[n],h=e?e(l,n,t):l;if(o&&l===l){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),c.push(l)}else r(u,h,0)<0&&((e||a)&&u.push(h),c.push(l))}return c}function tn(t,e){for(var n=-1,r=e.length,i=Xo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?$e(t,r?0:o,r?o+1:i):$e(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof i&&(n=n.value());for(var r=-1,o=e.length;++r<o;){var a=e[r];n=a.func.apply(a.thisArg,ce([n],a.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Aa>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)&&null!==a?r=o+1:i=o}return i}return on(t,e,Co,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===M;o>i;){var c=ya((i+o)/2),l=n(t[c]),h=l!==M,f=l===l;if(a)var d=f||r;else d=s?f&&h&&(r||null!=l):u?f&&(r||h):null==l?!1:r?e>=l:e>l;d?i=c+1:o=c}return Ta(o,ka)}function an(t,e,n){if("function"!=typeof t)return Co;if(e===M)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function sn(t){var e=new aa(t.byteLength),n=new pa(e);return n.set(new pa(t)),e}function un(t,e,n){for(var r=n.length,i=-1,o=wa(t.length-r,0),a=-1,s=e.length,u=Xo(s+o);++a<s;)u[a]=e[a];for(;++i<r;)u[n[i]]=t[i];for(;o--;)u[a++]=t[i++];return u}function cn(t,e,n){for(var r=-1,i=n.length,o=-1,a=wa(t.length-i,0),s=-1,u=e.length,c=Xo(a+u);++o<a;)c[o]=t[o];for(var l=o;++s<u;)c[l+s]=e[s];for(;++r<i;)c[l+n[r]]=t[o++];return c}function ln(t,e){return function(n,r,i){var o=e?e():{};if(r=Xn(r,i,3),Ps(n))for(var a=-1,s=n.length;++a<s;){var u=n[a];t(o,u,r(u,a,n),n)}else La(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function hn(t){return mi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:M,a=i>2?n[2]:M,s=i>1?n[i-1]:M;for("function"==typeof o?(o=an(o,s,5),i-=2):(o="function"==typeof s?s:M,i-=o?1:0),a&&Qn(n[0],n[1],a)&&(o=3>i?M:o,i=1);++r<i;){var u=n[r];u&&t(e,u,o)}return e})}function fn(t,e){return function(n,r){var i=n?Ha(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=hr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function dn(t){return function(e,n,r){for(var i=hr(e),o=r(e),a=o.length,s=t?a:-1;t?s--:++s<a;){var u=o[s];if(n(i[u],u,i)===!1)break}return e}}function pn(t,e){function n(){var i=this&&this!==re&&this instanceof n?r:t;return i.apply(e,arguments)}var r=mn(t);return n}function vn(t){return ma&&ha?new Kt(t):null}function gn(t){return function(e){for(var n=-1,r=So(lo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function mn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=ja(t.prototype),r=t.apply(n,e);return Di(r)?r:n}}function yn(t){function e(n,r,i){i&&Qn(n,r,i)&&(r=M);var o=Nn(n,t,M,M,M,M,M,r);return o.placeholder=e.placeholder,o}return e}function _n(t,e){return mi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(M,n))})}function bn(t,e){return function(n,r,i){if(i&&Qn(n,r,i)&&(r=M),r=Xn(r,i,3),1==r.length){n=Ps(n)?n:lr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return Se(n,r,t,e)}}function xn(t,e){return function(n,r,i){if(r=Xn(r,i,3),Ps(n)){var o=a(n,r,e);return o>-1?n[o]:M}return Ce(n,r,t)}}function wn(t){return function(e,n,r){return e&&e.length?(n=Xn(n,r,3),a(e,n,t)):-1}}function Tn(t){return function(e,n,r){return n=Xn(n,r,3),Ce(e,n,t,!0)}}function En(t){return function(){for(var e,n=arguments.length,i=t?n:-1,o=0,a=Xo(n);t?i--:++i<n;){var s=a[o++]=arguments[i];if("function"!=typeof s)throw new Ko(z);!e&&r.prototype.thru&&"wrapper"==Hn(s)&&(e=new r([],!0))}for(i=e?-1:n;++i<n;){s=a[i];var u=Hn(s),c="wrapper"==u?Xa(s):M;e=c&&er(c[0])&&c[1]==(L|I|D|N)&&!c[4].length&&1==c[9]?e[Hn(c[0])].apply(e,c[3]):1==s.length&&er(s)?e[u]():e.thru(s)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Ps(r)&&r.length>=H)return e.plant(r).value();for(var i=0,o=n?a[i].apply(this,t):r;++i<n;)o=a[i].call(this,o);return o}}}function Sn(t,e){return function(n,r,i){return"function"==typeof r&&i===M&&Ps(n)?t(n,r):e(n,an(r,i,3))}}function On(t){return function(e,n,r){return("function"!=typeof n||r!==M)&&(n=an(n,r,3)),t(e,n,to)}}function Mn(t){return function(e,n,r){return("function"!=typeof n||r!==M)&&(n=an(n,r,3)),t(e,n)}}function Cn(t){return function(e,n,r){var i={};return n=Xn(n,r,3),Ae(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function Pn(t){return function(e,n,r){return e=c(e),(t?e:"")+Rn(e,n,r)+(t?"":e)}}function kn(t){var e=mi(function(n,r){var i=x(r,e.placeholder);return Nn(n,t,M,r,i)});return e}function An(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===M&&Ps(n)?t(n,r,i,a):Ye(n,Xn(r,o,4),i,a,e)}}function In(t,e,n,r,i,o,a,s,u,c){function l(){for(var y=arguments.length,_=y,b=Xo(y);_--;)b[_]=arguments[_];if(r&&(b=un(b,r,i)),o&&(b=cn(b,o,a)),p||g){var w=l.placeholder,T=x(b,w);if(y-=T.length,c>y){var E=s?te(s):M,S=wa(c-y,0),O=p?T:M,C=p?M:T,A=p?b:M,I=p?M:b;e|=p?D:j,e&=~(p?j:D),v||(e&=~(P|k));var R=[t,e,n,A,O,I,C,E,u,S],L=In.apply(M,R);return er(t)&&Wa(L,R),L.placeholder=w,L}}var N=f?n:this,F=d?N[t]:t;return s&&(b=ur(b,s)),h&&u<b.length&&(b.length=u),this&&this!==re&&this instanceof l&&(F=m||mn(t)),F.apply(N,b)}var h=e&L,f=e&P,d=e&k,p=e&I,v=e&A,g=e&R,m=d?M:mn(t);return l}function Rn(t,e,n){var r=t.length;if(e=+e,r>=e||!ba(e))return"";var i=e-r;return n=null==n?" ":n+"",mo(n,ga(i/n.length)).slice(0,i)}function Dn(t,e,n,r){function i(){for(var e=-1,s=arguments.length,u=-1,c=r.length,l=Xo(c+s);++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++e];var h=this&&this!==re&&this instanceof i?a:t;return h.apply(o?n:this,l)}var o=e&P,a=mn(t);return i}function jn(t){var e=zo[t];return function(t,n){return n=n===M?0:+n||0,n?(n=ca(10,n),e(t*n)/n):e(t)}}function Ln(t){return function(e,n,r,i){var o=Xn(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function Nn(t,e,n,r,i,o,a,s){var u=e&k;if(!u&&"function"!=typeof t)throw new Ko(z);var c=r?r.length:0;if(c||(e&=~(D|j),r=i=M),c-=i?i.length:0,e&j){var l=r,h=i;r=i=M}var f=u?M:Xa(t),d=[t,e,n,r,i,l,h,o,a,s];if(f&&(ir(d,f),e=d[1],s=d[9]),d[9]=null==s?u?0:t.length:wa(s-c,0)||0,e==P)var p=pn(d[0],d[2]);else p=e!=D&&e!=(P|D)||d[4].length?In.apply(M,d):Dn.apply(M,d);var v=f?Ba:Wa;return v(p,d)}function Fn(t,e,n,r,i,o,a){var s=-1,u=t.length,c=e.length;if(u!=c&&!(i&&c>u))return!1;for(;++s<u;){var l=t[s],h=e[s],f=r?r(i?h:l,i?l:h,s):M;if(f!==M){if(f)continue;return!1}if(i){if(!fe(e,function(t){return l===t||n(l,t,r,i,o,a)}))return!1}else if(l!==h&&!n(l,h,r,i,o,a))return!1}return!0}function Un(t,e,n){switch(n){case q:case K:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case it:return t==e+""}return!1}function Bn(t,e,n,r,i,o,a){var s=Bs(t),u=s.length,c=Bs(e),l=c.length;if(u!=l&&!i)return!1;for(var h=u;h--;){var f=s[h];if(!(i?f in e:ea.call(e,f)))return!1}for(var d=i;++h<u;){f=s[h];var p=t[f],v=e[f],g=r?r(i?v:p,i?p:v,f):M;if(!(g===M?n(p,v,r,i,o,a):g))return!1;d||(d="constructor"==f)}if(!d){var m=t.constructor,y=e.constructor;if(m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1;

}return!0}function Xn(t,n,r){var i=e.callback||Oo;return i=i===Oo?be:i,r?i(t,n,r):i}function Hn(t){for(var e=t.name,n=Da[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Wn(t,n,r){var i=e.indexOf||Er;return i=i===Er?s:i,t?i(t,n,r):i}function Gn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function zn(t,e){var n=null==t?M:t[e];return Ni(n)?n:M}function Vn(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ta(e,t+a);break;case"takeRight":t=wa(t,e-a)}}return{start:t,end:e}}function Yn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function $n(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Yo),new e}function qn(t,e,n){var r=t.constructor;switch(e){case at:return sn(t);case q:case K:return new r(+t);case st:case ut:case ct:case lt:case ht:case ft:case dt:case pt:case vt:var i=t.buffer;return new r(n?sn(i):i,t.byteOffset,t.length);case tt:case it:return new r(t);case nt:var o=new r(t.source,Dt.exec(t));o.lastIndex=t.lastIndex}return o}function Kn(t,e,n){null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:De(t,$e(e,0,-1)),e=Or(e));var r=null==t?t:t[e];return null==r?M:r.apply(t,n)}function Jn(t){return null!=t&&nr(Ha(t))}function Zn(t,e){return t="number"==typeof t||Nt.test(t)?+t:-1,e=null==e?Ia:e,t>-1&&t%1==0&&e>t}function Qn(t,e,n){if(!Di(n))return!1;var r=typeof e;if("number"==r?Jn(n)&&Zn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&Mt.test(t)||"number"==n)return!0;if(Ps(t))return!1;var r=!Ot.test(t);return r||null!=e&&t in hr(e)}function er(t){var n=Hn(t);if(!(n in i.prototype))return!1;var r=e[n];if(t===r)return!0;var o=Xa(r);return!!o&&t===o[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&Ia>=t}function rr(t){return t===t&&!Di(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=L>i,a=r==L&&n==I||r==L&&n==N&&t[7].length<=e[8]||r==(L|N)&&n==I;if(!o&&!a)return t;r&P&&(t[2]=e[2],i|=n&P?0:A);var s=e[3];if(s){var u=t[3];t[3]=u?un(u,s,e[4]):te(s),t[4]=u?x(t[3],V):te(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?cn(u,s,e[6]):te(s),t[6]=u?x(t[5],V):te(e[6])),s=e[7],s&&(t[7]=te(s)),r&L&&(t[8]=null==t[8]?e[8]:Ta(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===M?e:ks(t,e,or)}function ar(t,e){t=hr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function sr(t,e){var n={};return ke(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function ur(t,e){for(var n=t.length,r=Ta(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Zn(o,n)?i[o]:M}return t}function cr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Ps(t)||Si(t)),o=-1,a=[];++o<n;){var s=e[o];(i&&Zn(s,r)||ea.call(t,s))&&a.push(s)}return a}function lr(t){return null==t?[]:Jn(t)?Di(t)?t:Yo(t):oo(t)}function hr(t){return Di(t)?t:Yo(t)}function fr(t){if(Ps(t))return t;var e=[];return c(t).replace(Ct,function(t,n,r,i){e.push(r?i.replace(It,"$1"):n||t)}),e}function dr(t){return t instanceof i?t.clone():new r(t.__wrapped__,t.__chain__,te(t.__actions__))}function pr(t,e,n){e=(n?Qn(t,e,n):null==e)?1:wa(ya(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=Xo(ga(i/e));i>r;)a[++o]=$e(t,r,r+=e);return a}function vr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function gr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),$e(t,0>e?0:e)):[]}function mr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),$e(t,0,0>e?0:e)):[]}function yr(t,e,n){return t&&t.length?en(t,Xn(e,n,3),!0,!0):[]}function _r(t,e,n){return t&&t.length?en(t,Xn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Qn(t,e,n)&&(n=0,r=i),Oe(t,e,n,r)):[]}function xr(t){return t?t[0]:M}function wr(t,e,n){var r=t?t.length:0;return n&&Qn(t,e,n)&&(e=!1),r?Pe(t,e):[]}function Tr(t){var e=t?t.length:0;return e?Pe(t,!0):[]}function Er(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?wa(r+n,0):n;else if(n){var i=rn(t,e);return r>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return s(t,e,n||0)}function Sr(t){return mr(t,1)}function Or(t){var e=t?t.length:0;return e?t[e-1]:M}function Mr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?wa(r+n,0):Ta(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return y(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Cr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Wn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)da.call(e,o,1);return e}function Pr(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=Xn(e,n,3);++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return ze(t,o),r}function kr(t){return gr(t,1)}function Ar(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Qn(t,e,n)&&(e=0,n=r),$e(t,e,n)):[]}function Ir(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),$e(t,0,0>e?0:e)):[]}function Rr(t,e,n){var r=t?t.length:0;return r?((n?Qn(t,e,n):null==e)&&(e=1),e=r-(+e||0),$e(t,0>e?0:e)):[]}function Dr(t,e,n){return t&&t.length?en(t,Xn(e,n,3),!1,!0):[]}function jr(t,e,n){return t&&t.length?en(t,Xn(e,n,3)):[]}function Lr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Qn(t,e,r)?M:e,e=!1);var o=Xn();return(null!=n||o!==be)&&(n=o(n,r,3)),e&&Wn()==s?w(t,n):Qe(t,n)}function Nr(t){if(!t||!t.length)return[];var e=-1,n=0;t=se(t,function(t){return Jn(t)?(n=wa(t.length,n),!0):void 0});for(var r=Xo(n);++e<n;)r[e]=ue(t,We(e));return r}function Fr(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Nr(t);return null==e?i:(e=an(e,n,4),ue(i,function(t){return le(t,e,M,!0)}))}function Ur(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Jn(n))var r=r?ce(Te(r,n),Te(n,r)):n}return r?Qe(r):[]}function Br(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Ps(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Xr(t){var n=e(t);return n.__chain__=!0,n}function Hr(t,e,n){return e.call(n,t),t}function Wr(t,e,n){return e.call(n,t)}function Gr(){return Xr(this)}function zr(){return new r(this.value(),this.__chain__)}function Vr(t){for(var e,r=this;r instanceof n;){var i=dr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Yr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof i){var n=t;return this.__actions__.length&&(n=new i(this)),n=n.reverse(),n.__actions__.push({func:Wr,args:[e],thisArg:M}),new r(n,this.__chain__)}return this.thru(e)}function $r(){return this.value()+""}function qr(){return nn(this.__wrapped__,this.__actions__)}function Kr(t,e,n){var r=Ps(t)?oe:Ee;return n&&Qn(t,e,n)&&(e=M),("function"!=typeof e||n!==M)&&(e=Xn(e,n,3)),r(t,e)}function Jr(t,e,n){var r=Ps(t)?se:Me;return e=Xn(e,n,3),r(t,e)}function Zr(t,e){return is(t,Ue(e))}function Qr(t,e,n,r){var i=t?Ha(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Qn(e,n,r)?0:0>n?wa(i+n,0):n||0,"string"==typeof t||!Ps(t)&&Hi(t)?i>=n&&t.indexOf(e,n)>-1:!!i&&Wn(t,e,n)>-1}function ti(t,e,n){var r=Ps(t)?ue:Fe;return e=Xn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Do(e))}function ni(t,e,n){var r=Ps(t)?se:Me;return e=Xn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Qn(t,e,n):null==e){t=lr(t);var r=t.length;return r>0?t[Ve(0,r-1)]:M}var i=-1,o=Yi(t),r=o.length,a=r-1;for(e=Ta(0>e?0:+e||0,r);++i<e;){var s=Ve(i,a),u=o[s];o[s]=o[i],o[i]=u}return o.length=e,o}function ii(t){return ri(t,Ca)}function oi(t){var e=t?Ha(t):0;return nr(e)?e:Bs(t).length}function ai(t,e,n){var r=Ps(t)?fe:qe;return n&&Qn(t,e,n)&&(e=M),("function"!=typeof e||n!==M)&&(e=Xn(e,n,3)),r(t,e)}function si(t,e,n){if(null==t)return[];n&&Qn(t,e,n)&&(e=M);var r=-1;e=Xn(e,n,3);var i=Fe(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Ke(i,f)}function ui(t,e,n,r){return null==t?[]:(r&&Qn(e,n,r)&&(n=M),Ps(e)||(e=null==e?[]:[e]),Ps(n)||(n=null==n?[]:[n]),Je(t,e,n))}function ci(t,e){return Jr(t,Ue(e))}function li(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Ko(z);var n=t;t=e,e=n}return t=ba(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function hi(t,e,n){return n&&Qn(t,e,n)&&(e=M),e=t&&null==e?t.length:wa(+e||0,0),Nn(t,L,M,M,M,M,e)}function fi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Ko(z);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=M),n}}function di(t,e,n){function r(){d&&sa(d),c&&sa(c),v=0,c=d=p=M}function i(e,n){n&&sa(n),c=d=p=M,e&&(v=vs(),l=t.apply(f,u),d||c||(u=f=M))}function o(){var t=e-(vs()-h);0>=t||t>e?i(p,c):d=fa(o,t)}function a(){i(m,d)}function s(){if(u=arguments,h=vs(),f=this,p=m&&(d||!y),g===!1)var n=y&&!d;else{c||y||(v=h);var r=g-(h-v),i=0>=r||r>g;i?(c&&(c=sa(c)),v=h,l=t.apply(f,u)):c||(c=fa(a,r))}return i&&d?d=sa(d):d||e===g||(d=fa(o,e)),n&&(i=!0,l=t.apply(f,u)),!i||d||c||(u=f=M),l}var u,c,l,h,f,d,p,v=0,g=!1,m=!0;if("function"!=typeof t)throw new Ko(z);if(e=0>e?0:+e||0,n===!0){var y=!0;m=!1}else Di(n)&&(y=!!n.leading,g="maxWait"in n&&wa(+n.maxWait||0,e),m="trailing"in n?!!n.trailing:m);return s.cancel=r,s}function pi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Ko(z);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new pi.Cache,n}function vi(t){if("function"!=typeof t)throw new Ko(z);return function(){return!t.apply(this,arguments)}}function gi(t){return fi(2,t)}function mi(t,e){if("function"!=typeof t)throw new Ko(z);return e=wa(e===M?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=wa(n.length-e,0),o=Xo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=Xo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function yi(t){if("function"!=typeof t)throw new Ko(z);return function(e){return t.apply(this,e)}}function _i(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ko(z);return n===!1?r=!1:Di(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),di(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Co:e,Nn(e,D,M,[t],[])}function xi(t,e,n,r){return e&&"boolean"!=typeof e&&Qn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?xe(t,e,an(n,r,1)):xe(t,e)}function wi(t,e,n){return"function"==typeof e?xe(t,!0,an(e,n,1)):xe(t,!0)}function Ti(t,e){return t>e}function Ei(t,e){return t>=e}function Si(t){return _(t)&&Jn(t)&&ea.call(t,"callee")&&!la.call(t,"callee")}function Oi(t){return t===!0||t===!1||_(t)&&ra.call(t)==q}function Mi(t){return _(t)&&ra.call(t)==K}function Ci(t){return!!t&&1===t.nodeType&&_(t)&&!Bi(t)}function Pi(t){return null==t?!0:Jn(t)&&(Ps(t)||Hi(t)||Si(t)||_(t)&&Ri(t.splice))?!t.length:!Bs(t).length}function ki(t,e,n,r){n="function"==typeof n?an(n,r,3):M;var i=n?n(t,e):M;return i===M?je(t,e,n):!!i}function Ai(t){return _(t)&&"string"==typeof t.message&&ra.call(t)==J}function Ii(t){return"number"==typeof t&&ba(t)}function Ri(t){return Di(t)&&ra.call(t)==Z}function Di(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function ji(t,e,n,r){return n="function"==typeof n?an(n,r,3):M,Ne(t,Gn(e),n)}function Li(t){return Ui(t)&&t!=+t}function Ni(t){return null==t?!1:Ri(t)?oa.test(ta.call(t)):_(t)&&Lt.test(t)}function Fi(t){return null===t}function Ui(t){return"number"==typeof t||_(t)&&ra.call(t)==tt}function Bi(t){var e;if(!_(t)||ra.call(t)!=et||Si(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return ke(t,function(t,e){n=e}),n===M||ea.call(t,n)}function Xi(t){return Di(t)&&ra.call(t)==nt}function Hi(t){return"string"==typeof t||_(t)&&ra.call(t)==it}function Wi(t){return _(t)&&nr(t.length)&&!!Gt[ra.call(t)]}function Gi(t){return t===M}function zi(t,e){return e>t}function Vi(t,e){return e>=t}function Yi(t){var e=t?Ha(t):0;return nr(e)?e?te(t):[]:oo(t)}function $i(t){return _e(t,to(t))}function qi(t,e,n){var r=ja(t);return n&&Qn(t,e,n)&&(e=M),e?me(r,e):r}function Ki(t){return Re(t,to(t))}function Ji(t,e,n){var r=null==t?M:De(t,fr(e),e+"");return r===M?n:r}function Zi(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=fr(e),t=1==e.length?t:De(t,$e(e,0,-1)),null==t)return!1;e=Or(e),n=ea.call(t,e)}return n||nr(t.length)&&Zn(e,t.length)&&(Ps(t)||Si(t))}function Qi(t,e,n){n&&Qn(t,e,n)&&(e=M);for(var r=-1,i=Bs(t),o=i.length,a={};++r<o;){var s=i[r],u=t[s];e?ea.call(a,u)?a[u].push(s):a[u]=[s]:a[u]=s}return a}function to(t){if(null==t)return[];Di(t)||(t=Yo(t));var e=t.length;e=e&&nr(e)&&(Ps(t)||Si(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=Xo(e),a=e>0;++r<e;)o[r]=r+"";for(var s in t)a&&Zn(s,e)||"constructor"==s&&(i||!ea.call(t,s))||o.push(s);return o}function eo(t){t=hr(t);for(var e=-1,n=Bs(t),r=n.length,i=Xo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?M:t[e];return r===M&&(null==t||tr(e,t)||(e=fr(e),t=1==e.length?t:De(t,$e(e,0,-1)),r=null==t?M:t[Or(e)]),r=r===M?n:r),Ri(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:fr(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];Di(s)&&(i==a?s[u]=n:null==s[u]&&(s[u]=Zn(e[i+1])?[]:{})),s=s[u]}return t}function io(t,e,n,r){var i=Ps(t)||Wi(t);if(e=Xn(e,r,4),null==n)if(i||Di(t)){var o=t.constructor;n=i?Ps(t)?new o:[]:ja(Ri(o)?o.prototype:M)}else n={};return(i?ee:Ae)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,Bs(t))}function ao(t){return tn(t,to(t))}function so(t,e,n){return e=+e||0,n===M?(n=e,e=0):n=+n||0,t>=Ta(e,n)&&t<wa(e,n)}function uo(t,e,n){n&&Qn(t,e,n)&&(e=n=M);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Oa();return Ta(t+o*(e-t+ua("1e-"+((o+"").length-1))),e)}return Ve(t,e)}function co(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function lo(t){return t=c(t),t&&t.replace(Ft,p).replace(At,"")}function ho(t,e,n){t=c(t),e+="";var r=t.length;return n=n===M?r:Ta(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function fo(t){return t=c(t),t&&wt.test(t)?t.replace(bt,v):t}function po(t){return t=c(t),t&&kt.test(t)?t.replace(Pt,g):t||"(?:)"}function vo(t,e,n){t=c(t),e=+e;var r=t.length;if(r>=e||!ba(e))return t;var i=(e-r)/2,o=ya(i),a=ga(i);return n=Rn("",a,n),n.slice(0,o)+t+n}function go(t,e,n){return(n?Qn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),Sa(t,e||(jt.test(t)?16:10))}function mo(t,e){var n="";if(t=c(t),e=+e,1>e||!t||!ba(e))return n;do e%2&&(n+=t),e=ya(e/2),t+=t;while(e);return n}function yo(t,e,n){return t=c(t),n=null==n?0:Ta(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function _o(t,n,r){var i=e.templateSettings;r&&Qn(t,n,r)&&(n=r=M),t=c(t),n=ge(me({},r||n),i,ve);var o,a,s=ge(me({},n.imports),i.imports,ve),u=Bs(s),l=tn(s,u),h=0,f=n.interpolate||Ut,d="__p += '",p=$o((n.escape||Ut).source+"|"+f.source+"|"+(f===St?Rt:Ut).source+"|"+(n.evaluate||Ut).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Wt+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),d+=t.slice(h,u).replace(Bt,m),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),s&&(a=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=u+e.length,e}),d+="';\n";var g=n.variable;g||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(gt,""):d).replace(mt,"$1").replace(yt,"$1;"),d="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Js(function(){return Go(u,v+"return "+d).apply(M,l)});if(y.source=d,Ai(y))throw y;return y}function bo(t,e,n){var r=t;return(t=c(t))?(n?Qn(r,e,n):null==e)?t.slice(T(t),E(t)+1):(e+="",t.slice(l(t,e),h(t,e)+1)):t}function xo(t,e,n){var r=t;return t=c(t),t?t.slice((n?Qn(r,e,n):null==e)?T(t):l(t,e+"")):t}function wo(t,e,n){var r=t;return t=c(t),t?(n?Qn(r,e,n):null==e)?t.slice(0,E(t)+1):t.slice(0,h(t,e+"")+1):t}function To(t,e,n){n&&Qn(t,e,n)&&(e=M);var r=F,i=U;if(null!=e)if(Di(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?c(e.omission):i}else r=+e||0;if(t=c(t),r>=t.length)return t;var a=r-i.length;if(1>a)return i;var s=t.slice(0,a);if(null==o)return s+i;if(Xi(o)){if(t.slice(a).search(o)){var u,l,h=t.slice(0,a);for(o.global||(o=$o(o.source,(Dt.exec(o)||"")+"g")),o.lastIndex=0;u=o.exec(h);)l=u.index;s=s.slice(0,null==l?a:l)}}else if(t.indexOf(o,a)!=a){var f=s.lastIndexOf(o);f>-1&&(s=s.slice(0,f))}return s+i}function Eo(t){return t=c(t),t&&xt.test(t)?t.replace(_t,S):t}function So(t,e,n){return n&&Qn(t,e,n)&&(e=M),t=c(t),t.match(e||Xt)||[]}function Oo(t,e,n){return n&&Qn(t,e,n)&&(e=M),_(t)?Po(t):be(t,e)}function Mo(t){return function(){return t}}function Co(t){return t}function Po(t){return Ue(xe(t,!0))}function ko(t,e){return Be(t,xe(e,!0))}function Ao(t,e,n){if(null==n){var r=Di(e),i=r?Bs(e):M,o=i&&i.length?Re(e,i):M;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Re(e,Bs(e)));var a=!0,s=-1,u=Ri(t),c=o.length;n===!1?a=!1:Di(n)&&"chain"in n&&(a=n.chain);for(;++s<c;){var l=o[s],h=e[l];t[l]=h,u&&(t.prototype[l]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(h))}return t}function Io(){return re._=ia,this}function Ro(){}function Do(t){return tr(t)?We(t):Ge(t)}function jo(t){return function(e){return De(t,fr(e),e+"")}}function Lo(t,e,n){n&&Qn(t,e,n)&&(e=n=M),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=wa(ga((e-t)/(n||1)),0),o=Xo(i);++r<i;)o[r]=t,t+=n;return o}function No(t,e,n){if(t=ya(t),1>t||!ba(t))return[];var r=-1,i=Xo(Ta(t,Pa));for(e=an(e,n,1);++r<t;)Pa>r?i[r]=e(r):e(r);return i}function Fo(t){var e=++na;return c(t)+e}function Uo(t,e){return(+t||0)+(+e||0)}function Bo(t,e,n){return n&&Qn(t,e,n)&&(e=M),e=Xn(e,n,3),1==e.length?de(Ps(t)?t:lr(t),e):Ze(t,e)}t=t?ie.defaults(re.Object(),t,ie.pick(re,Ht)):re;{var Xo=t.Array,Ho=t.Date,Wo=t.Error,Go=t.Function,zo=t.Math,Vo=t.Number,Yo=t.Object,$o=t.RegExp,qo=t.String,Ko=t.TypeError,Jo=Xo.prototype,Zo=Yo.prototype,Qo=qo.prototype,ta=Go.prototype.toString,ea=Zo.hasOwnProperty,na=0,ra=Zo.toString,ia=re._,oa=$o("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,sa=t.clearTimeout,ua=t.parseFloat,ca=zo.pow,la=Zo.propertyIsEnumerable,ha=zn(t,"Set"),fa=t.setTimeout,da=Jo.splice,pa=t.Uint8Array,va=zn(t,"WeakMap"),ga=zo.ceil,ma=zn(Yo,"create"),ya=zo.floor,_a=zn(Xo,"isArray"),ba=t.isFinite,xa=zn(Yo,"keys"),wa=zo.max,Ta=zo.min,Ea=zn(Ho,"now"),Sa=t.parseInt,Oa=zo.random,Ma=Vo.NEGATIVE_INFINITY,Ca=Vo.POSITIVE_INFINITY,Pa=4294967295,ka=Pa-1,Aa=Pa>>>1,Ia=9007199254740991,Ra=va&&new va,Da={};e.support={}}e.templateSettings={escape:Tt,evaluate:Et,interpolate:St,variable:"",imports:{_:e}};var ja=function(){function t(){}return function(e){if(Di(e)){t.prototype=e;var n=new t;t.prototype=M}return n||{}}}(),La=fn(Ae),Na=fn(Ie,!0),Fa=dn(),Ua=dn(!0),Ba=Ra?function(t,e){return Ra.set(t,e),t}:Co,Xa=Ra?function(t){return Ra.get(t)}:Ro,Ha=We("length"),Wa=function(){var t=0,e=0;return function(n,r){var i=vs(),o=X-(i-e);if(e=i,o>0){if(++t>=B)return n}else t=0;return Ba(n,r)}}(),Ga=mi(function(t,e){return _(t)&&Jn(t)?Te(t,Pe(e,!1,!0)):[]}),za=wn(),Va=wn(!0),Ya=mi(function(t){for(var e=t.length,n=e,r=Xo(h),i=Wn(),o=i==s,a=[];n--;){var u=t[n]=Jn(u=t[n])?u:[];r[n]=o&&u.length>=120?vn(n&&u):null}var c=t[0],l=-1,h=c?c.length:0,f=r[0];t:for(;++l<h;)if(u=c[l],(f?Jt(f,u):i(a,u,0))<0){for(var n=e;--n;){var d=r[n];if((d?Jt(d,u):i(t[n],u,0))<0)continue t}f&&f.push(u),a.push(u)}return a}),$a=mi(function(t,e){e=Pe(e);var n=ye(t,e);return ze(t,e.sort(o)),n}),qa=Ln(),Ka=Ln(!0),Ja=mi(function(t){return Qe(Pe(t,!1,!0))}),Za=mi(function(t,e){return Jn(t)?Te(t,e):[]}),Qa=mi(Nr),ts=mi(function(t){var e=t.length,n=e>2?t[e-2]:M,r=e>1?t[e-1]:M;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):M,r=M),t.length=e,Fr(t,n,r)}),es=mi(function(t){return t=Pe(t),this.thru(function(e){return Qt(Ps(e)?e:[hr(e)],t)})}),ns=mi(function(t,e){return ye(t,Pe(e))}),rs=ln(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),is=xn(La),os=xn(Na,!0),as=Sn(ee,La),ss=Sn(ne,Na),us=ln(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),cs=ln(function(t,e,n){t[n]=e}),ls=mi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Jn(t)?Xo(t.length):[];return La(t,function(t){var s=i?e:o&&null!=t?t[e]:M;a[++r]=s?s.apply(t,n):Kn(t,e,n)}),a}),hs=ln(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),fs=An(le,La),ds=An(he,Na),ps=mi(function(t,e){if(null==t)return[];var n=e[2];return n&&Qn(e[0],e[1],n)&&(e.length=1),Je(t,Pe(e),[])}),vs=Ea||function(){return(new Ho).getTime()},gs=mi(function(t,e,n){var r=P;if(n.length){var i=x(n,gs.placeholder);r|=D}return Nn(t,r,e,n,i)}),ms=mi(function(t,e){e=e.length?Pe(e):Ki(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Nn(t[i],P,t)}return t}),ys=mi(function(t,e,n){var r=P|k;if(n.length){var i=x(n,ys.placeholder);r|=D}return Nn(e,r,t,n,i)}),_s=yn(I),bs=yn(R),xs=mi(function(t,e){return we(t,1,e)}),ws=mi(function(t,e,n){return we(t,e,n)}),Ts=En(),Es=En(!0),Ss=mi(function(t,e){if(e=Pe(e),"function"!=typeof t||!oe(e,u))throw new Ko(z);var n=e.length;return mi(function(r){for(var i=Ta(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Os=kn(D),Ms=kn(j),Cs=mi(function(t,e){return Nn(t,N,M,M,M,Pe(e))}),Ps=_a||function(t){return _(t)&&nr(t.length)&&ra.call(t)==$},ks=hn(Xe),As=hn(function(t,e,n){return n?ge(t,e,n):me(t,e)}),Is=_n(As,pe),Rs=_n(ks,or),Ds=Tn(Ae),js=Tn(Ie),Ls=On(Fa),Ns=On(Ua),Fs=Mn(Ae),Us=Mn(Ie),Bs=xa?function(t){var e=null==t?M:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Jn(t)?cr(t):Di(t)?xa(t):[]}:cr,Xs=Cn(!0),Hs=Cn(),Ws=mi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=ue(Pe(e),qo);return ar(t,Te(to(t),e))}var n=an(e[0],e[1],3);return sr(t,function(t,e,r){return!n(t,e,r)})}),Gs=mi(function(t,e){return null==t?{}:"function"==typeof e[0]?sr(t,an(e[0],e[1],3)):ar(t,Pe(e))}),zs=gn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Vs=gn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Ys=Pn(),$s=Pn(!0),qs=gn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ks=gn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Js=mi(function(t,e){try{return t.apply(M,e)}catch(n){return Ai(n)?n:new Wo(n)}}),Zs=mi(function(t,e){return function(n){return Kn(n,t,e)}}),Qs=mi(function(t,e){return function(n){return Kn(t,n,e)}}),tu=jn("ceil"),eu=jn("floor"),nu=bn(Ti,Ma),ru=bn(zi,Ca),iu=jn("round");return e.prototype=n.prototype,r.prototype=ja(n.prototype),r.prototype.constructor=r,i.prototype=ja(n.prototype),i.prototype.constructor=i,ot.prototype["delete"]=Vt,ot.prototype.get=Yt,ot.prototype.has=$t,ot.prototype.set=qt,Kt.prototype.push=Zt,pi.Cache=ot,e.after=li,e.ary=hi,e.assign=As,e.at=ns,e.before=fi,e.bind=gs,e.bindAll=ms,e.bindKey=ys,e.callback=Oo,e.chain=Xr,e.chunk=pr,e.compact=vr,e.constant=Mo,e.countBy=rs,e.create=qi,e.curry=_s,e.curryRight=bs,e.debounce=di,e.defaults=Is,e.defaultsDeep=Rs,e.defer=xs,e.delay=ws,e.difference=Ga,e.drop=gr,e.dropRight=mr,e.dropRightWhile=yr,e.dropWhile=_r,e.fill=br,e.filter=Jr,e.flatten=wr,e.flattenDeep=Tr,e.flow=Ts,e.flowRight=Es,e.forEach=as,e.forEachRight=ss,e.forIn=Ls,e.forInRight=Ns,e.forOwn=Fs,e.forOwnRight=Us,e.functions=Ki,e.groupBy=us,e.indexBy=cs,e.initial=Sr,e.intersection=Ya,e.invert=Qi,e.invoke=ls,e.keys=Bs,e.keysIn=to,e.map=ti,e.mapKeys=Xs,e.mapValues=Hs,e.matches=Po,e.matchesProperty=ko,e.memoize=pi,e.merge=ks,e.method=Zs,e.methodOf=Qs,e.mixin=Ao,e.modArgs=Ss,e.negate=vi,e.omit=Ws,e.once=gi,e.pairs=eo,e.partial=Os,e.partialRight=Ms,e.partition=hs,e.pick=Gs,e.pluck=ei,e.property=Do,e.propertyOf=jo,e.pull=Cr,e.pullAt=$a,e.range=Lo,e.rearg=Cs,e.reject=ni,e.remove=Pr,e.rest=kr,e.restParam=mi,e.set=ro,e.shuffle=ii,e.slice=Ar,e.sortBy=si,e.sortByAll=ps,e.sortByOrder=ui,e.spread=yi,e.take=Ir,e.takeRight=Rr,e.takeRightWhile=Dr,e.takeWhile=jr,e.tap=Hr,e.throttle=_i,e.thru=Wr,e.times=No,e.toArray=Yi,e.toPlainObject=$i,e.transform=io,e.union=Ja,e.uniq=Lr,e.unzip=Nr,e.unzipWith=Fr,e.values=oo,e.valuesIn=ao,e.where=ci,e.without=Za,e.wrap=bi,e.xor=Ur,e.zip=Qa,e.zipObject=Br,e.zipWith=ts,e.backflow=Es,e.collect=ti,e.compose=Es,e.each=as,e.eachRight=ss,e.extend=As,e.iteratee=Oo,e.methods=Ki,e.object=Br,e.select=Jr,e.tail=kr,e.unique=Lr,Ao(e,e),e.add=Uo,e.attempt=Js,e.camelCase=zs,e.capitalize=co,e.ceil=tu,e.clone=xi,e.cloneDeep=wi,e.deburr=lo,e.endsWith=ho,e.escape=fo,e.escapeRegExp=po,e.every=Kr,e.find=is,e.findIndex=za,e.findKey=Ds,e.findLast=os,e.findLastIndex=Va,e.findLastKey=js,e.findWhere=Zr,e.first=xr,e.floor=eu,e.get=Ji,e.gt=Ti,e.gte=Ei,e.has=Zi,e.identity=Co,e.includes=Qr,e.indexOf=Er,e.inRange=so,e.isArguments=Si,e.isArray=Ps,e.isBoolean=Oi,e.isDate=Mi,e.isElement=Ci,e.isEmpty=Pi,e.isEqual=ki,e.isError=Ai,e.isFinite=Ii,e.isFunction=Ri,e.isMatch=ji,e.isNaN=Li,e.isNative=Ni,e.isNull=Fi,e.isNumber=Ui,e.isObject=Di,e.isPlainObject=Bi,e.isRegExp=Xi,e.isString=Hi,e.isTypedArray=Wi,e.isUndefined=Gi,e.kebabCase=Vs,e.last=Or,e.lastIndexOf=Mr,e.lt=zi,e.lte=Vi,e.max=nu,e.min=ru,e.noConflict=Io,e.noop=Ro,e.now=vs,e.pad=vo,e.padLeft=Ys,e.padRight=$s,e.parseInt=go,e.random=uo,e.reduce=fs,e.reduceRight=ds,e.repeat=mo,e.result=no,e.round=iu,e.runInContext=O,e.size=oi,e.snakeCase=qs,e.some=ai,e.sortedIndex=qa,e.sortedLastIndex=Ka,e.startCase=Ks,e.startsWith=yo,e.sum=Bo,e.template=_o,e.trim=bo,e.trimLeft=xo,e.trimRight=wo,e.trunc=To,e.unescape=Eo,e.uniqueId=Fo,e.words=So,e.all=Kr,e.any=ai,e.contains=Qr,e.eq=ki,e.detect=is,e.foldl=fs,e.foldr=ds,e.head=xr,e.include=Qr,e.inject=fs,Ao(e,function(){var t={};return Ae(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=C,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){i.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new i(this);n=null==n?1:wa(ya(n)||0,0);var o=this.clone();return r?o.__takeCount__=Ta(o.__takeCount__,n):o.__views__.push({size:n,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=G;i.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Xn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Ue:Do;i.prototype[t]=function(t){return this[n](r(t))}}),i.prototype.compact=function(){return this.filter(Co)},i.prototype.reject=function(t,e){return t=Xn(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||0>e)?new i(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==M&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n)},i.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},i.prototype.toArray=function(){return this.take(Ca)},Ae(i.prototype,function(t,n){var o=/^(?:filter|map|reject)|While$/.test(n),a=/^(?:first|last)$/.test(n),s=e[a?"take"+("last"==n?"Right":""):n];s&&(e.prototype[n]=function(){var e=a?[1]:arguments,n=this.__chain__,u=this.__wrapped__,c=!!this.__actions__.length,l=u instanceof i,h=e[0],f=l||Ps(u);f&&o&&"function"==typeof h&&1!=h.length&&(l=f=!1);var d=function(t){return a&&n?s(t,1)[0]:s.apply(M,ce([t],e))},p={func:Wr,args:[d],thisArg:M},v=l&&!c;if(a&&!n)return v?(u=u.clone(),u.__actions__.push(p),t.call(u)):s.call(M,this.value())[0];if(!a&&f){u=v?u:new i(this);var g=t.apply(u,e);return g.__actions__.push(p),new r(g,n)}return this.thru(d)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Qo:Jo)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Ae(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Da[i]||(Da[i]=[]);o.push({name:n,func:r})}}),Da[In(M,k).name]=[{name:"wrapper",func:M}],i.prototype.clone=b,i.prototype.reverse=Q,i.prototype.value=rt,e.prototype.chain=Gr,e.prototype.commit=zr,e.prototype.concat=es,e.prototype.plant=Vr,e.prototype.reverse=Yr,e.prototype.toString=$r,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=qr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var M,C="3.10.1",P=1,k=2,A=4,I=8,R=16,D=32,j=64,L=128,N=256,F=30,U="...",B=150,X=16,H=200,W=1,G=2,z="Expected a function",V="__lodash_placeholder__",Y="[object Arguments]",$="[object Array]",q="[object Boolean]",K="[object Date]",J="[object Error]",Z="[object Function]",Q="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object WeakMap]",at="[object ArrayBuffer]",st="[object Float32Array]",ut="[object Float64Array]",ct="[object Int8Array]",lt="[object Int16Array]",ht="[object Int32Array]",ft="[object Uint8Array]",dt="[object Uint8ClampedArray]",pt="[object Uint16Array]",vt="[object Uint32Array]",gt=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,yt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39|#96);/g,bt=/[&<>"'`]/g,xt=RegExp(_t.source),wt=RegExp(bt.source),Tt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,Ot=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,Pt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,kt=RegExp(Pt.source),At=/[\u0300-\u036f\ufe20-\ufe23]/g,It=/\\(\\)?/g,Rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Dt=/\w*$/,jt=/^0[xX]/,Lt=/^\[object .+?Constructor\]$/,Nt=/^\d+$/,Ft=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ut=/($^)/,Bt=/['\n\r\u2028\u2029\\]/g,Xt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ht=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Wt=-1,Gt={};Gt[st]=Gt[ut]=Gt[ct]=Gt[lt]=Gt[ht]=Gt[ft]=Gt[dt]=Gt[pt]=Gt[vt]=!0,Gt[Y]=Gt[$]=Gt[at]=Gt[q]=Gt[K]=Gt[J]=Gt[Z]=Gt[Q]=Gt[tt]=Gt[et]=Gt[nt]=Gt[rt]=Gt[it]=Gt[ot]=!1;var zt={};zt[Y]=zt[$]=zt[at]=zt[q]=zt[K]=zt[st]=zt[ut]=zt[ct]=zt[lt]=zt[ht]=zt[tt]=zt[et]=zt[nt]=zt[it]=zt[ft]=zt[dt]=zt[pt]=zt[vt]=!0,zt[J]=zt[Z]=zt[Q]=zt[rt]=zt[ot]=!1;var Vt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i",
"Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Yt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},$t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},qt={"function":!0,object:!0},Kt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Zt=qt[typeof e]&&e&&!e.nodeType&&e,Qt=qt[typeof t]&&t&&!t.nodeType&&t,te=Zt&&Qt&&"object"==typeof i&&i&&i.Object&&i,ee=qt[typeof self]&&self&&self.Object&&self,ne=qt[typeof window]&&window&&window.Object&&window,re=(Qt&&Qt.exports===Zt&&Zt,te||ne!==(this&&this.window)&&ne||ee||this),ie=O();re._=ie,r=function(){return ie}.call(e,n,e,t),!(r!==M&&(t.exports=r))}).call(this)}).call(e,n(28)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.open({templateUrl:"app/flag/flag.html",controller:"FlagController",controllerAs:"vm"})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(27),c=r(u),l=n(31),h=r(l),f=function(){function t(e,n,r,i,a,s,u,c,l,h,f){"ngInject";var d=this;o["default"](this,t),this.redirect=function(t){r.path(t),r.replace(),$(window).off("message",this.finishUpload)},this._urlService=n,this.uploader=u,this._$scope=e,this.$timeout=a,this.item=i,this._ability=s,this._analytics=h,this._storage=f,s.inject(e),e.item=i,this.getItem(),e.$watch("item.data.annotation_source_url",function(t){t&&d.annotate(t)}),this.finishUpload=this.finishUpload.bind(this),e.uploadFrameUrl=c.schema+"://s3.amazonaws.com/"+c.s3bucket+"/annotations/annotations.html",e.annoationsSet||(e.annotationsSet=!0,$(window).on("message",this.finishUpload)),this.setUpHotkeys(l.bindTo(e),i)}return t.$inject=["$scope","urlService","$location","itemService","$timeout","abilityService","AnnotationsUploader","config","hotkeys","analyticsService","storageService"],s["default"](t,[{key:"finishUpload",value:function(t){t.originalEvent.origin.match(/amazon/)&&this.item.annotations.uploader.onMessage(t.originalEvent)}},{key:"setUpHotkeys",value:function(t,e){function n(t){try{return e.annotations.drawing.commands[t]}catch(n){return c["default"].noop}}t.add({combo:["del","backspace"],description:"Delete element",callback:function(t){t.preventDefault(),n("canRemove")()&&n("removeActive")()}}),t.add({combo:"a",description:"Arrow tool",callback:function(){n("addArrow")()}}),t.add({combo:"c",description:"Circle tool",callback:function(){n("addCircle")()}}),t.add({combo:"f",description:"Free draw tool",callback:function(){n("freeDraw")()}}),t.add({combo:"r",description:"Rectangle tool",callback:function(){n("addRectangle")()}}),t.add({combo:"t",description:"Type tool",callback:function(t){t.preventDefault(),n("addText")()}}),t.add({combo:["command+s","ctrl+s"],description:"Save",callback:function(t){e.annotations.save(),t.preventDefault()}}),t.add({combo:["command+x","ctrl+x"],description:"Cut",callback:function(t){n("clipboardCut")(),t.preventDefault()}}),t.add({combo:["command+c","ctrl+c"],description:"Copy",callback:function(){n("clipboardCopy")()}}),t.add({combo:["command+v","ctrl+v"],description:"Paste",callback:function(t){n("clipboardPaste")(),t.preventDefault()}}),t.add({combo:["command+z","ctrl+z"],description:"Undo",callback:function(t){n("canUndo")()&&n("undo")(),t.preventDefault()}}),t.add({combo:["command+shift+z","ctrl+y"],description:"Redo",callback:function(t){n("canRedo")()&&n("redo")(),t.preventDefault()}}),t.add({combo:["escape"],description:"Dismiss current tool",callback:function(t){n("normal")(),t.preventDefault()}});for(var r=["Red","Orange","Green","Blue","White","Black"],i=function(t){return function(){n("setColor")(r[t].toLowerCase())}},o=0;6>o;o++)t.add({description:r[o],combo:(o+1).toString(),callback:i(o)})}},{key:"getItem",value:function(){var t=this,e=this.item,n=e.lazyGetItem();n&&n.then(function(n){return c["default"].has(n,"status")&&200!==n.status?void t.redirect("/"+e.slug()):void e.getDetails().then(function(t){$("body").toggleClass("dark","dark"===c["default"].get(t,"theme"))})})}},{key:"annotate",value:function(t){var e=this;this._ability.canAsync("annotate").then(function(){e.service=new h["default"](t,e),e.service.on("change",function(){e.$timeout()}),e._$scope.item.annotations=e.service},function(){e.redirect("/"+e.item.slug())})}},{key:"finish",value:function(t){var e;if(t){var n=document.createElement("a");n.href=t.url,e=n.pathname}else e=this._urlService.item(this.item);this.redirect(e)}}]),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(32),c=r(u),l=n(96),h=r(l),f=n(102),d=r(f),p=function(){function t(e,n){var r=this;o["default"](this,t),this._controller=n,this._analytics=n._analytics,this._storage=n._storage,this._item=n.item,this._callbacks={},this.url=e,this.state="pending",this.slug=this._item.slug(),this.loadImage().then(function(t){r.drawing=new c["default"](r,t.image,{canvasContainer:"#canvas",sticky:!0}),r.injectCommands(),r.annotationsStorage=new d["default"](r.slug,r.drawing,r._storage),r.annotationsStorage.hasData()&&r.annotationsStorage.restoreChanges().then(function(){return r.save()})}),this.image={progress:0},this._analytics.track("Annotations started")}return s["default"](t,[{key:"injectCommands",value:function(){this.commands=this.drawing.commands}},{key:"loadImage",value:function(){var t=this,e=this.url;return h["default"](e,{load:function(){t.state="ready"},progress:function(e){e.lengthComputable&&(t.image.progress=Math.round(e.loaded/e.total*100),t.emit("change"))}})}},{key:"save",value:function(){var t=this;_.include(["ready","failed"],this.state)&&(this._analytics.track("Annotations save",{campaign_medium:"button"}),this.state="saving",this.uploader=this._controller.uploader(this),this.uploader.save(function(e){e?(t.state="saved",t.finish(e)):t.state="failed"}))}},{key:"finish",value:function(t){t||this._analytics.track("Annotations cancel",{campaign_medium:"button"}),this._controller.finish(t)}},{key:"on",value:function(t,e){this._callbacks[t]=_.union(this._callbacks[t],[e])}},{key:"emit",value:function(){var t=this,e=arguments;_.each(e,function(e){_.each(t._callbacks[e],function(e){e(t)})})}}]),t}();e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(33),c=r(u),l=n(27),h=r(l),f=n(34),d=r(f),p=n(35),v=r(p),g=n(87),m=r(g),y=n(88),_=r(y),b=n(89),x=r(b),w=n(90),T=r(w),E=n(91),S=r(E),O=n(92),M=r(O),C=n(93),P=r(C),k=n(94),A=r(k),I=n(95),R=r(I);d["default"](c["default"]),v["default"](c["default"]),m["default"](c["default"]),_["default"](c["default"]),x["default"](c["default"]),T["default"](c["default"]),S["default"](c["default"]),M["default"](c["default"]),P["default"](c["default"]),A["default"](c["default"]);var D={el:void 0,cntObj:0},j=function(){return D},L=function(){function t(e,n,r){var i=this;o["default"](this,t),this.service=e,this.mode="normal",this.sticky=h["default"].get(r,"sticky",!0);var a=new fabric.Image(n,{lockMovementX:!0,lockMovementY:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,hoverCursor:"crosshair",borderColor:"rgba(255,255,255,0)"}),s=fabric.util.object.clone(a);this.originalImage=a,this.Image=s;var u=$(".annotations_canvas").width();this.modifierKeys={shift:!1},$(document).on("keyup keydown",function(t){i.modifierKeys.shift=t.shiftKey});var c=Math.max(window.innerHeight-75,$(".annotations_canvas").height()),l=document.createElement("canvas");l.width=u,l.height=c,R["default"].getImageHeight(s)>c&&s.scaleToHeight(c),R["default"].getImageWidth(s)>u&&s.scaleToWidth(u);var f=$(r.canvasContainer).get(0);f.appendChild(l),this._setCanvas(l),this.canvas.add(s),s.center(),s.sendToBack(),this.setCommandProvider(),window._CANVAS=function(){return i.canvas},this.autoSetMode()}return s["default"](t,[{key:"autoSetMode",value:function(){var t=this.service._storage.fetch("annotationsMode");t&&(this.setMode(t,h["default"].noop)(),this.service.emit("change"))}},{key:"setMode",value:function(t,e){var n=this;return function(){e||(e=h["default"].noop);var r=n.mode;r!==t&&("text"!==r&&n.canvas.discardActiveObject(),n.canvas.isDrawingMode="drawing"===t,h["default"].each(n.canvas.getObjects(),function(e){n.sticky?e.set("selectable","blur"!==t):e.set("selectable","normal"===t)}),(n.drawingMode||{}).omitAction=!1,n._setMode(t)),e(),"blur"===r&&n.commands._blurCancel()}}},{key:"_setMode",value:function(t){this.service._storage.store("annotationsMode",t),this.mode=t}},{key:"setCommandProvider",value:function(){var t=this,e={red:"#FF3A30",orange:"#FFAD21",green:"#82D233",blue:"#5C92E0",white:"#FFFFFF",black:"#1E1E1E"},n=this,r=c["default"].init();this.commandProvider=r,r.inject({drawing:n,disableFreeDraw:function(){console.log("DEPRACATED: disable free draw")},fabric:fabric,getBlur:j,getStrokeWidth:function(){return 4},getColor:this.getColor.bind(this),getModifierKeys:function(){return n.modifierKeys},getCanvas:function(){return n.canvas},getHeight:function(){return R["default"].getHeight(n.canvas)},getImage:function(){return n.Image},getLeft:function(){return R["default"].getLeft(n.canvas)},getTop:function(){return R["default"].getTop(n.canvas)},getWidth:function(){return R["default"].getWidth(n.canvas)},newDimension:R["default"].newDimension});var i=r.map("rect"),o=r.map("removeActive"),a=r.map("blur",{createRect:i.createRect,getImageWidth:R["default"].getImageWidth,getImageHeight:R["default"].getImageHeight}),s=r.map("clipboard",{removeActive:o}),u=function(t,e){return function(){return n.service._analytics.track("Annotations "+t,{campaign_medium:"button"}),e.apply(null,arguments)}};this.commands={addText:u("text",n.setMode("text",h["default"].noop)),addArrow:u("arrow",n.setMode("arrow",h["default"].noop)),addLine:u("line",n.setMode("line",h["default"].noop)),addCircle:u("circle",n.setMode("circle",h["default"].noop)),addRectangle:u("rectangle",n.setMode("rectangle",h["default"].noop)),freeDraw:u("free draw",n.setMode("drawing",h["default"].noop)),removeActive:u("remove",r.map("removeActive")),blurApply:u("blur apply",n.setMode("normal",a.apply)),blurClick:u("blur",n.setMode("blur",a.click)),blurCancel:u("blur cancel",n.setMode("normal",a.cancel)),addBlur:a.addBlur,_blurCancel:a.cancel,_freeDrawAddPath:r.map("freeDraw"),normal:n.setMode("normal",h["default"].noop),draw:{rectangle:r.map("rect").drawRect,circle:r.map("ellipse"),arrow:r.map("arrow"),line:r.map("line"),text:r.map("text"),blur:a.draw},clipboardCopy:u("clipboardCopy",s.copy),clipboardPaste:u("clipboardPaste",s.paste),clipboardCut:u("clipboardCut",s.cut),undo:u("undo",r.undo),redo:u("redo",r.redo),canUndo:function(){return r.canUndo()},canRedo:function(){return r.canRedo()},canRemove:function(){return n.commands.mode("blur")?!1:n.getActiveNonImageObject()},getColor:function(){return h["default"].invert(e)[t.getColor()]},setColor:function(n){t.setColor(e[n]),t.service.emit("change")},mode:function(e){return t.mode===e}}}},{key:"_setCanvas",value:function(t){var e=this;this.globalColor="#FF3A30",this.canvas=new fabric.Canvas(t,{selection:!1,enableRetinaScaling:!1,defaultCursor:"crosshair"}),this.service.emit("change");var n={callback:null,unset:null,selected:!1,omitAction:!1};this.drawingMode=n,this.canvas.on("mouse:down",function(t){return n.omitAction&&!e._getActiveObject()[1]?(n.omitAction=!1,n.selected=!1):e.sticky&&(n.selected||e._getActiveObject()[1])?n.selected=!1:void(e.commands.draw[e.mode]&&e.commands.draw[e.mode](n,t))}),this.canvas.on("mouse:move",function(t){n.callback&&n.callback(e.canvas.getPointer(t.e))}),this.canvas.on("mouse:up",function(t){n.unset&&(n.unset(t),n.unset=null),n.callback&&(n.callback=null,e.sticky||e.setMode("normal",h["default"].noop)()),e.service.emit("change")}),this.canvas.on("object:selected",function(t){e.sticky&&"image"!==t.target.type&&(n.selected=!0,n.omitAction=!0),e.service.emit("change")}),this.canvas.on("path:created",function(t){e.service.emit("change"),e.canvas.isDrawingMode&&e.commands._freeDrawAddPath(t.path)}),this.canvas.freeDrawingBrush.color=this._getGlobalColor(),this.canvas.freeDrawingBrush.width=4}},{key:"_getGlobalColor",value:function(){return this.globalColor}},{key:"_getLocalColor",value:function(){var t=this._getActiveObject()[0],e=this._getActiveObject()[1];return t&&e?t[e]:null}},{key:"getColor",value:function(){return this._getLocalColor()||this._getGlobalColor()}},{key:"_getActiveObject",value:function(){var t=null,e=this.canvas.getActiveObject();if(e)switch(e.type){case"i-text":t="fill";break;case"image":break;default:t="stroke"}return[e,t]}},{key:"getActiveNonImageObject",value:function(){var t=this.canvas.getActiveObject();return"image"===h["default"].get(t,"type")?null:t}},{key:"setColor",value:function(t){var e=this,n=this._getActiveObject()[0],r=this._getActiveObject()[1];return r?this.commandProvider.execute(function(){return{_init:function(){this.beforeColorName=e._getLocalColor(),this.afterColorName=t},up:function(){n[r]=this.afterColorName,n.trigger&&n.trigger("color:changed"),e.globalColor=this.afterColorName,e.canvas.renderAll()},down:function(){n[r]=this.beforeColorName,n.trigger&&n.trigger("color:changed"),e.globalColor=this.beforeColorName,e.canvas.renderAll()}}}):(this.canvas.freeDrawingBrush.color=t,this.globalColor=t,!1)}}]),t}();e["default"]=L},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={_commands:{},register:function(t,e){this._commands[t]=e},init:function(){var t=this,e={history:[],index:-1,base:{},map:function(n,r){return t._commands[n]?t._commands[n].bind(this,e)(e.base,r):void 0},inject:function(t){for(var n in t)e.base[n]=t[n]},notify:function(){},redo:function(){return e.canRedo()?(e.index+=1,e.history[e.index].up(),e.notify(),!0):void 0},undo:function(){return e.canUndo()?(e.history[e.index].down(),e.index-=1,e.notify(),!0):void 0},canUndo:function(){return!!e.history[e.index]},canRedo:function(){return!!e.history[e.index+1]},execute:function(t,n){return e.history.splice(e.index+=1,e.history.length,t(n)),e.history[e.index]._init&&e.history[e.index]._init(),e.history[e.index].up(),e.notify(),e.history[e.index]}};return window.cmd=e,e}};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("modified",function(t,e){return function(n,r){var i=function(){var n=this;return t.execute(function(){var t=["top","left","angle"];n.textAlign?t.push("text"):(t.push("width"),t.push("height"));var i={after:{},before:{},_init:function(){t.forEach(function(t){i.after[t]=n[t],i.before[t]=n.originalState[t]})},up:function(){t.forEach(function(t){n[t]=i.after[t]}),"function"==typeof r&&r(i.after),n.setCoords(),e.getCanvas().renderAll()},down:function(){t.forEach(function(t){n[t]=i.before[t]}),"function"==typeof r&&r(i.before),n.setCoords(),e.getCanvas().renderAll()}};return i})};if(n.on("modified",i),n.textAlign){var o,a;n.on("changed",function(){a?(o!==this.originalState.text?a=i.bind(this)():a.after.text=this.text,o=this.originalState.text):(a=i.bind(this)(),o=this.originalState.text)})}}})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=r(i),a=function(t){t.register("rect",function(t,e){var n=function(t){var n={lockScalingX:!0,lockScalingY:!0,hasRotatingPoint:!1};t="object"===("undefined"==typeof t?"undefined":o["default"](t))?$.extend(n,t):n;var r=new e.fabric.Rect(t);return r.setControlsVisibility({ml:!1,mr:!1,mt:!1,mb:!1}),r.on("scaling",function(t){var n=e.getCanvas().getPointer(t.e),r=e.newDimension(this,n);this.top=r.top,this.left=r.left,this.width=r.width,this.height=r.height}),r},r=function(t,r,i,o){var a=n({top:r,left:t,width:i,height:o,transparentCorners:!1,borderColor:"rgba(201,201,201,0.2)",cornerColor:"rgba(193,193,193,0.8)",cornerSize:12,padding:-2,fill:"transparent",stroke:e.getColor(),strokeWidth:e.getStrokeWidth(),selectable:e.drawing.sticky,ry:3,rx:3});return a},i=function(n,i){var o,a,s=e.getCanvas(),u=s.getPointer(i.e);o=u.x,a=u.y;var c=r(o,a,u.x-o,u.y-a);return t.map("modified")(c),n.callback=function(t){c.set({left:o>t.x?t.x:o,top:a>t.y?t.y:a,width:Math.abs(o-t.x),height:Math.abs(a-t.y)}),s.remove(c),s.add(c)},n.unset=function(){s.remove(c),s.add(c),s.renderAll()},c},a=function(n,r){t.execute(function(){return{init:function(){this.instance=i(n,r)},up:function(){var t=e.getCanvas();return this.instance||this.init(),t.add(this.instance),this.instance},down:function(){e.getCanvas().remove(this.instance)}}})};return{createRect:n,drawRect:a,addRect:function(){t.execute(function(){return{init:function(){this.instance=r()},up:function(){this.instance||this.init();var t=e.getCanvas();return t.add(this.instance),t.setActiveObject(this.instance),this.instance},down:function(){e.getCanvas().remove(this.instance)}}})}}})};e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(37),o=r(i),a=n(72),s=r(a),u="function"==typeof s["default"]&&"symbol"==typeof o["default"]?function(t){return typeof t}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":typeof t};e["default"]="function"==typeof s["default"]&&"symbol"===u(o["default"])?function(t){return"undefined"==typeof t?"undefined":u(t)}:function(t){return t&&"function"==typeof s["default"]&&t.constructor===s["default"]&&t!==s["default"].prototype?"symbol":"undefined"==typeof t?"undefined":u(t)}},function(t,e,n){t.exports={"default":n(38),__esModule:!0}},function(t,e,n){n(39),n(67),t.exports=n(71).f("iterator")},function(t,e,n){"use strict";var r=n(40)(!0);n(43)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(41),i=n(42);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),u=r(n),c=s.length;return 0>u||u>=c?t?"":void 0:(o=s.charCodeAt(u),55296>o||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?t?s.charAt(u):o:t?s.slice(u,u+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(44),i=n(11),o=n(45),a=n(16),s=n(46),u=n(47),c=n(63),l=n(65),h=n(64)("iterator"),f=!([].keys&&"next"in[].keys()),d="@@iterator",p="keys",v="values",g=function(){return this};t.exports=function(t,e,n,m,y,_,b){u(n,e,m);var x,w,T,E=function(t){if(!f&&t in C)return C[t];switch(t){case p:return function(){return new n(this,t)};case v:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",O=y==v,M=!1,C=t.prototype,P=C[h]||C[d]||y&&C[y],k=P||E(y),A=y?O?E("entries"):k:void 0,I="Array"==e?C.entries||P:P;if(I&&(T=l(I.call(new t)),T!==Object.prototype&&T.next&&(c(T,S,!0),r||"function"==typeof T[h]||a(T,h,g))),O&&P&&P.name!==v&&(M=!0,k=function(){return P.call(this)}),r&&!b||!f&&!M&&C[h]||a(C,h,k),s[e]=k,s[S]=g,y)if(x={values:O?k:E(v),keys:_?k:E(p),entries:A},b)for(w in x)w in C||o(C,w,x[w]);else i(i.P+i.F*(f||M),e,x);return x}},function(t,e){t.exports=!0},function(t,e,n){t.exports=n(16)},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(48),i=n(25),o=n(63),a={};n(16)(a,n(64)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(18),i=n(49),o=n(61),a=n(58)("IE_PROTO"),s=function(){},u="prototype",c=function(){var t,e=n(23)("iframe"),r=o.length,i="<",a=">";for(e.style.display="none",n(62).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),c=t.F;r--;)delete c[u][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[u]=r(t),n=new s,s[u]=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(17),i=n(18),o=n(50);t.exports=n(21)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,u=0;s>u;)r.f(t,n=a[u++],e[n]);return t}},function(t,e,n){var r=n(51),i=n(61);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(26),i=n(52),o=n(55)(!1),a=n(58)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;e.length>u;)r(s,n=e[u++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(53),i=n(42);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(54);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(52),i=n(56),o=n(57);t.exports=function(t){return function(e,n,a){var s,u=r(e),c=i(u.length),l=o(a,c);if(t&&n!=n){for(;c>l;)if(s=u[l++],s!=s)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(41),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(41),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),0>t?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(59)("keys"),i=n(60);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e,n){var r=n(13),i=n(12),o="__core-js_shared__",a=i[o]||(i[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(44)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var r=n(12).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(17).f,i=n(26),o=n(64)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(59)("wks"),i=n(60),o=n(12).Symbol,a="function"==typeof o,s=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};s.store=r},function(t,e,n){var r=n(26),i=n(66),o=n(58)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(42);t.exports=function(t){return Object(r(t))}},function(t,e,n){n(68);for(var r=n(12),i=n(16),o=n(46),a=n(64)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],h=l&&l.prototype;h&&!h[a]&&i(h,a,c),o[c]=o.Array}},function(t,e,n){"use strict";var r=n(69),i=n(70),o=n(46),a=n(52);t.exports=n(43)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){e.f=n(64)},function(t,e,n){t.exports={"default":n(73),__esModule:!0}},function(t,e,n){n(74),n(84),n(85),n(86),t.exports=n(13).Symbol},function(t,e,n){"use strict";var r=n(12),i=n(26),o=n(21),a=n(11),s=n(45),u=n(75).KEY,c=n(22),l=n(59),h=n(63),f=n(60),d=n(64),p=n(71),v=n(76),g=n(77),m=n(80),y=n(18),_=n(19),b=n(52),x=n(24),w=n(25),T=n(48),E=n(81),S=n(83),O=n(17),M=n(50),C=S.f,P=O.f,k=E.f,A=r.Symbol,I=r.JSON,R=I&&I.stringify,D="prototype",j=d("_hidden"),L=d("toPrimitive"),N={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),B=l("op-symbols"),X=Object[D],H="function"==typeof A,W=r.QObject,G=!W||!W[D]||!W[D].findChild,z=o&&c(function(){return 7!=T(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=C(X,e);r&&delete X[e],P(t,e,n),r&&t!==X&&P(X,e,r)}:P,V=function(t){var e=U[t]=T(A[D]);return e._k=t,e},Y=H&&"symbol"==typeof A.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof A},$=function(t,e,n){return t===X&&$(B,e,n),y(t),e=x(e,!0),y(n),i(U,e)?(n.enumerable?(i(t,j)&&t[j][e]&&(t[j][e]=!1),n=T(n,{enumerable:w(0,!1)})):(i(t,j)||P(t,j,w(1,{})),t[j][e]=!0),z(t,e,n)):P(t,e,n)},q=function(t,e){y(t);for(var n,r=g(e=b(e)),i=0,o=r.length;o>i;)$(t,n=r[i++],e[n]);return t},K=function(t,e){return void 0===e?T(t):q(T(t),e)},J=function(t){var e=N.call(this,t=x(t,!0));return this===X&&i(U,t)&&!i(B,t)?!1:e||!i(this,t)||!i(U,t)||i(this,j)&&this[j][t]?e:!0},Z=function(t,e){if(t=b(t),e=x(e,!0),t!==X||!i(U,e)||i(B,e)){var n=C(t,e);return!n||!i(U,e)||i(t,j)&&t[j][e]||(n.enumerable=!0),n}},Q=function(t){for(var e,n=k(b(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==j||e==u||r.push(e);return r},tt=function(t){for(var e,n=t===X,r=k(n?B:b(t)),o=[],a=0;r.length>a;)i(U,e=r[a++])&&(n?i(X,e):!0)&&o.push(U[e]);return o};H||(A=function(){if(this instanceof A)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===X&&e.call(B,n),i(this,j)&&i(this[j],t)&&(this[j][t]=!1),z(this,t,w(1,n))};return o&&G&&z(X,t,{configurable:!0,set:e}),V(t)},s(A[D],"toString",function(){return this._k}),S.f=Z,O.f=$,n(82).f=E.f=Q,n(79).f=J,n(78).f=tt,o&&!n(44)&&s(X,"propertyIsEnumerable",J,!0),p.f=function(t){return V(d(t))}),a(a.G+a.W+a.F*!H,{Symbol:A});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var rt=M(d.store),it=0;rt.length>it;)v(rt[it++]);a(a.S+a.F*!H,"Symbol",{"for":function(t){return i(F,t+="")?F[t]:F[t]=A(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!H,"Object",{create:K,defineProperty:$,defineProperties:q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:tt}),I&&a(a.S+a.F*(!H||c(function(){var t=A();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return n=e=r[1],!_(e)&&void 0===t||Y(t)?void 0:(m(e)||(e=function(t,e){return"function"==typeof n&&(e=n.call(this,t,e)),Y(e)?void 0:e}),r[1]=e,R.apply(I,r))}}),A[D][L]||n(16)(A[D],L,A[D].valueOf),h(A,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){var r=n(60)("meta"),i=n(19),o=n(26),a=n(17).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(22)(function(){return u(Object.preventExtensions({}))}),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[r].i},f=function(t,e){if(!o(t,r)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[r].w},d=function(t){return c&&p.NEED&&u(t)&&!o(t,r)&&l(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},function(t,e,n){var r=n(12),i=n(13),o=n(44),a=n(71),s=n(17).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(50),i=n(78),o=n(79);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),u=o.f,c=0;s.length>c;)u.call(t,a=s[c++])&&e.push(a);return e}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(54);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(52),i=n(82).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):i(r(t))}},function(t,e,n){var r=n(51),i=n(61).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(79),i=n(25),o=n(52),a=n(24),s=n(26),u=n(20),c=Object.getOwnPropertyDescriptor;e.f=n(21)?c:function(t,e){if(t=o(t),e=a(e,!0),u)try{return c(t,e)}catch(n){}return s(t,e)?i(!r.f.call(t,e),t[e]):void 0}},function(t,e){},function(t,e,n){n(76)("asyncIterator")},function(t,e,n){n(76)("observable")},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=r(i),a=function(t){t.register("ellipse",function(t,e){var n=function(t){var n={lockScalingX:!0,hasRotatingPoint:!1,transparentCorners:!1,borderColor:"rgba(201,201,201,0.2)",cornerColor:"rgba(193,193,193,0.8)",cornerSize:12,padding:-2,fill:"transparent",selectable:e.drawing.sticky};t="object"===("undefined"==typeof t?"undefined":o["default"](t))?$.extend(n,t):n;var r=new e.fabric.Ellipse(t);return r.setControlsVisibility({ml:!1,mr:!1,mt:!1,mb:!1}),r.on("scaling",function(t){var n=e.getCanvas().getPointer(t.e),r=e.newDimension(this,n);this.top=r.top,this.left=r.left,this.width=r.width,this.height=r.height,this.rx=this.width/2,this.ry=this.height/2}),r},r=function(r,i,o,a){var s=n({stroke:e.getColor(),strokeWidth:e.getStrokeWidth(),rx:o/2,ry:a/2,height:a,width:o,left:r,top:i});return t.map("modified")(s,function(t){s.rx=t.width/2,s.ry=t.height/2}),s},i=function(t,n){var i,o,a=e.getCanvas(),s=a.getPointer(n.e);i=s.x,o=s.y;var u=r(i,o,s.x-i,s.y-o);return t.callback=function(t){u.set({left:i>t.x?t.x:i,top:o>t.y?t.y:o,width:Math.abs(i-t.x),height:Math.abs(o-t.y)}),u.set({rx:u.getWidth()/2,ry:u.getHeight()/2}),a.remove(u),a.add(u)},t.unset=function(){a.remove(u),a.add(u),a.renderAll()},u};return function(n,r){t.execute(function(){return{init:function(){this.instance=i(n,r)},up:function(){var t=e.getCanvas();return this.instance||this.init(),t.add(this.instance),this.instance},down:function(){e.getCanvas().remove(this.instance)}}})}})};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("arrow",function(t,e){var n=function(n,r){var i=e.getCanvas(),o=new fabric.Path("M 0 0 L 0 0 M 0 0 L 0 0 M 0 0 L 0 0",{stroke:e.getColor(),strokeWidth:e.getStrokeWidth(),fill:!1,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,strokeLineCap:"round",transparentCorners:!1,hasRotatingPoint:!1,borderColor:"rgba(201,201,201,0.0)",cornerColor:"rgba(193,193,193,0.8)",cornerSize:12,padding:2,originX:"left",originY:"top"}),a=e.getStrokeWidth();return o.setAngle(45).set({left:n,top:r}),o.setControlsVisibility({tl:!1,bl:!1,tr:!1,br:!1,mt:!1,mb:!1}),o.on("scaling",function(t){var e,n,r;switch(this.__corner){case"ml":e=this.oCoords.mr,n=i.getPointer(t.e),r=Math.atan2(n.y-e.y,n.x-e.x)+Math.PI/2,
this.width=Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2)),this.angle=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI+180,this.path[1][1]=this.width,this.pathOffset.x=this.width/2,this.top=n.y+a*Math.sin(r),this.left=n.x+a*Math.cos(r);break;case"mr":n=i.getPointer(t.e),e=this.oCoords.ml,r=Math.atan2(e.y-n.y,e.x-n.x)+Math.PI/2,this.width=Math.sqrt(Math.pow(e.y-n.y,2)+Math.pow(e.x-n.x,2)),this.angle=180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI+180,this.path[1][1]=this.width,this.pathOffset.x=this.width/2,this.top=e.y+a*Math.sin(r),this.left=e.x+a*Math.cos(r)}}),t.map("modified")(o,function(t){o.path[1][1]=t.width,o.pathOffset.x=t.width/2}),o},r=function(t,r){var i,o,a=e.getCanvas(),s=a.getPointer(r.e);i=s.x,o=s.y;var u=n(i,o,s.x-i,s.y-o);return t.callback=function(t){var e={x:i,y:o};u.width=Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2)),u.angle=180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI+180;var n=_.min([u.width,100]);u.path[3][1]=.2*n,u.path[5][1]=.2*n,u.path[3][2]=.15*n,u.path[5][2]=-.15*n,u.path[1][1]=u.width,u.pathOffset.x=u.width/2,u.top=t.y,u.left=t.x,a.remove(u),a.add(u)},t.unset=function(){a.remove(u),a.add(u),a.renderAll()},u};return function(n,i){t.execute(function(){var t=e.getCanvas();return{init:function(){this.instance=r(n,i)},up:function(){return this.instance||this.init(),t.add(this.instance),this.instance},down:function(){t.remove(this.instance)}}})}})};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("text",function(t,e){var n=function(n,r,i){e.disableFreeDraw();var o=new e.fabric.IText(n||"  ",{transparentCorners:!1,borderColor:"rgba(201,201,201,0.2)",editingBorderColor:"rgba(201,201,201,0.0)",cornerColor:"rgba(193,193,193,0.8)",cornerSize:12,padding:-2,fontFamily:"Helvetica, Arial",fontSize:28,fill:e.getColor(),top:i,left:r,originX:"left",originY:"top"}),a=1;return o.setControlsVisibility({ml:!1,mr:!1,bl:!1,mb:!1,mt:!1,tr:!1}),o.on("scaling",function(){a=o.getScaleX()}),o.on("editing:entered",function(){o.backgroundColor="#FFFFFF"===o.fill?"rgba(0, 0, 0, 0.7)":"rgba(255, 255, 255, 0.7)"}),o.on("color:changed",function(){o.backgroundColor&&o.trigger("editing:entered")}),o.on("editing:exited",function(){o.backgroundColor=null}),o.on("changed",function(){var t=o.text;t&&3===t.length&&1===t.trim().length&&(o.text=t[0]);var n=e.getCanvas(),r=n.width-o.left-10;o.width*a>r?o.scaleToWidth(r):o.scale(a),n.renderAll()}),t.map("modified")(o),o},r=function(t,r){var i,o,a=e.getCanvas(),s=a.getPointer(r.e);i=s.x,o=s.y;var u=n(null,i,o),c=200,l=function(t,e){return Math.pow(_.max([0,e-t+c]),2)};return u.finished=!1,setTimeout(function(){u.finished||(u.text="Text")},100),t.callback=function(t){var e=Math.sqrt(l(i,t.x)+l(o,t.y));u.scale(_.max([.1,e/(c*Math.sqrt(2))])),u.trigger("scaling"),a.remove(u),a.add(u)},t.unset=function(){u.finished=!0,a.setActiveObject(u),u.text="  ",u.enterEditing(),u.hiddenTextarea.focus()},u};return function(n,i){t.execute(function(){return{init:function(){this.instance=r(n,i)},up:function(){var t=!!this.instance;t||this.init();var n=e.getCanvas();return n.add(this.instance),t&&(n.setActiveObject(this.instance),this.instance.enterEditing(),this.instance.selectAll(),this.instance.hiddenTextarea.focus()),this.instance},down:function(){e.getCanvas().remove(this.instance)}}})}})};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("line",function(t,e){var n=function(n,r){var i=e.getCanvas(),o=new fabric.Path("M 0 0 L 0 0",{stroke:e.getColor(),strokeWidth:e.getStrokeWidth(),fill:!1,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,strokeLineCap:"round",transparentCorners:!1,hasRotatingPoint:!1,borderColor:"rgba(201,201,201,0.0)",cornerColor:"rgba(193,193,193,0.8)",cornerSize:12,padding:2,originX:"left",originY:"top"}),a=e.getStrokeWidth();return o.setAngle(45).set({left:n,top:r}),o.setControlsVisibility({tl:!1,bl:!1,tr:!1,br:!1,mt:!1,mb:!1}),o.on("scaling",function(t){var e,n,r;switch(this.__corner){case"ml":e=this.oCoords.mr,n=i.getPointer(t.e),r=Math.atan2(n.y-e.y,n.x-e.x)+Math.PI/2,this.width=Math.sqrt(Math.pow(n.y-e.y,2)+Math.pow(n.x-e.x,2)),this.angle=180*Math.atan2(n.y-e.y,n.x-e.x)/Math.PI+180,this.path[1][1]=this.width,this.pathOffset.x=this.width/2,this.top=n.y+a*Math.sin(r),this.left=n.x+a*Math.cos(r);break;case"mr":n=i.getPointer(t.e),e=this.oCoords.ml,r=Math.atan2(e.y-n.y,e.x-n.x)+Math.PI/2,this.width=Math.sqrt(Math.pow(e.y-n.y,2)+Math.pow(e.x-n.x,2)),this.angle=180*Math.atan2(e.y-n.y,e.x-n.x)/Math.PI+180,this.path[1][1]=this.width,this.pathOffset.x=this.width/2,this.top=e.y+a*Math.sin(r),this.left=e.x+a*Math.cos(r)}}),t.map("modified")(o,function(t){o.path[1][1]=t.width,o.pathOffset.x=t.width/2}),o},r=function(t,r){var i,o,a=e.getCanvas(),s=a.getPointer(r.e);i=s.x,o=s.y;var u=n(i,o,s.x-i,s.y-o);return t.callback=function(t){var n={x:i,y:o};u.width=Math.sqrt(Math.pow(t.y-n.y,2)+Math.pow(t.x-n.x,2)),u.angle=180*Math.atan2(t.y-n.y,t.x-n.x)/Math.PI+180,e.getModifierKeys().shift,u.path[1][1]=u.width,u.pathOffset.x=u.width/2,u.top=t.y,u.left=t.x,a.remove(u),a.add(u)},t.unset=function(){a.remove(u),a.add(u),a.renderAll()},u};return function(n,i){t.execute(function(){var t=e.getCanvas();return{init:function(){this.instance=r(n,i)},up:function(){return this.instance||this.init(),t.add(this.instance),this.instance},down:function(){t.remove(this.instance)}}})}})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(36),o=r(i),a=function(t){t.register("removeActive",function(t,e){var n=function(){var t=e.getCanvas();if("undefined"==typeof t)return!1;var n=t.getActiveObject();return"undefined"!=typeof n&&null!==n?"i-text"===n.type&&n.isEditing||"image"===n.type?!1:n:!1};return function(){e.drawing.getActiveNonImageObject()&&t.execute(function(){return{init:function(){this.instance=n()},up:function(){"object"!==o["default"](this.instance)&&this.init(),e.getCanvas().remove(this.instance)},down:function(){e.getCanvas().add(this.instance),e.getCanvas().setActiveObject(this.instance)}}})}})};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("clipboard",function(t,e,n){var r={_clipboard:null,_clone:function(t){var n=e.fabric.util.object.clone(t);return n.pathOffset&&(n.pathOffset=$.extend(!0,{},n.pathOffset)),n.path&&(n.path=$.extend(!0,[],n.path)),n},copy:function(){var t=e.getCanvas(),n=t.getActiveObject();return!n||n.isEditing?!1:(r._clipboard=r._clone(n),!0)},cut:function(){return r.copy()?(n.removeActive(),!0):!1},paste:function(){if(r._clipboard){var n=e.getCanvas(),i=n.getActiveObject(),o=r._clone(r._clipboard);if(i){if(i.isEditing)return!1;o.left=i.left+10,o.top=i.top+10}return o&&t.execute(function(){return{up:function(){n.add(o),n.setActiveObject(o)},down:function(){n.remove(o)}}}),!0}}};return r})};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("freeDraw",function(t,e){return function(n){t.execute(function(){var t={up:function(){if(t.instance){var r=e.getCanvas();r.add(this.instance)}else n.borderColor="rgba(201,201,201,0.2)",n.cornerColor="rgba(193,193,193,0.8)",n.transparentCorners=!1,n.hasRotatingPoint=!1,this.instance=n},down:function(){var t=e.getCanvas();t.remove(this.instance)}};return t})}})};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.register("blur",function(t,e,n){var r=function(t){var n=new e.fabric.Image.filters.Pixelate({blocksize:Math.floor(5/t)});return n},i=function(){var t=e.getBlur();t.mode&&(t.mode.selected=!1),e.getCanvas().remove(t.el),t.el=void 0},o=function(t,o){var a=e.getImage(),s=t.left,u=t.top,c=t.width,l=t.height,h=t.scaleX,f=t.scaleY;a.clone(function(t){var e=t;e.rect={width:c,height:l,top:u,left:s,scaleX:h,scaleY:f},e.subType="blur",e.lockRotation=!0,e.lockMovementX=!0,e.lockMovementY=!0,e.lockScalingX=!0,e.lockScalingY=!0,e.hasControls=!1,e.hoverCursor="default",e.borderColor="rgba(255,255,255,0)",e.clipTo=function(t){return t.rect((-(n.getImageWidth(a)/2)+s)/a.scaleX,(-(n.getImageHeight(a)/2)+u)/a.scaleY,parseInt(c*h/a.scaleX,10),parseInt(l*f/a.scaleY,10))};var i=r(Math.max(a.scaleX,a.scaleY));e.applyFilters(function(){o(e)},[i],a._originalElement)}),i(),e.getCanvas().renderAll()},a=function(){var t=e.getBlur(),n=e.getImage(),r=t.el.get("left"),i=t.el.get("top"),o=r-n.left,a=i-n.top,s=t.el.get("width"),u=t.el.get("height"),c=t.el.get("scaleX"),l=t.el.get("scaleY"),h=1*s,f=1*u;return{width:h,height:f,top:a,left:o,scaleX:c,scaleY:l}},s=_.noop,u=function(t,e,r,i){return n.createRect({fill:"rgba(0,0,0,0.3)",originX:"left",originY:"top",stroke:"#ccc",strokeDashArray:[2,2],opacity:1,top:e,left:t,width:r,height:i,borderColor:"#36fd00",cornerColor:"green"})},c=function(n){var r=new Promise(function(r,i){t.execute(function(){var t={init:function(e){o(n,function(n){t.instance=n,e()})},up:function(){var n=function(){try{e.getCanvas().add(t.instance),t.instance.sendToBack(),t.instance.bringForward()}catch(n){i(n)}};t.instance?n():t.init(function(){n(),r()})},down:function(){e.getCanvas().remove(t.instance)}};return t})});return r},l=void 0,h=function(t,n){var r=t,i=e.getCanvas(),o=e.getImage(),a=e.getBlur();if(a.el)return null;a.object=o,a.mode=r;var s=i.getPointer(n.e),c=s.x,h=s.y,f=u(c,h,s.x-c,s.y-h);return a.el=f,r.callback=function(t){f.set({left:c>t.x?t.x:c,top:h>t.y?t.y:h,width:Math.abs(c-t.x),height:Math.abs(h-t.y)}),i.remove(f),i.add(f)},r.unset=function(){i.remove(f),i.add(f),i.renderAll(),l.apply()},i.add(f),f};return l={draw:h,click:s,cancel:i,addBlur:c,apply:function(){return c(a())}}})};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){_.include([90,270,-90,-270],e.angle)&&(t="height"===t?"width":"height");var r=e._calculateCurrentDimensions();return n?r["height"===t?"y":"x"]:e[t]},r=function(t,e){return e?n("height",t):n("height",t,!0)||n("height",t)},i=function(t,e){return e?n("width",t):n("width",t,!0)||n("width",t)},o=function(t){return Math.min.apply(Math,[100,t.height/2])},a=function(t){return Math.min.apply(Math,[100,t.width/2])},s=function(t){return t.height/3},u=function(t){return t.width/2},c=function(t){return Math.max.apply(null,t)},l=function(t){return Math.min.apply(null,t)},h=function(t){return"path"!==t.type?t.getHeight()+t.getStrokeWidth():Math.sin(t.getAngle()/180*Math.PI)*(t.getWidth()+t.getStrokeWidth())},f=function(t){return"path"!==t.type?t.getWidth()+t.getStrokeWidth():Math.cos(t.getAngle()/180*Math.PI)*(t.getWidth()+t.getStrokeWidth())},d=function(t){return m(t,function(t){return Math.min(t.getTop(),t.getTop()+h(t))},l,-1)},p=function(t){return m(t,function(t){return Math.max(t.getTop(),t.getTop()+h(t))},c,1)},v=function(t){return m(t,function(t){return Math.min(t.getLeft(),t.getLeft()+f(t))},l,-1)},g=function(t){return m(t,function(t){return Math.max(t.getLeft(),t.getLeft()+f(t))},c,1)},m=function(t,e,n,r){var i=t.getObjects().map(function(t){var n=2*r;return"image"===t.type&&(n=0),e(t)+n});return n(i)},y=function(t,e){var n={top:t.top,left:t.left,width:t.width,height:t.height};switch(t.__corner){case"br":e.x-t.left>=0&&(n.width=e.x-t.left),e.y-t.top>=0&&(n.height=e.y-t.top);break;case"bl":t.oCoords.tr.x>=e.x&&(n.left=e.x,n.width=t.oCoords.tr.x-e.x),e.y>=t.oCoords.tl.y&&(n.height=e.y-t.oCoords.tl.y);break;case"tl":t.oCoords.tr.x>=e.x&&(n.left=e.x,n.width=t.oCoords.tr.x-e.x),t.oCoords.br.y>=e.y&&(n.top=e.y,n.height=t.oCoords.br.y-e.y);break;case"tr":e.x-t.left>=0&&(n.width=e.x-t.left),t.oCoords.br.y>=e.y&&(n.top=e.y,n.height=t.oCoords.br.y-e.y)}return n},b=function(t){var e=45;return Math.floor(t/e)*e},x={getImageDimension:n,getImageHeight:r,getImageWidth:i,getHeight:o,getWidth:a,getLeft:u,getTop:s,getRightPoint:g,getLeftPoint:v,getTopPoint:d,getBottomPoint:p,newDimension:y,roundAngle:b};e["default"]=x},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(97),o=r(i),a=n(98),s=r(a),u=function(t,e){e=e||{};var n=s["default"].defer(),r=new XMLHttpRequest;return r.open("GET",t,!0),r.addEventListener("load",function(t){e.load&&e.load(t);var r=new window.Image;r.src=window.URL.createObjectURL(t.target.response),r.onload=function(){EXIF.getData(r,function(){var t=EXIF.getTag(this,"Orientation");return t?void o["default"](r,t).then(function(e){n.resolve({image:e,orientation:t})}):n.resolve({image:r})})}}),r.addEventListener("progress",function(t){e.progress&&e.progress(t)}),r.responseType="blob",r.send(),n.promise};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(98),o=r(i),a=function(t){var e=function(t){var e={angle:0,translateX:0,translateY:0,width:t.width,height:t.height,originalWidth:t.width,originalHeight:t.height,difference:Math.abs(t.width-t.height),max:_.max([t.height,t.width]),destX:0,destY:0,sourceX:0,sourceY:0};return e.translateX=e.max/2,e.translateY=e.max/2,e},n=_.noop;switch(t){case 3:n=function(t){var n=_.merge(e(t),{angle:Math.PI});return n.originalWidth>n.originalHeight&&(n.destY=n.difference),n};break;case 6:n=function(t){var n=_.merge(e(t),{angle:Math.PI/2,height:t.width,width:t.height});return n.originalHeight<n.originalWidth&&(n.destY=n.difference),n};break;case 8:n=function(t){var n=_.merge(e(t),{angle:-Math.PI/2,height:t.width,width:t.height});return n.originalHeight>n.originalWidth&&(n.destX=n.difference),n}}return n},s=function(t,e){var n=o["default"].defer(),r={height:t.height,width:t.width},i=a(e)(r);if(!i)return n.resolve(t),n.promise;var s=document.createElement("canvas");s.width=i.width,s.height=i.height;var u=i.max,c=s.getContext("2d");return c.drawImage(t,0,0),c.save(),c.clearRect(0,0,u,u),c.translate(u/2,u/2),c.rotate(i.angle),c.translate(-u/2,-u/2),c.drawImage(t,i.sourceX,i.sourceY,i.originalWidth,i.originalHeight,i.destX,i.destY,i.originalWidth,i.originalHeight),c.restore(),n.resolve(s),n.promise};e["default"]=s},function(t,e,n){(function(e,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(e){"use strict";if("function"==typeof bootstrap)bootstrap("promise",e);else{t.exports=e()}}(function(){"use strict";function t(t){return function(){return K.apply(t,arguments)}}function r(t){return t===Object(t)}function i(t){return"[object StopIteration]"===it(t)||t instanceof V}function o(t,e){if(W&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ot)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+ot+"\n");t.stack=a(i)}}function a(t){for(var e=t.split("\n"),n=[],r=0;r<e.length;++r){var i=e[r];c(i)||s(i)||!i||n.push(i)}return n.join("\n")}function s(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function u(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var e=u(t);if(!e)return!1;var n=e[0],r=e[1];return n===z&&r>=Y&&lt>=r}function l(){if(W)try{throw new Error}catch(t){var e=t.stack.split("\n"),n=e[0].indexOf("@")>0?e[1]:e[2],r=u(n);if(!r)return;return z=r[0],r[1]}}function h(t,e,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+n+" instead.",new Error("").stack),t.apply(t,arguments)}}function f(t){return t instanceof g?t:b(t)?P(t):C(t)}function d(){function t(t){e=t,o.source=t,Z(n,function(e,n){f.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=et(d.prototype),o=et(g.prototype);if(o.promiseDispatch=function(t,i,o){var a=J(arguments);n?(n.push(a),"when"===i&&o[1]&&r.push(o[1])):f.nextTick(function(){e.promiseDispatch.apply(e,a)})},o.valueOf=function(){if(n)return o;var t=y(e);return _(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:"pending"}},f.longStackSupport&&W)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}return i.promise=o,i.resolve=function(n){e||t(f(n))},i.fulfill=function(n){e||t(C(n))},i.reject=function(n){e||t(M(n))},i.notify=function(t){e||Z(r,function(e,n){f.nextTick(function(){n(t)})},void 0)},i}function p(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var e=d();try{t(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}return e.promise}function v(t){return p(function(e,n){for(var r=0,i=t.length;i>r;r++)f(t[r]).then(e,n)})}function g(t,e,n){void 0===e&&(e=function(t){return M(new Error("Promise does not support operation: "+t))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=et(g.prototype);if(r.promiseDispatch=function(n,i,o){var a;try{a=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(s){a=M(s)}n&&n(a)},r.inspect=n,n){var i=n();"rejected"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function m(t,e,n,r){return f(t).then(e,n,r)}function y(t){if(_(t)){var e=t.inspect();if("fulfilled"===e.state)return e.value}return t}function _(t){return t instanceof g}function b(t){return r(t)&&"function"==typeof t.then}function x(t){return _(t)&&"pending"===t.inspect().state}function w(t){return!_(t)||"fulfilled"===t.inspect().state}function T(t){return _(t)&&"rejected"===t.inspect().state}function E(){at.length=0,st.length=0,ct||(ct=!0)}function S(t,n){ct&&("object"==typeof e&&"function"==typeof e.emit&&f.nextTick.runAfter(function(){-1!==Q(st,t)&&(e.emit("unhandledRejection",n,t),ut.push(t))}),st.push(t),at.push(n&&"undefined"!=typeof n.stack?n.stack:"(no stack) "+n))}function O(t){if(ct){var n=Q(st,t);-1!==n&&("object"==typeof e&&"function"==typeof e.emit&&f.nextTick.runAfter(function(){var r=Q(ut,t);-1!==r&&(e.emit("rejectionHandled",at[n],t),ut.splice(r,1))}),st.splice(n,1),at.splice(n,1))}}function M(t){var e=g({when:function(e){return e&&O(this),e?e(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return S(e,t),e}function C(t){return g({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},"delete":function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return rt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function P(t){var e=d();return f.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(n){e.reject(n)}}),e.promise}function k(t){return g({isDef:function(){}},function(e,n){return L(t,e,n)},function(){return f(t).inspect()})}function A(t,e,n){return f(t).spread(e,n)}function I(t){return function(){function e(t,e){var a;if("undefined"==typeof StopIteration){try{a=n[t](e)}catch(s){return M(s)}return a.done?f(a.value):m(a.value,r,o)}try{a=n[t](e)}catch(s){return i(s)?f(s.value):M(s)}return m(a,r,o)}var n=t.apply(this,arguments),r=e.bind(e,"next"),o=e.bind(e,"throw");return r()}}function R(t){f.done(f.async(t)())}function D(t){throw new V(t)}function j(t){return function(){return A([this,N(arguments)],function(e,n){return t.apply(e,n)})}}function L(t,e,n){return f(t).dispatch(e,n)}function N(t){return m(t,function(t){var e=0,n=d();return Z(t,function(r,i,o){var a;_(i)&&"fulfilled"===(a=i.inspect()).state?t[o]=a.value:(++e,m(i,function(r){t[o]=r,0===--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function F(t){if(0===t.length)return f.resolve();var e=f.defer(),n=0;return Z(t,function(r,i,o){function a(t){e.resolve(t)}function s(){n--,0===n&&e.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(t){e.notify({index:o,value:t})}var c=t[o];n++,m(c,a,s,u)},void 0),e.promise}function U(t){return m(t,function(t){return t=tt(t,f),m(N(tt(t,function(t){return m(t,$,$)})),function(){return t})})}function B(t){return f(t).allSettled()}function X(t,e){return f(t).then(void 0,void 0,e)}function H(t,e){return f(t).nodeify(e)}var W=!1;try{throw new Error}catch(G){W=!!G.stack}var z,V,Y=l(),$=function(){},q=function(){function t(){for(var t,e;i.next;)i=i.next,t=i.task,i.task=void 0,e=i.domain,e&&(i.domain=void 0,e.enter()),r(t,e);for(;c.length;)t=c.pop(),r(t);a=!1}function r(e,n){try{e()}catch(r){if(u)throw n&&n.exit(),setTimeout(t,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var i={task:void 0,next:null},o=i,a=!1,s=void 0,u=!1,c=[];if(q=function(t){o=o.next={task:t,domain:u&&e.domain,next:null},a||(a=!0,s())},"object"==typeof e&&"[object process]"===e.toString()&&e.nextTick)u=!0,s=function(){e.nextTick(t)};else if("function"==typeof n)s="undefined"!=typeof window?n.bind(window,t):function(){n(t)};else if("undefined"!=typeof MessageChannel){var l=new MessageChannel;l.port1.onmessage=function(){s=h,l.port1.onmessage=t,t()};var h=function(){l.port2.postMessage(0)};s=function(){setTimeout(t,0),h()}}else s=function(){setTimeout(t,0)};return q.runAfter=function(t){c.push(t),a||(a=!0,s())},q}(),K=Function.call,J=t(Array.prototype.slice),Z=t(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;r>n;n++)n in this&&(e=t(e,this[n],n));return e}),Q=t(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),tt=t(Array.prototype.map||function(t,e){var n=this,r=[];return Z(n,function(i,o,a){r.push(t.call(e,o,a,n))},void 0),r}),et=Object.create||function(t){function e(){}return e.prototype=t,new e},nt=t(Object.prototype.hasOwnProperty),rt=Object.keys||function(t){var e=[];for(var n in t)nt(t,n)&&e.push(n);return e},it=t(Object.prototype.toString);V="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var ot="From previous event:";f.resolve=f,f.nextTick=q,f.longStackSupport=!1,"object"==typeof e&&e&&e.env&&e.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=d,d.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):t.resolve(arguments.length>2?J(arguments,1):n)}},f.Promise=p,f.promise=p,p.race=v,p.all=N,p.reject=M,p.resolve=f,f.passByCopy=function(t){return t},g.prototype.passByCopy=function(){return this},f.join=function(t,e){return f(t).join(e)},g.prototype.join=function(t){return f([this,t]).spread(function(t,e){if(t===e)return t;throw new Error("Can't join: not the same: "+t+" "+e)})},f.race=v,g.prototype.race=function(){return this.then(f.race)},f.makePromise=g,g.prototype.toString=function(){return"[object Promise]"},g.prototype.then=function(t,e,n){function r(e){try{return"function"==typeof t?t(e):e}catch(n){return M(n)}}function i(t){if("function"==typeof e){o(t,s);try{return e(t)}catch(n){return M(n)}}return M(t)}function a(t){return"function"==typeof n?n(t):t}var s=this,u=d(),c=!1;return f.nextTick(function(){s.promiseDispatch(function(t){c||(c=!0,u.resolve(r(t)))},"when",[function(t){c||(c=!0,u.resolve(i(t)))}])}),s.promiseDispatch(void 0,"when",[void 0,function(t){var e,n=!1;try{e=a(t)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||u.notify(e)}]),u.promise},f.tap=function(t,e){return f(t).tap(e)},g.prototype.tap=function(t){return t=f(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},f.when=m,g.prototype.thenResolve=function(t){return this.then(function(){return t})},f.thenResolve=function(t,e){return f(t).thenResolve(e)},g.prototype.thenReject=function(t){return this.then(function(){throw t})},f.thenReject=function(t,e){return f(t).thenReject(e)},f.nearer=y,f.isPromise=_,f.isPromiseAlike=b,f.isPending=x,g.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=w,g.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=T,g.prototype.isRejected=function(){return"rejected"===this.inspect().state};var at=[],st=[],ut=[],ct=!0;f.resetUnhandledRejections=E,f.getUnhandledReasons=function(){return at.slice()},f.stopUnhandledRejectionTracking=function(){E(),ct=!1},E(),f.reject=M,f.fulfill=C,f.master=k,f.spread=A,g.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},f.async=I,f.spawn=R,f["return"]=D,f.promised=j,f.dispatch=L,g.prototype.dispatch=function(t,e){var n=this,r=d();return f.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},f.get=function(t,e){return f(t).dispatch("get",[e])},g.prototype.get=function(t){return this.dispatch("get",[t])},f.set=function(t,e,n){return f(t).dispatch("set",[e,n])},g.prototype.set=function(t,e){return this.dispatch("set",[t,e])},f.del=f["delete"]=function(t,e){return f(t).dispatch("delete",[e])},g.prototype.del=g.prototype["delete"]=function(t){return this.dispatch("delete",[t])},f.mapply=f.post=function(t,e,n){return f(t).dispatch("post",[e,n])},g.prototype.mapply=g.prototype.post=function(t,e){return this.dispatch("post",[t,e])},f.send=f.mcall=f.invoke=function(t,e){return f(t).dispatch("post",[e,J(arguments,2)])},g.prototype.send=g.prototype.mcall=g.prototype.invoke=function(t){return this.dispatch("post",[t,J(arguments,1)])},f.fapply=function(t,e){return f(t).dispatch("apply",[void 0,e])},g.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},f["try"]=f.fcall=function(t){return f(t).dispatch("apply",[void 0,J(arguments,1)])},g.prototype.fcall=function(){return this.dispatch("apply",[void 0,J(arguments)])},f.fbind=function(t){var e=f(t),n=J(arguments,1);return function(){return e.dispatch("apply",[this,n.concat(J(arguments))])}},g.prototype.fbind=function(){var t=this,e=J(arguments);return function(){return t.dispatch("apply",[this,e.concat(J(arguments))])}},f.keys=function(t){return f(t).dispatch("keys",[])},g.prototype.keys=function(){return this.dispatch("keys",[])},f.all=N,g.prototype.all=function(){return N(this)},f.any=F,g.prototype.any=function(){return F(this)},f.allResolved=h(U,"allResolved","allSettled"),g.prototype.allResolved=function(){return U(this)},f.allSettled=B,g.prototype.allSettled=function(){return this.then(function(t){return N(tt(t,function(t){function e(){return t.inspect()}return t=f(t),t.then(e,e)}))})},f.fail=f["catch"]=function(t,e){return f(t).then(void 0,e)},g.prototype.fail=g.prototype["catch"]=function(t){return this.then(void 0,t)},f.progress=X,g.prototype.progress=function(t){return this.then(void 0,void 0,t)},f.fin=f["finally"]=function(t,e){return f(t)["finally"](e)},g.prototype.fin=g.prototype["finally"]=function(t){return t=f(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},f.done=function(t,e,n,r){return f(t).done(e,n,r)},g.prototype.done=function(t,n,r){var i=function(t){f.nextTick(function(){if(o(t,a),!f.onerror)throw t;f.onerror(t)})},a=t||n||r?this.then(t,n,r):this;"object"==typeof e&&e&&e.domain&&(i=e.domain.bind(i)),a.then(void 0,i)},f.timeout=function(t,e,n){return f(t).timeout(e,n)},g.prototype.timeout=function(t,e){var n=d(),r=setTimeout(function(){e&&"string"!=typeof e||(e=new Error(e||"Timed out after "+t+" ms"),e.code="ETIMEDOUT"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},f.delay=function(t,e){return void 0===e&&(e=t,t=void 0),f(t).delay(e)},g.prototype.delay=function(t){return this.then(function(e){var n=d();return setTimeout(function(){n.resolve(e)},t),n.promise})},f.nfapply=function(t,e){return f(t).nfapply(e)},g.prototype.nfapply=function(t){var e=d(),n=J(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},f.nfcall=function(t){var e=J(arguments,1);return f(t).nfapply(e)},g.prototype.nfcall=function(){var t=J(arguments),e=d();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},f.nfbind=f.denodeify=function(t){var e=J(arguments,1);return function(){var n=e.concat(J(arguments)),r=d();return n.push(r.makeNodeResolver()),f(t).fapply(n).fail(r.reject),r.promise}},g.prototype.nfbind=g.prototype.denodeify=function(){var t=J(arguments);return t.unshift(this),f.denodeify.apply(void 0,t)},f.nbind=function(t,e){var n=J(arguments,2);return function(){function r(){return t.apply(e,arguments)}var i=n.concat(J(arguments)),o=d();return i.push(o.makeNodeResolver()),f(r).fapply(i).fail(o.reject),o.promise}},g.prototype.nbind=function(){var t=J(arguments,0);return t.unshift(this),f.nbind.apply(void 0,t)},f.nmapply=f.npost=function(t,e,n){return f(t).npost(e,n)},g.prototype.nmapply=g.prototype.npost=function(t,e){var n=J(e||[]),r=d();return n.push(r.makeNodeResolver()),this.dispatch("post",[t,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(t,e){var n=J(arguments,2),r=d();return n.push(r.makeNodeResolver()),f(t).dispatch("post",[e,n]).fail(r.reject),r.promise},g.prototype.nsend=g.prototype.nmcall=g.prototype.ninvoke=function(t){var e=J(arguments,1),n=d();return e.push(n.makeNodeResolver()),this.dispatch("post",[t,e]).fail(n.reject),n.promise},f.nodeify=H,g.prototype.nodeify=function(t){return t?void this.then(function(e){f.nextTick(function(){t(null,e)})},function(e){f.nextTick(function(){t(e)})}):this},f.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var lt=l();return f})}).call(e,n(99),n(100).setImmediate)},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){v&&d&&(v=!1,d.length?p=d.concat(p):g=-1,p.length&&s())}function s(){if(!v){var t=i(a);v=!0;for(var e=p.length;e;){for(d=p,p=[];++g<e;)d&&d[g].run();g=-1,e=p.length}d=null,v=!1,o(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var d,p=[],v=!1,g=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];p.push(new u(t,e)),1!==p.length||v||i(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var i="undefined"!=typeof t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(101),e.setImmediate="undefined"!=typeof self&&self.setImmediate||"undefined"!=typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||"undefined"!=typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(e,function(){return this}())},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[p]=r,d(p),p++}function i(t){delete v[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(g)setTimeout(a,0,t);else{var e=v[t];if(e){g=!0;try{o(e)}finally{i(t),g=!1}}}}function s(){d=function(t){e.nextTick(function(){a(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(n){t.postMessage(e+n,"*")}}function l(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},d=function(e){t.port2.postMessage(e)}}function h(){var t=m.documentElement;d=function(e){var n=m.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function f(){d=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var d,p=1,v={},g=!1,m=t.document,y=Object.getPrototypeOf&&Object.getPrototypeOf(t);y=y&&y.setTimeout?y:t,"[object process]"==={}.toString.call(t.process)?s():u()?c():t.MessageChannel?l():m&&"onreadystatechange"in m.createElement("script")?h():f(),y.setImmediate=r,y.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(99))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r){o["default"](this,t),this.slug=e,this.canvas=n.canvas,this.commands=n.commands,this.storage=r,this.KEY_NAME="last_annotations"}return s["default"](t,[{key:"hasData",value:function(){var t=this.getStoredObjects(!1);return t?t.slug!==this.slug||moment(t.created_at)<moment().add(-10,"minute")?(this.removeStoredState(),!1):!0:!1}},{key:"restoreChanges",value:function(){var t=this,e=this.getStoredObjects(),n=e.data,r=n.filter(function(t){return"blur"===t.type}),i=n.filter(function(t){return-1===r.indexOf(t)});return this.applyPaths(i).then(function(){return t.applyBlur(r)}).then(function(){return t.removeStoredState})}},{key:"applyChanges",value:function(t,e){var n=this;return this.applyPaths(t).then(function(){return n.applyBlur(e)})}},{key:"removeStoredState",value:function(){this.storage.remove(this.KEY_NAME)}},{key:"applyPaths",value:function(t){var e=this,n=new Promise(function(n,r){try{fabric.util.enlivenObjects(t,function(t){var r=e.canvas.renderOnAddRemove;e.canvas.renderOnAddRemove=!1,t.forEach(function(t){e.canvas.add(t)}),e.canvas.renderOnAddRemove=r,e.canvas.renderAll(),n(e)})}catch(i){r(i)}});return n}},{key:"applyBlur",value:function(t){var e=this,n=t.map(function(t){return e.commands.addBlur(t.rect)});return Promise.all(n)}},{key:"getStoredObjects",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!0;try{var e=this.storage.fetch(this.KEY_NAME);if(!e)return null;var n=JSON.parse(e);return t&&this.removeStoredState(),n}catch(r){return null}}},{key:"storeChanges",value:function(){try{var t=this.canvas.toJSON(["rect","subType"]).objects,e=t.filter(function(t){return"image"===t.type&&"blur"===t.subType}).map(function(t){return{type:t.subType,rect:t.rect}}),n=t.filter(function(t){return"image"!==t.type}),r=n.concat(e);this.storage.store(this.KEY_NAME,JSON.stringify({slug:this.slug,data:r,created_at:moment().toDate()}))}catch(i){return}}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n,r,i,o,s,c){"ngInject";return function(n){return this.save=function(t){var e=this;this.messageResolved=!1;var n;return this.getImage().then(function(t){return n=t,e.prepareUpload()}).then(function(t){return e.uploadImage(n,t)}).then(function(e){t(e)},function(){t(!1)})},this.getImage=function(){var r=e.defer();return u["default"].defer(function(){var e=n.drawing,i=n.drawing.canvas;t("#canvas").css("display","none"),i.discardActiveObject(),e.commands._blurCancel();var o=(i.height-a["default"].getImageHeight(e.Image))/2,u=(i.width-a["default"].getImageWidth(e.Image))/2,c=a["default"].getTopPoint(i),l=a["default"].getBottomPoint(i)-c,h=a["default"].getLeftPoint(i),f=a["default"].getRightPoint(i)-h,d=a["default"].getImageWidth(e.Image)/a["default"].getImageWidth(e.originalImage,!0),p=a["default"].getImageHeight(e.Image)/a["default"].getImageHeight(e.originalImage,!0),v=function(t,e,n){void 0===n&&(n=.001);var r=Math.floor(e/n)*n;return n>=Math.abs(t-r)},g=[],m=function(t){g.push(function(){return t(),!0})};i.discardActiveObject(),i.remove(e.Image);var y=!0;v(1,d)&&v(1,p)?(d=1,p=1,y=!1):(m(function(t){i.setWidth(t)}.bind(this,i.width)),m(function(t){i.setHeight(t)}.bind(this,i.height)),i.setWidth(i.width/d),i.setHeight(i.height/p),_.each(i.getObjects(),function(t){m(function(e){t.setScaleX(e)}.bind(this,t.scaleX)),m(function(e){t.setScaleY(e)}.bind(this,t.scaleY)),m(function(e){t.setLeft(e)}.bind(this,t.getLeft())),m(function(e){t.setTop(e)}.bind(this,t.getTop())),t.setScaleX(t.scaleX/d),t.setScaleY(t.scaleY/p),t.setLeft(h+(t.getLeft()-h)/d),t.setTop(c+(t.getTop()-c)/p)})),i.renderAll();var b=document.createElement("canvas");b.width=Math.round((f-1)/d),b.height=Math.round((l-1)/p);var x=new s.StaticCanvas(b);new s.Image.fromURL(i.toDataURL({top:c,left:h,width:f/d,height:l/p}),function(n){for(x.add(e.originalImage),e.originalImage.left=Math.round((u-h)/d),e.originalImage.top=Math.round((o-c)/p),x.add(n),n.width=f/d,n.height=l/p,n.center(),r.resolve(x.toDataURL({format:"png"}));(g.shift()||_.noop)(););i.add(e.Image),e.Image.center(),e.Image.sendToBack(),t("#canvas").css("display","block")})}),r.promise},this.prepareUpload=function(){var t=e.defer();return i.annotationsSave().then(function(e){0===u["default"].get(e.data,"uploads_remaining")?(c.send({text:"You've reached the upload limit allowed by the Free plan.",type:"danger",timeout:3e3}),t.reject()):t.resolve(e.data)},function(){t.reject()}),t.promise},this.uploadImage=function(n,r){var a=e.defer();this.uploadPromise=a;var s={file:n,url:r.url,params:r.params,event:"file",fileName:i.data.file_name,slug:r.slug,parent_slug:i.slug()};return t("#add_file_frame")[0].contentWindow.postMessage(JSON.stringify(s),o.schema+"://s3.amazonaws.com"),a.promise},this.onMessage=function(t){var e=JSON.parse(t.data),n=this.uploadPromise;"uploaded"===e.event&&(this.messageResolved=!0,i.saveImage({bucket:e.bucket,key:e.key,slug:e.slug,parent_slug:e.parent_slug,format:"json"}).then(function(t){n.resolve(t.data)},function(){n.reject()})),"complete"===e.event&&(this.messageResolved||n.reject())},this}}i.$inject=["$","$q","$window","$timeout","itemService","config","fabric","flashMessagesService"],Object.defineProperty(e,"__esModule",{value:!0});var o=n(95),a=r(o),s=n(27),u=r(s);e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(105),o=r(i),a=n(27),s=r(a),u=function(t,e,n,r,i,a,u){"ngInject";var c=this;c.item=n,c.privacy={},c.privacy.expiration={},c.getValue=function(){return"password"===c.privacy.current_option?s["default"].pick(c.privacy,["password"]):s["default"].pick(c.privacy,["users","notify"])},n.getPrivacy().then(function(){c.privacy=angular.copy(c.item.privacy),"password"!==c.privacy.current_option&&(c.passwordInput=!0)}),c.viewsLeft=function(){return c.item.details.expires_after_views-n.data.view_counter},c.getLastExpire=function(){return r.fetch("last_expire_choice")},c.getLastExpireMessage=function(){var t=c.getLastExpire();if(t){var e=t.split("/"),n=o["default"](e,2),r=n[0],i=n[1],a=r?u.duration(Number(r),"seconds").humanize(!0):"",s=i?"after "+String(i)+" view"+(Number(i)>1?"s":""):"";return a+(r&&i?" or ":" ")+s}return""},c.advanced=function(){var t=c.privacy.advancedExpiration;t.period=function(){return Number(t.expirePeriodCount)*Number(t.expirePeriod)},t.numberOfSeconds=function(){return t.time?t.period():""},t.expiresAt=function(){return t.time?u().add(t.period(),"seconds"):""},t.when=function(){return u().add(t.period(),"seconds")}},c.invalid=function(){return c.privacyForm.$invalid},c.updateExpiration=function(t){if("advanced"===t)c.privacy.showAdvanced=!0,c.privacy.advancedExpiration={expirePeriodCount:1,expiresAfterViews:1,expirePeriod:"3600",time:!0,views:!0,period:3600,when:function(){return u().add(3600,"seconds")}},c.advanced();else if(t){c.privacy.showAdvanced=!1;var e=t.split("/"),n=o["default"](e,2),r=n[0],i=n[1];c.privacy.expiration={expires_at:0===r?"":u().add(r,"seconds"),expires_after_views:i}}},c.removeExpiration=function(){c.privacy.expiration={},$(".js-expiration-on").addClass("ng-hide"),$(".js-expiration-off").removeClass("ng-hide")},c.save=function(){if(c.selected={option:c.privacy.current_option,value:c.getValue(c.privacy)},a.$broadcast("show-errors-check-validity"),c.privacy.showAdvanced){var e=c.privacy.advancedExpiration;c.advanced(),c.selected.expiration={expires_at:e.expiresAt(),expires_after_views:e.views?e.expiresAfterViews:""},e.remember&&r.store("last_expire_choice",e.numberOfSeconds()+"/"+(e.views?e.expiresAfterViews:""))}else c.selected.expiration=c.privacy.expiration;n.setPrivacy(c.selected).then(function(){c.item.getDetails(),t.close()})},c.cancel=function(){t.dismiss("close")}};u.$inject=["$uibModalInstance","Api","itemService","storageService","$uibModal","$scope","moment"],e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(106),o=r(i),a=n(110),s=r(a);e["default"]=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=s["default"](t);!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(c){i=!0,o=c}finally{try{!r&&u["return"]&&u["return"]()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(o["default"](Object(e)))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(t,e,n){t.exports={"default":n(107),__esModule:!0}},function(t,e,n){n(67),n(39),t.exports=n(108)},function(t,e,n){var r=n(109),i=n(64)("iterator"),o=n(46);t.exports=n(13).isIterable=function(t){var e=Object(t);return void 0!==e[i]||"@@iterator"in e||o.hasOwnProperty(r(e))}},function(t,e,n){var r=n(54),i=n(64)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(s=r(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e,n){t.exports={"default":n(111),__esModule:!0}},function(t,e,n){n(67),n(39),t.exports=n(112)},function(t,e,n){var r=n(18),i=n(113);t.exports=n(13).getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}},function(t,e,n){var r=n(109),i=n(64)("iterator"),o=n(46);t.exports=n(13).getIteratorMethod=function(t){return void 0!=t?t[i]||t["@@iterator"]||o[r(t)]:void 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r,i,a,s,u){"ngInject";var c=this;o["default"](this,t),this._Api=n,this._urlService=i,this._sourceService=s,this._$window=u,this.user={email:"",password:"",accept_tos:!0},this.errors=[],this.confirmation=!1,this.itemService=a,this.resetUrl=i.resetPassword(),this.termsUrl=i.terms(),this.downloadAppUrl=i.downloadAppUrl(),this.setupCloudappUrl=i.setupCloudappUrl(),e.$on("modal.closing",function(){"confirmation"===c.action&&c.signIn()})}return t.$inject=["$scope","Api","config","urlService","itemService","sourceService","$window"],s["default"](t,[{key:"annotateStorage",value:function(){return _.get(this.itemService,"annotations.annotationsStorage")}},{key:"changed",value:function(){this.errors=[]}},{key:"paramsWithReferrer",value:function(){return Object.assign(this.params||{},this._sourceService.sourceDirectOrOrganic())}},{key:"signIn",value:function(){var t=this;this._Api.signIn(this.user,this.paramsWithReferrer()).success(function(){t.callback({action:"signIn",success:!0})}).error(function(e){t.errors=_.flatten(_.values(e.errors))})}},{key:"signUp",value:function(){var t=this;this._Api.signUp(this.user,this.paramsWithReferrer()).success(function(){t.confirmation=!0,t.callback({action:"confirmation"})}).error(function(e){angular.equals(e,["This email has been taken."])?t.signIn(t.user):t.errors=e})}},{key:"google",value:function(){this.storeAnnotations(),this.confirmation=!0,this.callback({action:"confirmation"}),this.callback({action:"googleSignIn"}),this._$window.location.href=this._urlService.oauthUrl("google_oauth2",{tracking_params:this.paramsWithReferrer()})}},{key:"sso",value:function(){this.storeAnnotations(),this._$window.location.href=this._urlService.ssoUrl()}},{key:"storeAnnotations",value:function(){var t=this.annotateStorage();t&&t.storeChanges()}}]),t}();e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,r,i,o,a){"ngInject";var s=this;s.action=i,s.params=o,s.success_callback=a,s.close=function(){t.close()},s.callback=function(e,i){return i&&!e?void(s.action=i):void(e&&s.success_callback?(s.success_callback(),t.close()):e&&(r.reset(),n.getItem(),n.getDetails(),t.close()))}};n.$inject=["$uibModalInstance","Api","itemService","abilityService","action","params","success_callback"],
e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){"ngInject";var n=this;n.item=e,e.getPrivacy(),n.share={users:[]},n.item=e,n.save=function(){n.share.restricted&&e.setPrivacy({restricted:!0,users:_.union(n.share.users,n.item.privacy.users)}),e.share({recipients:n.share.users,message:n.share.message}),t.close()},n.invalid=function(){return _.isEmpty(n.share.users)||n.shareForm.$invalid},n.cancel=function(){t.dismiss("close")}};n.$inject=["$uibModalInstance","itemService"],e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,r){"ngInject";var i=this;i.flag={reason:"DMCA"},i.save=function(){return r.$broadcast("show-errors-check-validity"),i.flagForm.$invalid?!1:(i.flag=_.mapValues(i.flag,function(t){return String(t)}),void e.setFlag(i).then(function(){n.arrayPush("flags",e.slug()),t.close()}))},i.cancel=function(){t.dismiss("close")}};n.$inject=["$uibModalInstance","itemService","storageService","$scope"],e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n,r){"ngInject";var i=this;i.item=e,i.embed={},i.notitle=!1,i.nobranding=!1,e.getEmbed().then(function(){i.embed=angular.copy(i.item.embed),i.current=i.embed.embed_html_js,i.currentWithOptions=i.current,i.type="js",i.trustedPreview=r.trustAsHtml(i.embed.embed_preview)}),n(function(){var t=document.querySelector(".embed-modal input");t.focus()});var o=function(t,e){if(i[t]){if(/iframe/.test(e)){var n=i.item.slug();return e.replace("?","&").replace(n,n+"?"+t+"=1")}if(/cloudapp-embed/.test(e))return e.slice(0,4)+" "+t+e.slice(4)}return e},a=function(t){return o("nobranding",o("notitle",t))};i.changeType=function(t){i.type=t,i.updateCurrent()},i.updateCurrent=function(){i.currentWithOptions=a(i.current),i.trustedPreview=r.trustAsHtml(a("html"===i.type?i.embed.embed_html:i.embed.embed_preview))}};n.$inject=["$uibModalInstance","itemService","$timeout","$sce"],e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=function l(){"ngInject";s["default"](this,l);var t={restrict:"E",templateUrl:"app/unauthorized/unauthorized.html",controller:c,controllerAs:"vm",bindToController:!0};return t},c=function(){function t(e,n){"ngInject";s["default"](this,t),this.ability=n,this.item=e,e.showAccessRequest(),this.passwordForm={password:"",submit:function(){e.setLocalPassword(this.password),e.getItem(),e.getDetails().then(function(t){t&&$("body").not(".theme-set").toggleClass("dark","dark"===t.theme)})}}}return t.$inject=["itemService","abilityService"],o["default"](t,[{key:"action",value:function(){var t=this.item.access;if(t)return t.access_required&&!t.has_session?"login":t.access_required&&!t.has_access?"access":t.password_required&&!t.has_valid_password?"password":(t.has_valid_remote_addr,"not_available")}},{key:"loginCallback",value:function(){this.item.getItem(),this.item.getDetails().then(function(t){t&&$("body").not(".theme-set").toggleClass("dark","dark"===t.theme)})}},{key:"createPasswordRequest",value:function(){this.item.createAccessRequest({request_type:"password"})}},{key:"createAccessRequest",value:function(){var t=this.item;this.item.createAccessRequest({request_type:"access"}).then(function(){t.showAccessRequest()})}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r,i){"ngInject";o["default"](this,t),this.abilityService=n,this.analyticsService=r,this.itemService=i,this.initOuibounce()}return t.$inject=["$scope","abilityService","analyticsService","itemService"],s["default"](t,[{key:"close",value:function(){$("#ouibounce-modal").hide()}},{key:"cookieExpire",value:function(){return"not_logged_in"===this.userType()?1:2}},{key:"initOuibounce",value:function(){var t=this;ouibounce($("#ouibounce-modal")[0],{cookieExpire:this.cookieExpire(),timer:0,callback:function(){return $(".modal-dialog").length?void $("#ouibounce-modal").hide():(t.analyticsService.track("Ouibounce Modal Opened",{source_referral:"viewer_ouibounce"}),void(window.dataLayer&&window.dataLayer.push({event:"OuibounceShown",ouibounceUserType:t.userType()})))}}),$("#ouibounce-modal .modal").on("click",function(t){t.stopPropagation()}),$("body").on("click",function(){t.close()}),window.dataLayer&&(window.dataLayer.push({ouibounceUserType:this.userType()}),window.dataLayer.push({event:"optimize.activate"}))}},{key:"ouibounceCallback",value:function(t){t&&(this.abilityService.reset(),this.itemService.getItem(),this.itemService.getDetails())}},{key:"userType",value:function(){return"login"===this.action?"not_logged_in":"guest_free"}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function s(t){"ngInject";o["default"](this,s),this.url=t};a.$inject=["urlService"],e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(123),c=r(u),l=n(27),h=r(l),f=function(){function t(e,n,r,i,a,s,u,c,l,f,d,p,v){"ngInject";o["default"](this,t),this.slug=function(){return i.current.params.slug},this._Api=e,this._userService=n,this._storageService=c,this._mimeTypeService=u,this._pusherService=r,this._commentService=a.setItem(this.slug()),this._$cookies=p,s.setItem(this.slug()),this._$log=l,this._config=f,this._moment=d,this._$timeout=v,this.expire_period="0",this.state="empty",this.annotationsSave=function(){return h["default"].get(this.data,"owner_id")===n.getId()?this.editImage():this.newImage()},this.state="empty"}return t.$inject=["Api","userService","pusherService","$route","commentService","eventService","mimeTypeService","storageService","$log","config","moment","$cookies","$timeout"],s["default"](t,[{key:"commentCount",value:function(){return this._commentService.count}},{key:"getEmbed",value:function(){var t=this;return this._Api.getEmbed(this.slug()).then(function(e){return t.embed=e,t.embed})}},{key:"getDetails",value:function(){var t=this;return"pending"===this.state?this._$timeout(function(){t.getDetails()},1e3):this._Api.getDetails(this.slug()).then(function(e){return t.details=e.details,t.details})}},{key:"lazyGetItem",value:function(){return this.data?void 0:this.getItem()}},{key:"viewItem",value:function(){var t=this,e=function(){var e=!t._storageService.arrayHas("views",t.slug());return e&&t._storageService.arrayPush("views",t.slug()),t._Api.viewItem(t.slug(),{format:"json",user_id:t._userService.getId(),event:e})};return this._userService.getter.then(e,e)}},{key:"viewItemShare",value:function(t){return this._Api.viewItemShare(this.slug(),t)}},{key:"getItem",value:function(){var t=this;"pending"!==this.state&&(this.state="empty"),this._Api.setHeaders(this);var e=this._mimeTypeService;return this._Api.getItem(this.slug()).then(function(n){var r=n.item;if(!r||!r.source_url||r.pending)return t.state="pending",t._$timeout(function(){t.getItem(),t.getDetails()},1e3);t.data=r,t.state="success";var i=c["default"](r.updated_at).toString().substr(0,8);return t.data.latest_source_url=r.source_url,r.source_url&&-1===r.source_url.indexOf("X-Amz")&&(t.data.latest_source_url+=-1===r.source_url.indexOf("?")?"?v="+i:"&v="+i),r&&(t.data.type=e.getType(t)),"other"===t.data.type&&t._$log.debug(r.mimetype),r},function(e){switch(e.status){case 401:t.state="unauthorized";break;case 403:t.state="unauthorized";break;case 404:t.state="not_found";break;default:t.state="error"}return e})}},{key:"getFavorite",value:function(){void 0===this.data.favorite&&this.eagerGetFavorite()}},{key:"getPrivacy",value:function(){var t=this,e=this._Api.getPrivacy(this.slug());return e.then(function(e){return t.privacy=e}),e}},{key:"getRelated",value:function(){var t=this,e=this._Api.getRelatedUrl(this.slug());return e.then(function(e){e&&e.url&&t._Api.getRelated(e.url).then(function(e){t.related=e})}),e}},{key:"setExpiration",value:function(t,e){var n=this,r=t?this._moment().unix()+t:"",i=e||"";return this._Api.setExpiration(this.slug(),{expires_at:r,expires_after_views:i}).then(function(){n.getDetails()})}},{key:"setPrivacy",value:function(t){var e=this,n=this._Api.setPrivacy(this.slug(),t);return n.then(function(t){return e.privacy=t.privacy}),n}},{key:"share",value:function(t){var e=this,n=this._Api.share(this.slug(),t);return n.then(function(t){return e.privacy=t.privacy}),n}},{key:"setFlag",value:function(t){var e=this,n=this._Api.setFlag(this.slug(),t.flag);return n.then(function(){return e.flag=!0}),n}},{key:"eagerGetFavorite",value:function(){var t=this;this._Api.getFavorite(this.slug()).then(function(e){return t.favorite=e.favorite})}},{key:"toggleFavorite",value:function(){var t=this,e=this.favorite?"false":"true";this._Api.setFavorite(this.slug(),e).then(function(){return t.favorite=!t.favorite})}},{key:"editImage",value:function(){return this._Api.editImage(this.slug())}},{key:"newImage",value:function(){return this._Api.newImage(this.slug())}},{key:"saveImage",value:function(t){return this._Api.saveImage(this.slug(),t)}},{key:"enablePusher",value:function(){this._pusherService.setup(this.slug())}},{key:"isRestricted",value:function(){return this.details&&(this.details.restricted||this.details.password)}},{key:"isExpiring",value:function(){return this.details&&(this.details.expires_at||this.details.expires_after_views)}},{key:"thumbnail",value:function(t){return"//"+this._config.thumbnails+"/"+this.slug()+"/"+t||"h200"}},{key:"showAccessRequest",value:function(){var t=this;return this._Api.showAccessRequest(this.slug()).success(function(e){t.access=e})}},{key:"createAccessRequest",value:function(t){return this._Api.createAccessRequest(this.slug(),t)}},{key:"getLocalPassword",value:function(){var t=this._$cookies.get("secure_"+this.slug());return this._storageService.fetch(c["default"](this.slug()),t)}},{key:"setLocalPassword",value:function(t){this._storageService.store(c["default"](this.slug()),c["default"](t).toString())}},{key:"fileWithoutExtension",value:function(){var t=h["default"].get(this.data,"name").split(".");return t.length<2?h["default"].get(this.data,"name"):(t.pop(),t.join("."))}},{key:"fileExtension",value:function(){var t=h["default"].get(this.data,"name").split(".");return t.length<2?"":t.pop()}}]),t}();e["default"]=f},function(t,e,n){!function(r,i){t.exports=e=i(n(124))}(this,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,s=[],u=[];!function(){function t(t){for(var n=e.sqrt(t),r=2;n>=r;r++)if(!(t%r))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var r=2,i=0;64>i;)t(r)&&(8>i&&(s[i]=n(e.pow(r,.5))),u[i]=n(e.pow(r,1/3)),i++),r++}();var c=[],l=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],h=n[6],f=n[7],d=0;64>d;d++){if(16>d)c[d]=0|t[e+d];else{var p=c[d-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,g=c[d-2],m=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[d]=v+c[d-7]+m+c[d-16]}var y=s&l^~s&h,_=r&i^r&o^i&o,b=(r<<30|r>>>2)^(r<<19|r>>>13)^(r<<10|r>>>22),x=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),w=f+x+y+u[d]+c[d],T=b+_;f=h,h=l,l=s,s=a+w|0,a=o,o=i,i=r,r=w+T|0}n[0]=n[0]+r|0,n[1]=n[1]+i|0,n[2]=n[2]+o|0,n[3]=n[3]+a|0,n[4]=n[4]+s|0,n[5]=n[5]+l|0,n[6]=n[6]+h|0,n[7]=n[7]+f|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;return n[i>>>5]|=128<<24-i%32,n[(i+64>>>9<<4)+14]=e.floor(r/4294967296),n[(i+64>>>9<<4)+15]=r,t.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});n.SHA256=o._createHelper(l),n.HmacSHA256=o._createHmacHelper(l)}(Math),t.SHA256})},function(t,e,n){!function(n,r){t.exports=e=r()}(this,function(){var t=t||function(t,e){var n={},r=n.lib={},i=r.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var n=new t;return e&&n.mixIn(e),n.hasOwnProperty("init")||(n.init=function(){n.$super.init.apply(this,arguments)}),n.init.prototype=n,n.$super=this,n},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=r.WordArray=i.extend({init:function(t,n){t=this.words=t||[],this.sigBytes=n!=e?n:4*t.length},toString:function(t){return(t||s).stringify(this)},concat:function(t){var e=this.words,n=t.words,r=this.sigBytes,i=t.sigBytes;if(this.clamp(),r%4)for(var o=0;i>o;o++){var a=n[o>>>2]>>>24-o%4*8&255;e[r+o>>>2]|=a<<24-(r+o)%4*8}else for(var o=0;i>o;o+=4)e[r+o>>>2]=n[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var n,r=[],i=function(e){var e=e,n=987654321,r=4294967295;return function(){n=36969*(65535&n)+(n>>16)&r,e=18e3*(65535&e)+(e>>16)&r;var i=(n<<16)+e&r;return i/=4294967296,i+=.5,i*(t.random()>.5?1:-1)}},a=0;e>a;a+=4){var s=i(4294967296*(n||t.random()));n=987654071*s(),r.push(4294967296*s()|0)}return new o.init(r,e)}}),a=n.enc={},s=a.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;n>i;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push((o>>>4).toString(16)),r.push((15&o).toString(16))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,e/2)}},u=a.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,r=[],i=0;n>i;i++){var o=e[i>>>2]>>>24-i%4*8&255;r.push(String.fromCharCode(o))}return r.join("")},parse:function(t){for(var e=t.length,n=[],r=0;e>r;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,e)}},c=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},l=r.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=4*a,u=i/s;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*a,l=t.min(4*c,i);if(c){for(var h=0;c>h;h+=a)this._doProcessBlock(r,h);var f=r.splice(0,c);n.sigBytes-=l}return new o.init(f,l)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(r.Hasher=l.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new h.HMAC.init(t,n).finalize(e)}}}),n.algo={});return n}(Math);return t})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r){"ngInject";o["default"](this,t),this._Api=e,this._$cookies=n,this._storageService=r,this.getter=this.get()}return t.$inject=["Api","$cookies","storageService"],s["default"](t,[{key:"get",value:function(){var t=this;return this._Api.getUser().then(function(e){t._user=e.user;var n=t.getId();n&&(t._$cookies.put("user_id",n),t._storageService.store("user_id",n))},function(){t._user={}})}},{key:"isLoggedIn",value:function(){return void 0!==this.getId()}},{key:"getId",value:function(){return(this._user||{}).id}},{key:"getEmail",value:function(){return(this._user||{}).email}},{key:"getRole",value:function(){return(this._user||{}).role}},{key:"getTeam",value:function(){return(this._user||{}).team}},{key:"getSubscription",value:function(){return(this._user||{}).subscription_type}},{key:"isTrial",value:function(){return(this._user||{}).on_trial_plan}},{key:"trialDaysLeft",value:function(){return(this._user||{}).trial_days_left}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(27),c=r(u),l=function(){function t(e){"ngInject";o["default"](this,t),this._$log=e}return t.$inject=["$log"],s["default"](t,[{key:"fetch",value:function(t,e){var n;try{n=localStorage.getItem(t)}catch(r){this._$log.error("Local storage is not supported"),n=null}return null===n?e:"false"===n?!1:"true"===n?!0:n}},{key:"store",value:function(t,e){try{localStorage.setItem(t,e)}catch(n){this._$log.error("Local storage is not supported")}return e}},{key:"arrayHas",value:function(t,e){return c["default"].includes(this._getObject(t,[]),e)}},{key:"_getObject",value:function(t,e){var n,r=this.fetch(t);try{n=JSON.parse(r)}catch(i){n=null}return n||e}},{key:"_setObject",value:function(t,e){this.store(t,JSON.stringify(e))}},{key:"arrayPush",value:function(t,e){this._setObject(t,c["default"].union(this._getObject(t,[]),[e]))}},{key:"remove",value:function(t){localStorage.removeItem(t)}},{key:"isSupported",value:function(){var t="test";try{return localStorage.setItem(t,t),localStorage.removeItem(t),!0}catch(e){return!1}}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r,i){"ngInject";o["default"](this,t),this.$http=e,this.apiBase=n.apiBase,this._$q=i,this.w=function(t){return r.wrap(t)},this.lock()}return t.$inject=["$http","config","loadingService","$q"],s["default"](t,[{key:"withLock",value:function(t){var e=this;return function(n,r,i){var o=e._$q.defer();return e.wait().then(function(){t(n,r,i).then(o.resolve,o.reject)}),o.promise}}},{key:"lock",value:function(){return this.unlock(),this._lock=this._$q.defer(),this._lock}},{key:"unlock",value:function(){this._lock&&(this._lock.resolve(),this._lock=void 0)}},{key:"wait",value:function(){if(this._lock)return this._lock.promise;var t=this._$q.defer();return t.resolve(),t.promise}},{key:"setHeaders",value:function(t){this.$http.defaults.headers.common["Authenticate-Drop-Access"]=t.getLocalPassword(),this.$http.defaults.headers.common["X-Service"]="viewer"}},{key:"url",value:function(t){return this.apiBase+t}},{key:"viewItem",value:function(t,e){return this.$http.post(this.url("/"+t+"/view"),e)}},{key:"viewItemShare",value:function(t,e){return this.$http.put(this.url("/drops/"+t+"/share"),{format:"json",share_token:e})}},{key:"getUser",value:function(){return this.withLock(this.$http.get)(this.url("/v2/user")).then(function(t){return t.data})}},{key:"getTeams",value:function(){return this.$http.get(this.url("/v2/teams")).then(function(t){return t.data})}},{key:"getItem",value:function(t){var e=this,n=this.$http.get(this.url("/v2/items/"+t)).then(function(t){return e.unlock(),t.data});return n.then(function(){},function(){e.unlock()}),n}},{key:"getDetails",value:function(t){return this.withLock(this.$http.get)(this.url("/v2/items/"+t+"/details")).then(function(t){return t.data})}},{key:"getEmbed",value:function(t){return this.$http.get(this.url("/v2/embeds/"+t+"/")).then(function(t){return t.data})}},{key:"getTout",value:function(t){return this.w("getTout")(this.$http.get(this.url("/v2/items/"+t+"/tout"))).then(function(t){return t.data})}},{key:"hideTout",value:function(t){return this.w("hideTout")(this.$http.put(this.url("/v2/items/"+t+"/tout"),{hide:!0})).then(function(t){return t.data})}},{key:"getRelatedUrl",value:function(t){return this.w("getRelatedUrl")(this.$http.post(this.url("/v2/items/"+t+"/related"))).then(function(t){return t.data})}},{key:"getRelated",value:function(t){return this.$http.get(t,{withCredentials:!1}).then(function(t){return t.data})}},{key:"getAbilities",value:function(t){return this.withLock(this.$http.get)(this.url("/v2/items/"+t+"/abilities")).then(function(t){return t.data})}},{key:"getEvents",value:function(t,e){return this.w("getEvents")(this.$http.get(this.url("/drops/"+t+"/events"),{params:e})).then(function(t){return t.data})}},{key:"getPusherStream",value:function(t){return this.$http.get(this.url("/pusher/"+t+"/stream")).then(function(t){return t.data})}},{key:"createComment",value:function(t,e){return this.w("createComment")(this.$http.post(this.url("/v2/items/"+t+"/comments"),e)).then(function(t){return t.data})}},{key:"destroyComment",value:function(t,e){return this.w("destroyComment")(this.$http["delete"](this.url("/v2/items/"+t+"/comments/"+e))).then(function(t){return t.data})}},{key:"getComments",value:function(t,e){return this.w("getComments")(this.$http.get(this.url("/v2/items/"+t+"/comments"),{params:e})).then(function(t){return t.data})}},{key:"getFavorite",value:function(t){return this.$http.get(this.url("/drops/"+t+"/favorite")).then(function(t){return t.data})}},{key:"setFlag",value:function(t,e){return this.w("setFlag")(this.$http.post(this.url("/"+t+"/flag"),e)).then(function(t){return t.data})}},{key:"setFavorite",value:function(t,e){return this.$http.post(this.url("/drops/"+t+"/favorite"),{favorite:e}).then(function(t){return t.data})}},{key:"getPrivacy",value:function(t){return this.w("getPrivacy")(this.$http.get(this.url("/v2/items/"+t+"/security"))).then(function(t){return t.data})}},{key:"setPrivacy",value:function(t,e){return this.w("setPrivacy")(this.$http.put(this.url("/v2/items/"+t+"/security"),e)).then(function(t){return t.data})}},{key:"setExpiration",value:function(t,e){return this.w("expire")(this.$http.post(this.url("/drops/"+t+"/expire"),e)).then(function(t){return t.data})}},{key:"share",value:function(t,e){return this.w("share")(this.$http.post(this.url("/drops/"+t+"/share"),e)).then(function(t){return t.data})}},{key:"editImage",value:function(t){return this.$http.get(this.url("/annotations/"+t+"/edit"),{params:{response:"created",format:"json"}})}},{key:"newImage",value:function(){return this.$http.get(this.url("/annotations/new"),{params:{response:"created",format:"json"}})}},{key:"saveImage",value:function(t,e){return this.$http.get(this.url("/annotations/s3"),{params:e})}},{key:"showAccessRequest",value:function(t){return this.$http.get(this.url("/v2/items/"+t+"/access_requests"))}},{key:"createAccessRequest",value:function(t,e){return this.$http.post(this.url("/v2/items/"+t+"/access_requests"),e)}},{key:"signUp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.$http.post(this.url("/register"),Object.assign({source_method:"api_v1",format:"json",user:t},e))}},{key:"signIn",value:function(t){return this.$http.post(this.url("/login"),{format:"json",user_session:t})}},{key:"signOut",value:function(){return this.$http.get(this.url("/v2/logout"))}}]),t}();e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){"ngInject";var r=this;return r.identified=!1,r.track=function(i,o){_.isEmpty(n.fetch("user_id"))||(r.identified||r.identify(),o=_.merge({user_id:e.getId(),user_agent:t.navigator.userAgent,campaign_source:"viewer",appName:"web_app"},o),r.identified===!0&&analytics.track(i,o))},r.identify=function(t){t=t||e.getId(),t&&(r.identified=!0,analytics.identify(t,{email:e.getEmail()}))},r.page=function(){_.isEmpty(n.fetch("user_id"))||r.identified===!0&&analytics.page({hasBeenAuthed:!!n.fetch("user_id"),campaign_source:"viewer",user_agent:t.navigator.userAgent,integrations:{Madkudu:!1}})},r};n.$inject=["$window","userService","storageService"],e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n){"ngInject";o["default"](this,t),this.Api=e,this.Pusher=n,this.pusherSocket=null,this.channels={},this.channelObservers=[]}return t.$inject=["Api","Pusher"],s["default"](t,[{key:"setup",value:function(t){var e=this;this.Api.getPusherStream(t).then(function(t){e.pusherSocket=new e.Pusher(t.api_key,{authEndpoint:t.auth_url}),e.setChannel("item",e.pusherSocket.subscribe(t.channels.item)),e.setChannel("items",e.pusherSocket.subscribe(t.channels.items))})}},{key:"setChannel",value:function(t,e){this.channels[t]=e,_.each(this.channelObservers,function(n){n[0]===t&&e.bind(n[1],n[2])})}},{key:"bindChannel",value:function(t,e,n){var r=this.channels[t];this.channelObservers.push([t,e,n]),r&&r.bind(e,n)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r,i,a,s){"ngInject";o["default"](this,t),this.$timeout=e,this._$q=s,this.Api=n,this._itemService=r,this._userService=i,this._toutService=a,this._deferred=s.defer(),this.getAccessData(this._itemService)}return t.$inject=["$timeout","Api","itemService","userService","toutService","$q"],s["default"](t,[{key:"reset",value:function(){this._userService.get(),this._toutService.get(),this.getAccessData(this._itemService)}},{key:"getAccessData",value:function(t){var e=this;this.Api.getAbilities(t.slug()).then(function(t){e.abilities=t.abilities,e._deferred.resolve()},function(){e.abilities={},e._deferred.reject()})}},{key:"can",value:function(t){var e=this["can_"+t];return e?this["can_"+t]():!(!this.abilities||!this.abilities[t])}},{key:"canAsync",value:function(t){var e=this,n=this._$q.defer();return this._deferred.promise.then(function(){e.can(t)?n.resolve():n.reject()},function(){n.reject()}),n.promise}},{key:"inject",value:function(t){var e=this;t.can=function(t){return e.can(t)},t.is_trial=function(){return e.is_trial()},t.is_pro=function(){return e.is_pro()},t.trial_days_left=function(){return e.trial_days_left()},t.is_free=function(){return e.is_free()},t.has_team=function(){return e.has_team()}}},{key:"can_join",value:function(){return!this._userService.getId()}},{key:"can_change_logo",value:function(){var t=this._userService.getId();return t&&this._itemService.data.owner_id===t}},{key:"can_annotate",value:function(){return(this.abilities||{}).annotate&&"image"===(this._itemService.data||{}).type&&"image/gif"!==(this._itemService.data||{}).mimetype}},{key:"can_upgrade_annotate",value:function(){return this.can_join()&&!this.can_annotate()&&"image"===(this._itemService.data||{}).type&&"image/gif"!==(this._itemService.data||{}).mimetype}},{key:"can_share_email",value:function(){return!this.can("join")}},{key:"can_disable_copy",value:function(){return!0}},{key:"can_see_ads",value:function(){return this._toutService.isVisible()}},{key:"can_own",value:function(){return(this._itemService.data||{}).owner_id===this._userService.getId()}},{key:"has_team",value:function(){return!!this._userService.getTeam()}},{key:"can_admin",value:function(){return"admin"===this._userService.getRole()}},{key:"is_trial",value:function(){return this._userService.isTrial()}},{key:"is_pro",value:function(){return"Pro"===this._userService.getSubscription()}},{key:"is_free",value:function(){var t=this._userService.getSubscription();return t&&"free"===t.toLowerCase()}},{key:"trial_days_left",value:function(){return this._userService.trialDaysLeft()}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u={image:["image/gif","image/jpeg","image/png"],video:["audio/webm","video/mp4","video/quicktime","video/msvideo"],audio:["audio/ogg","audio/wav","audio/mpeg","audio/aac","audio/mp4"],pdf:["application/pdf"],text:[],code:["application/javascript","application/ruby","application/xml","text/css","text/html","text/javascript","text/plain"]},c={code:["sass","scss","haml","md"]},l=function(){function t(){"ngInject";o["default"](this,t)}return s["default"](t,[{key:"getType",value:function(t){return this.getTypeFromMime(t.data.mimetype)||this.getTypeFromFilename(t.fileExtension())||"other"}},{key:"getTypeFromMime",value:function(t){var e;return _.each(u,function(n,r){_.indexOf(n,t)>-1&&(e=r)}),e}},{key:"getTypeFromFilename",value:function(t){var e;return _.each(c,function(n,r){_.indexOf(n,t)>-1&&(e=r)}),e}}]),t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(){o["default"](this,t),this._states={}}return s["default"](t,[{key:"setState",value:function(t,e){this._states[t]=e}},{key:"getState",value:function(t){return this._states[t]}},{key:"pending",value:function(t){return this._states[t]===!0?"api-loading":null}},{key:"inject",value:function(t){var e=this;t.pending=function(t){return e.pending(t)}}},{key:"wrap",value:function(t){var e=this;return function(n){return e.track(t,n)}}},{key:"track",value:function(t,e){var n=this;return this.setState(t,!0),e.then(function(){n.setState(t,!1)},function(){n.setState(t,!1)}),e}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),o=r(i),a=n(134),s=r(a),u=function(t,e,n,r,i,a){"ngInject";var u=this,c=function(t){return function(){window.open(t(),"_blank")}},l=function(){return e.share(n)},h=function(){return o["default"].get(n.data,"name")},f=function(t){var e=window.stlib;if(!e)return void window.console.log("ShareThis is not loaded");var n={url:l(),short_url:l(),shorten:"false",title:h(),destination:t};o["default"].each(n,function(t,n){e.data.set(n,t,"shareInfo")}),e.sharer.share(),"pinterest"===t&&e.sharer.sharePinterest()},d=function(t,e){t[e]=function(){f(e)}};u.twitter=c(function(){var t="https://twitter.com/share?"+r.param({text:"Check out what I created #productivity #collaboration "+h(),url:l(),via:"cloudapp"});return t}),u.facebook=c(function(){var t="https://www.facebook.com/sharer.php?"+r.param({u:l()});return t}),d(u,"pinterest"),d(u,"googleplus"),d(u,"linkedin"),d(u,"blogger"),d(u,"delicious"),d(u,"flipboard"),d(u,"reddit"),d(u,"tumblr"),u.email=function(){a.can("share_email")&&s["default"](t)};var p=window.document.createElement("script");p.type="application/javascript",p.src=window.location.protocol+"//ws.sharethis.com/button/buttons.js",p.onload=function(){var t=window.stLight||{};if(!t.publisher)try{t.options({publisher:i.env.SHARETHIS_KEY,doNotHash:!1,doNotCopy:a.can_disable_copy(),hashAddressBar:!1})}catch(e){console.log(e)}};try{window.document.body.appendChild(p)}catch(v){console.log(v)}};u.$inject=["$uibModal","urlService","itemService","$","config","abilityService"],e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.open({templateUrl:"app/share/share.html",controller:"ShareController",controllerAs:"vm"})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),o=r(i),a=n(136),s=r(a),u=function(t,e,n,r){"ngInject";var i=this;r.url=i,i.back=function(){return e.appBase+"/"},i.item=function(t){return"/"+t.slug()},i.secure=function(t){return""+e.secureBase+t.slug()},i.share=function(e){return t.location.origin+"/"+e.slug()},i.newTeam=function(){return e.appBase+"/teams/new)"},i.resetPassword=function(){return e.appBase+"/reset";

},i.upgradePlan=function(t){return e.appBase+"/plans?"+t},i.referFriend=function(t){return e.appBase+"/account/referrals?"+t},i.marketing=function(t){return n.getId()?e.appBase+"/":""+e.marketingBase+(t||"")},i.originalUrl=function(t){var e=o["default"].get(t,"details.download_url","");return e.replace("/download/","/")},i.torrentUrl=function(t){return t.data.source_url+"?torrent"},i.downloadUrl=function(t){return o["default"].get(t.details,"download_url")},i.downloadAppUrl=function(){return s["default"][platform.os.family]||"https://www.getcloudapp.com/download"},i.setupCloudappUrl=function(){return e.appBase+"/onboarding/teams/new"},i.annotate=function(t){return i.item(t)+"/annotate"},i.item=function(t){return"/"+t.slug()},i.terms=function(){return e.appBase+"/terms"},i.quickCheckout=function(){return e.appBase+"/teams/quick_checkout/new"},i.oauthUrl=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.appBase+"/auth/"+t,i=encodeURIComponent(JSON.stringify(Object.assign(n,{"return":!0})));return r+"?state="+i},i.ssoUrl=function(){return e.appBase+"/sso/new"},i.ensureExternalUrl=function(t){return t?t.match(/^https?:\/\//)?t:"https://"+t:""},i.viewOnAdmin=function(t){return e.appBase+"/admin/drops/"+t.slug()}};u.$inject=["$window","config","userService","$rootScope"],e["default"]=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={"OS X":"https://www.getcloudapp.com/download/direct/mac",Windows:"https://www.getcloudapp.com/download/direct/windows",iOS:"https://www.getcloudapp.com/download/direct/ios"};e["default"]=n},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){"ngInject";var e=this;return e._items=[],e.items=function(){return _.where(e._items,{active:!0})},e.send=function(n){t(function(){n.active=!0,n.close=function(){n.active=!1},e._items.push(n)})},e};n.$inject=["$timeout"],e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n){"ngInject";o["default"](this,t),this._Api=e,this._itemService=n}return t.$inject=["Api","itemService"],s["default"](t,[{key:"get",value:function(){var t=this;return this._Api.getTout(this._itemService.slug()).then(function(e){t._toutData=e},function(){t._toutData={}})}},{key:"isVisible",value:function(){return(this._toutData||{}).visible}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(140),o=r(i),a=n(143),s=r(a),u=n(6),c=r(u),l=n(7),h=r(l),f=function(){function t(e,n){"ngInject";c["default"](this,t),this.$http=e,this.transcodingBase=n.transcodingBase,this.dashUrl=null,this.thumbnailUrl=null}return t.$inject=["$http","config"],h["default"](t,[{key:"get",value:function(){function t(t){return e.apply(this,arguments)}var e=s["default"](o["default"].mark(function n(t){var e,r;return o["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.$http.get(this.transcodingBase+"/"+t,{withCredentials:!1});case 2:e=n.sent,r=e.data.data.sources.thumbnailSources["jpg:800x"]||e.data.data.sources.thumbnailSources["jpg:600x"],this.dashUrl=e.data.data.sources.videoSources.httpstream.dash,this.thumbnailUrl=r[0];case 6:case"end":return n.stop()}},n,this)}));return t}()}]),t}();e["default"]=f},function(t,e,n){t.exports=n(141)},function(t,e,n){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
var r=function(){return this}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,t.exports=n(142),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(a){r.regeneratorRuntime=void 0}},function(t,e){/**
	 * Copyright (c) 2014-present, Facebook, Inc.
	 *
	 * This source code is licensed under the MIT license found in the
	 * LICENSE file in the root directory of this source tree.
	 */
!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),s=new d(r||[]);return a._invoke=c(t,n,s),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}function i(){}function o(){}function a(){}function s(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function u(t){function e(n,i,o,a){var s=r(t[n],t,i);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&y.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,o,a)},function(t){e("throw",t,o,a)}):Promise.resolve(c).then(function(t){u.value=t,o(u)},a)}a(s.arg)}function n(t,n){function r(){return new Promise(function(r,i){e(t,n,r,i)})}return i=i?i.then(r,r):r()}var i;this._invoke=n}function c(t,e,n){var i=S;return function(o,a){if(i===M)throw new Error("Generator is already running");if(i===C){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var u=l(s,n);if(u){if(u===P)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===S)throw i=C,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=M;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?C:O,c.arg===P)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=C,n.method="throw",n.arg=c.arg)}}}function l(t,e){var n=t.iterator[e.method];if(n===g){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=g,l(t,e),"throw"===e.method))return P;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,P;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=g),e.delegate=null,P):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,P)}function h(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function f(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function d(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(h,this),this.reset(!0)}function p(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function i(){for(;++n<t.length;)if(y.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=g,i.done=!0,i};return r.next=r}}return{next:v}}function v(){return{value:g,done:!0}}var g,m=Object.prototype,y=m.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",x=_.asyncIterator||"@@asyncIterator",w=_.toStringTag||"@@toStringTag",T="object"==typeof t,E=e.regeneratorRuntime;if(E)return void(T&&(t.exports=E));E=e.regeneratorRuntime=T?t.exports:{},E.wrap=n;var S="suspendedStart",O="suspendedYield",M="executing",C="completed",P={},k={};k[b]=function(){return this};var A=Object.getPrototypeOf,I=A&&A(A(p([])));I&&I!==m&&y.call(I,b)&&(k=I);var R=a.prototype=i.prototype=Object.create(k);o.prototype=R.constructor=a,a.constructor=o,a[w]=o.displayName="GeneratorFunction",E.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return e?e===o||"GeneratorFunction"===(e.displayName||e.name):!1},E.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,w in t||(t[w]="GeneratorFunction")),t.prototype=Object.create(R),t},E.awrap=function(t){return{__await:t}},s(u.prototype),u.prototype[x]=function(){return this},E.AsyncIterator=u,E.async=function(t,e,r,i){var o=new u(n(t,e,r,i));return E.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},s(R),R[w]="Generator",R[b]=function(){return this},R.toString=function(){return"[object Generator]"},E.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},E.values=p,d.prototype={constructor:d,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=g,this.done=!1,this.delegate=null,this.method="next",this.arg=g,this.tryEntries.forEach(f),!t)for(var e in this)"t"===e.charAt(0)&&y.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=g)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=g),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=y.call(i,"catchLoc"),s=y.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&y.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,P):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),P},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),f(n),P}},"catch":function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;f(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:p(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=g),P}}}(function(){return this}()||Function("return this")())},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(144),o=r(i);e["default"]=function(t){return function(){var e=t.apply(this,arguments);return new o["default"](function(t,n){function r(i,a){try{var s=e[i](a),u=s.value}catch(c){return void n(c)}return s.done?void t(u):o["default"].resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}},function(t,e,n){t.exports={"default":n(145),__esModule:!0}},function(t,e,n){n(84),n(39),n(67),n(146),n(162),n(163),t.exports=n(13).Promise},function(t,e,n){"use strict";var r,i,o,a,s=n(44),u=n(12),c=n(14),l=n(109),h=n(11),f=n(19),d=n(15),p=n(147),v=n(148),g=n(151),m=n(152).set,y=n(154)(),_=n(155),b=n(156),x=n(157),w=n(158),T="Promise",E=u.TypeError,S=u.process,O=S&&S.versions,M=O&&O.v8||"",C=u[T],P="process"==l(S),k=function(){},A=i=_.f,I=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n(64)("species")]=function(t){t(k,k)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==M.indexOf("6.6")&&-1===x.indexOf("Chrome/66")}catch(r){}}(),R=function(t){var e;return f(t)&&"function"==typeof(e=t.then)?e:!1},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,u=e.resolve,c=e.reject,l=e.domain;try{s?(i||(2==t._h&&N(t),t._h=1),s===!0?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?c(E("Promise-chain cycle")):(o=R(n))?o.call(n,u,c):u(n)):c(r)}catch(h){l&&!a&&l.exit(),c(h)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&j(t)})}},j=function(t){m.call(u,function(){var e,n,r,i=t._v,o=L(t);if(o&&(e=b(function(){P?S.emit("unhandledRejection",i,t):(n=u.onunhandledrejection)?n({promise:t,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=P||L(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},L=function(t){return 1!==t._h&&0===(t._a||t._c).length},N=function(t){m.call(u,function(){var e;P?S.emit("rejectionHandled",t):(e=u.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},U=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=R(t))?y(function(){var r={_w:n,_d:!1};try{e.call(t,c(U,r,1),c(F,r,1))}catch(i){F.call(r,i)}}):(n._v=t,n._s=1,D(n,!1))}catch(r){F.call({_w:n,_d:!1},r)}}};I||(C=function(t){p(this,C,T,"_h"),d(t),r.call(this);try{t(c(U,this,1),c(F,this,1))}catch(e){F.call(this,e)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(159)(C.prototype,{then:function(t,e){var n=A(g(this,C));return n.ok="function"==typeof t?t:!0,n.fail="function"==typeof e&&e,n.domain=P?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},"catch":function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(U,t,1),this.reject=c(F,t,1)},_.f=A=function(t){return t===C||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!I,{Promise:C}),n(63)(C,T),n(160)(T),a=n(13)[T],h(h.S+h.F*!I,T,{reject:function(t){var e=A(this),n=e.reject;return n(t),e.promise}}),h(h.S+h.F*(s||!I),T,{resolve:function(t){return w(s&&this===a?C:this,t)}}),h(h.S+h.F*!(I&&n(161)(function(t){C.all(t)["catch"](k)})),T,{all:function(t){var e=this,n=A(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var s=o++,u=!1;n.push(void 0),a++,e.resolve(t).then(function(t){u||(u=!0,n[s]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=A(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(14),i=n(149),o=n(150),a=n(18),s=n(56),u=n(113),c={},l={},e=t.exports=function(t,e,n,h,f){var d,p,v,g,m=f?function(){return t}:u(t),y=r(n,h,e?2:1),_=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(o(m)){for(d=s(t.length);d>_;_++)if(g=e?y(a(p=t[_])[0],p[1]):y(t[_]),g===c||g===l)return g}else for(v=m.call(t);!(p=v.next()).done;)if(g=i(v,y,p.value,e),g===c||g===l)return g};e.BREAK=c,e.RETURN=l},function(t,e,n){var r=n(18);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){var a=t["return"];throw void 0!==a&&r(a.call(t)),o}}},function(t,e,n){var r=n(46),i=n(64)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(18),i=n(15),o=n(64)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(14),s=n(153),u=n(62),c=n(23),l=n(12),h=l.process,f=l.setImmediate,d=l.clearImmediate,p=l.MessageChannel,v=l.Dispatch,g=0,m={},y="onreadystatechange",_=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},b=function(t){_.call(t.data)};f&&d||(f=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return m[++g]=function(){s("function"==typeof t?t:Function(t),e)},r(g),g},d=function(t){delete m[t]},"process"==n(54)(h)?r=function(t){h.nextTick(a(_,t,1))}:v&&v.now?r=function(t){v.now(a(_,t,1))}:p?(i=new p,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r=y in c("script")?function(t){u.appendChild(c("script"))[y]=function(){u.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:f,clear:d}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(12),i=n(152).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(54)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(o){throw t?n():e=void 0,o}}e=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var h=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),n=function(){f.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}
// 25.4.1.5 NewPromiseCapability(C)
var i=n(15);t.exports.f=function(t){return new r(t)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},function(t,e,n){var r=n(12),i=r.navigator;t.exports=i&&i.userAgent||""},function(t,e,n){var r=n(18),i=n(19),o=n(155);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},function(t,e,n){var r=n(16);t.exports=function(t,e,n){for(var i in e)n&&t[i]?t[i]=e[i]:r(t,i,e[i]);return t}},function(t,e,n){"use strict";var r=n(12),i=n(13),o=n(17),a=n(21),s=n(64)("species");t.exports=function(t){var e="function"==typeof i[t]?i[t]:r[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(64)("iterator"),i=!1;try{var o=[7][r]();o["return"]=function(){i=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(s){}return n}},function(t,e,n){"use strict";var r=n(11),i=n(13),o=n(12),a=n(151),s=n(158);r(r.P+r.R,"Promise",{"finally":function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(11),i=n(155),o=n(156);r(r.S,"Promise",{"try":function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function u(){"ngInject";o["default"](this,u);var t={restrict:"E",templateUrl:"app/codeView/codeView.html",controller:s,controllerAs:"vm",bindToController:!0};return t},s=function(t,e,n){"ngInject";var r=this;r.setCode=function(t){e(function(){r.code=t})};var i={md:"markdown"},o=i[t.fileExtension()];return o&&(r.language=o),r.getFile=function(){var i=t.data.source_url,o=new XMLHttpRequest;o.open("GET",i),n.setState("codeLoad",!0),o.onreadystatechange=function(){n.getState("codeLoad")&&4===o.readyState&&(o.response.length<1e5?(n.setState("codeLoad",!1),r.setCode(o.response)):(n.setState("codeLoad",!1),t.data.type="other"))},o.send(),e(function(){n.getState("codeLoad")&&(n.setState("codeLoad",!1),t.data.type="other")},1e4)},r.getFile(),r};s.$inject=["itemService","$timeout","loadingService"],e["default"]=a},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(7),a=i(o),s=n(6),u=i(s),c=n(27),l=i(c),h=n(166),f=r(h),d=n(356),p=i(d),v=n(96),g=i(v),m=n(357),y=i(m),_=new f.Application(1),b=(_.stage,function w(){"ngInject";u["default"](this,w);var t={restrict:"E",templateUrl:"app/imageView/imageView.html",controller:x,controllerAs:"vm",bindToController:!0};return t}),x=function(){function t(e,n,r,i,o){"ngInject";var a=this;u["default"](this,t),this.item=n,this._$location=o,this._$silent=e,this._$timeout=i;var s=this,c=r("#image_viewport"),h=function(){var t=r(window).height()-75,e="image-view img, image-view canvas { max-height: "+t+"px; }";e+="image-view .zoom img, image-view .zoom canvas { max-height: none; }",r("#dynamicCss").get(0).innerHTML=e},f=function(){h();var t=function(t){return parseInt(t,10)},e=t(c.find("img, canvas").css("width")),n=t(c.find("img, canvas").css("height"));c.toggleClass("zoom");var r=t(c.find("img, canvas").css("width")),o=t(c.find("img, canvas").css("height"));c.toggleClass("zoom"),s.zoomable=e!==r||n!==o,i()};h(),c.find("img.raw_image").on("load",function(){f(),a.zoom=!!a.item.zoom}),r(window).on("resize",l["default"].debounce(f,100));var d=this.loadCanvas();d&&d.then(f)}return t.$inject=["$ngSilentLocation","itemService","$","$timeout","$location"],a["default"](t,[{key:"loadCanvas",value:function(){var t=this;if("image/jpeg"===this.item.data.mimetype){var e=new p["default"](window.location.search).get("deeplinking");if(e&&this._$timeout(5e3).then(function(){t.image=new y["default"]({src:t.item.data.latest_source_url,canvas:document.getElementById("drop-canvas")})})["catch"](function(t){return console.log("DEEPLINKER ERROR",t)}),!l["default"].include(["iOS","Android"],platform.os.family)&&!l["default"].include(["Firefox"],platform.name)){var n=$("#image_view-port");return g["default"](this.item.data.annotation_source_url).then(function(t){l["default"].get(t,"orientation",1)>1&&(n.find("img.raw_image").hide(),n[0].appendChild(t.image),n.find("img.raw_image").remove())})}}}},{key:"toggleZoom",value:function(){if(this.zoomable){this.zoom=!this.zoom;var t=this._$location.path();t=t.replace(/\/o$/,"");var e=$("tout");e.show(),this.zoom&&(t+="/o",e.hide()),this._$silent.silent(t,!0)}}}]),t}();e["default"]=b},function(t,e,n){(function(t){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var o=n(167);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=n(173);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(292),u=i(s),c=n(293),l=r(c),h=n(296),f=r(h),d=n(299),p=r(d),v=n(307),g=r(v),m=n(319),y=r(m),_=n(325),b=r(_),x=n(338),w=r(x),T=n(345),E=r(T),S=n(350),O=r(S);a.utils.mixins.performMixins();var M=b.shared||null;e.accessibility=l,e.extract=f,e.extras=p,e.filters=g,e.interaction=y,e.loaders=b,e.mesh=w,e.particles=E,e.prepare=O,e.loader=M,"function"==typeof u["default"]&&u["default"](e),t.PIXI=e}).call(e,function(){return this}())},function(t,e,n){"use strict";n(168),n(170),n(171),n(172),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var i=n(169),o=r(i);Object.assign||(Object.assign=o["default"])},function(t,e){/*
	object-assign
	(c) Sindre Sorhus
	@license MIT
	*/
"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function r(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;10>n;n++)e["_"+String.fromCharCode(n)]=n;var r=Object.getOwnPropertyNames(e).map(function(t){return e[t]});if("0123456789"!==r.join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},i)).join("")?!1:!0}catch(o){return!1}}var i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(t,e){for(var r,s,u=n(t),c=1;c<arguments.length;c++){r=Object(arguments[c]);for(var l in r)o.call(r,l)&&(u[l]=r[l]);if(i){s=i(r);for(var h=0;h<s.length;h++)a.call(r,s[h])&&(u[s[h]]=r[s[h]])}}return u}},function(t,e){(function(t){"use strict";var e=16;if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var n=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-n}}for(var r=Date.now(),i=["ms","moz","webkit","o"],o=0;o<i.length&&!t.requestAnimationFrame;++o){var a=i[o];t.requestAnimationFrame=t[a+"RequestAnimationFrame"],t.cancelAnimationFrame=t[a+"CancelAnimationFrame"]||t[a+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var n=Date.now(),i=e+r-n;return 0>i&&(i=0),r=n,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(e,function(){return this}())},function(t,e){"use strict";Math.sign||(Math.sign=function(t){return t=Number(t),0===t||isNaN(t)?t:t>0?1:-1})},function(t,e){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var o=n(174);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=n(175);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})});var s=n(185);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return i(s)["default"]}});var u=n(202);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return i(u)["default"]}});var c=n(203);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return i(c)["default"]}});var l=n(212);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return i(l)["default"]}});var h=n(211);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return i(h)["default"]}});var f=n(209);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return i(f)["default"]}});var d=n(210);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return i(d)["default"]}});var p=n(219);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return i(p)["default"]}});var v=n(234);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return i(v)["default"]}});var g=n(243);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return i(g)["default"]}});var m=n(244);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return i(m)["default"]}});var y=n(273);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i(y)["default"]}});var _=n(274);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return i(_)["default"]}});var b=n(275);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return i(b)["default"]}});var x=n(277);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return i(x)["default"]}});var w=n(278);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return i(w)["default"]}});var T=n(280);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return i(T)["default"]}});var E=n(288);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return i(E)["default"]}});var S=n(289);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return i(S)["default"]}});var O=n(220);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return i(O)["default"]}});var M=n(256);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return i(M)["default"]}});var C=n(221);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return i(C)["default"]}});var P=n(237);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return i(P)["default"]}});var k=n(238);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return i(k)["default"]}});var A=n(229);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return i(A)["default"]}});var I=n(233);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return i(I)["default"]}});var R=n(240);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return i(R)["default"]}});var D=n(262);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return i(D)["default"]}});var j=n(246);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return i(j)["default"]}});var L=n(245);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return i(L)["default"]}});var N=n(259);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return i(N)["default"]}});var F=n(260);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return i(F)["default"]}});var U=n(249);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return i(U)["default"]}});var B=n(250);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return i(B)["default"]}});var X=n(290);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return i(X)["default"]}});var H=n(291);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return H.autoDetectRenderer}});var W=n(213),G=r(W),z=n(230),V=r(z),Y=n(205),$=i(Y),q=n(235),K=i(q),J=n(247),Z=i(J);e.settings=$["default"],e.utils=G,e.ticker=V,e.CanvasRenderer=K["default"],e.WebGLRenderer=Z["default"]},function(t,e){"use strict";e.__esModule=!0;e.VERSION="4.8.2",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(176);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(177);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(178);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(179);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(180);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return r(u)["default"]}});var c=n(182);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return r(c)["default"]}});var l=n(183);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return r(l)["default"]}});var h=n(181);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return r(h)["default"]}});var f=n(184);Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return r(f)["default"]}})},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n(this,t),this.x=e,this.y=r}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();e["default"]=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=i,this._y=o,this.cb=e,this.scope=r}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e||this.cb,i=n||this.scope;return new t(r,i,this._x,this._y)},t.prototype.set=function(t,e){var n=t||0,r=e||(0!==e?n:0);(this._x!==n||this._y!==r)&&(this._x=n,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();e["default"]=i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(176),s=r(a),u=n(174),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i(this,t),this.a=e,this.b=n,this.c=r,this.d=o,this.tx=a,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.tx=i,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n},t.prototype.apply=function(t,e){e=e||new s["default"];var n=t.x,r=t.y;return e.x=this.a*n+this.c*r+this.tx,e.y=this.b*n+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s["default"];var n=1/(this.a*this.d+this.c*-this.b),r=t.x,i=t.y;return e.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,o=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=o*e-this.ty*n,this.ty=o*n+this.ty*e,this},t.prototype.append=function(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this},t.prototype.setTransform=function(t,e,n,r,i,o,a,s,u){return this.a=Math.cos(a+u)*i,this.b=Math.sin(a+u)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=t-(n*this.a+r*this.c),this.ty=e-(n*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-Math.atan2(-r,i),a=Math.atan2(n,e),s=Math.abs(o+a);return 1e-5>s||Math.abs(u.PI_2-s)<1e-5?(t.rotation=a,0>e&&i>=0&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+n*n),t.scale.y=Math.sqrt(r*r+i*i),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,o=t*r-e*n;return this.a=r/o,this.b=-e/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(t*this.ty-e*i)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},o(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return 0>t?-1:t>0?1:0}function o(){for(var t=0;16>t;t++){var e=[];d.push(e);for(var n=0;16>n;n++)for(var r=i(u[t]*u[n]+l[t]*c[n]),o=i(c[t]*u[n]+h[t]*c[n]),a=i(u[t]*l[n]+l[t]*h[n]),p=i(c[t]*l[n]+h[t]*h[n]),v=0;16>v;v++)if(u[v]===r&&c[v]===o&&l[v]===a&&h[v]===p){e.push(v);break}}for(var g=0;16>g;g++){var m=new s["default"];m.set(u[g],c[g],l[g],h[g],0,0),f.push(m)}}e.__esModule=!0;var a=n(178),s=r(a),u=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],c=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],f=[],d=[];o();var p={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return u[t]},uY:function(t){return c[t]},vX:function(t){return l[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return d[t][e]},sub:function(t,e){return d[t][p.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2===(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?p.S:p.N:2*Math.abs(e)<=Math.abs(t)?t>0?p.E:p.W:e>0?t>0?p.SE:p.SW:t>0?p.NE:p.NW},matrixAppendRotationInv:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=f[p.inv(e)];i.tx=n,i.ty=r,t.append(i)}};e["default"]=p},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(181),a=r(o),s=n(174),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=e,this.y=n,this.radius=r,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-t,i=this.y-e;return r*=r,i*=i,n>=r+i},t.prototype.getBounds=function(){return new a["default"](this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();e["default"]=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(174),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;r(this,t),this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(a),this.type=o.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height?!0:!1},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,this.height<0&&(this.height=0))},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),i=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=n-e,this.y=r,this.height=i-r},i(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(181),a=r(o),s=n(174),u=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;i(this,t),this.x=e,this.y=n,this.width=r,this.height=o,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,r=(e-this.y)/this.height;return n*=n,r*=r,1>=n+r},t.prototype.getBounds=function(){return new a["default"](this.x-this.width,this.y-this.height,this.width,this.height)},t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(176),a=r(o),s=n(174),u=function(){function t(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];if(i(this,t),Array.isArray(n[0])&&(n=n[0]),n[0]instanceof a["default"]){for(var o=[],u=0,c=n.length;c>u;u++)o.push(n[u].x,n[u].y);n=o}this.closed=!0,this.points=n,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;(t[0]!==t[t.length-2]||t[1]!==t[t.length-1])&&t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var n=!1,r=this.points.length/2,i=0,o=r-1;r>i;o=i++){var a=this.points[2*i],s=this.points[2*i+1],u=this.points[2*o],c=this.points[2*o+1],l=s>e!=c>e&&(u-a)*((e-s)/(c-s))+a>t;l&&(n=!n)}return n},t}();e["default"]=u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(174),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;r(this,t),this.x=e,this.y=n,this.width=o,this.height=a,this.radius=s,this.type=i.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var n=t-(this.x+this.radius),r=e-(this.y+this.radius),i=this.radius*this.radius;if(i>=n*n+r*r)return!0;if(n=t-(this.x+this.width-this.radius),i>=n*n+r*r)return!0;if(r=e-(this.y+this.height-this.radius),i>=n*n+r*r)return!0;if(n=t-(this.x+this.radius),i>=n*n+r*r)return!0}return!1},t}();e["default"]=o},function(t,e,n){var r={createContext:n(186),setVertexAttribArrays:n(187),GLBuffer:n(188),GLFramebuffer:n(189),GLShader:n(191),GLTexture:n(190),VertexArrayObject:n(200),shader:n(201)};"undefined"!=typeof t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},function(t,e){var n=function(t,e){var n=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!n)throw new Error("This browser does not support webGL. Try using the canvas renderer");return n};t.exports=n},function(t,e){var n=function(t,e,n){var r;if(n){var i=n.tempAttribState,o=n.attribState;for(r=0;r<i.length;r++)i[r]=!1;for(r=0;r<e.length;r++)i[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==i[r]&&(o[r]=i[r],n.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var a=e[r];t.enableVertexAttribArray(a.attribute.location)}};t.exports=n},function(t,e){var n=new ArrayBuffer(0),r=function(t,e,r,i){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=i||t.STATIC_DRAW,this.data=n,r&&this.upload(r),this._updateID=0};r.prototype.upload=function(t,e,n){n||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){var t=this.gl;t.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,n){return new r(t,t.ARRAY_BUFFER,e,n)},r.createIndexBuffer=function(t,e,n){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,n)},r.create=function(t,e,n,i){return new r(t,e,n,i)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e,n){var r=n(190),i=function(t,e,n){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=n||100};i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,n,r){this.bind();var i=this.gl;i.clearColor(t,e,n,r),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var n=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,this.stencil),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,n,o){var a=r.fromData(t,null,e,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,n);return s.enableTexture(a),s.unbind(),s},i.createFloat32=function(t,e,n,o){var a=new r.fromData(t,o,e,n);a.enableNearestScaling(),a.enableWrapClamp();var s=new i(t,e,n);return s.enableTexture(a),s.unbind(),s},t.exports=i},function(t,e){var n=function(t,e,n,r,i){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=n||-1,this.format=r||t.RGBA,this.type=i||t.UNSIGNED_BYTE};n.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var n=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||n!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=n,this.height=r};var r=!1;n.prototype.uploadData=function(t,e,n){this.bind();var i=this.gl;if(t instanceof Float32Array){if(!r){var o=i.getExtension("OES_texture_float");if(!o)throw new Error("floating point textures not available");r=!0}this.type=i.FLOAT}else this.type=this.type||i.UNSIGNED_BYTE;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||n!==this.height?i.texImage2D(i.TEXTURE_2D,0,this.format,e,n,0,this.format,this.type,t||null):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e,n,this.format,this.type,t||null),this.width=e,this.height=n},n.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},n.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},n.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},n.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},n.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},n.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},n.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},n.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},n.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},n.prototype.destroy=function(){var t=this.gl;t.deleteTexture(this.texture)},n.fromSource=function(t,e,r){var i=new n(t);return i.premultiplyAlpha=r||!1,i.upload(e),i},n.fromData=function(t,e,r,i){var o=new n(t);return o.uploadData(e,r,i),o},t.exports=n},function(t,e,n){var r=n(192),i=n(193),o=n(196),a=n(198),s=n(199),u=function(t,e,n,u,c){this.gl=t,u&&(e=a(e,u),n=a(n,u)),this.program=r(t,e,n,c),this.attributes=i(t,this.program),this.uniformData=o(t,this.program),this.uniforms=s(t,this.uniformData)};u.prototype.bind=function(){return this.gl.useProgram(this.program),this},u.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null;var t=this.gl;t.deleteProgram(this.program)},t.exports=u},function(t,e){var n=function(t,e,n,i){var o=r(t,t.VERTEX_SHADER,e),a=r(t,t.FRAGMENT_SHADER,n),s=t.createProgram();if(t.attachShader(s,o),t.attachShader(s,a),i)for(var u in i)t.bindAttribLocation(s,i[u],u);return t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(s,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(s)),t.deleteProgram(s),s=null),t.deleteShader(o),t.deleteShader(a),s},r=function(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(console.log(t.getShaderInfoLog(r)),null)};t.exports=n},function(t,e,n){var r=n(194),i=n(195),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),s=0;o>s;s++){var u=t.getActiveAttrib(e,s),c=r(t,u.type);n[u.name]={type:c,size:i(c),location:t.getAttribLocation(e,u.name),pointer:a}}return n},a=function(t,e,n,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,n||0,r||0)};t.exports=o},function(t,e){var n=function(t,e){if(!r){var n=Object.keys(i);r={};for(var o=0;o<n.length;++o){var a=n[o];r[t[a]]=i[a]}}return r[e]},r=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=n},function(t,e){var n=function(t){return r[t]},r={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=n},function(t,e,n){var r=n(194),i=n(197),o=function(t,e){for(var n={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),a=0;o>a;a++){var s=t.getActiveUniform(e,a),u=s.name.replace(/\[.*?\]/,""),c=r(t,s.type);n[u]={type:c,size:s.size,location:t.getUniformLocation(e,u),value:i(c,s.size)}}return n};t.exports=o},function(t,e){var n=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);

case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},r=function(t){for(var e=new Array(t),n=0;n<e.length;n++)e[n]=!1;return e};t.exports=n},function(t,e){var n=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t};t.exports=n},function(t,e){function n(t,e){return function(n){this.data[t].value=n;var r=this.data[t].location;1===e.size?a[e.type](this.gl,r,n):s[e.type](this.gl,r,n)}}function r(t,e){for(var n=e,r=0;r<t.length-1;r++){var i=n[t[r]]||{data:{}};n[t[r]]=i,n=i}return n}var i=function(t,e){var i={data:{}};i.gl=t;for(var a=Object.keys(e),s=0;s<a.length;s++){var u=a[s],c=u.split("."),l=c[c.length-1],h=r(c,i),f=e[u];h.data[l]=f,h.gl=t,Object.defineProperty(h,l,{get:o(l),set:n(l,f)})}return i},o=function(t){return function(){return this.data[t].value}},a={"float":function(t,e,n){t.uniform1f(e,n)},vec2:function(t,e,n){t.uniform2f(e,n[0],n[1])},vec3:function(t,e,n){t.uniform3f(e,n[0],n[1],n[2])},vec4:function(t,e,n){t.uniform4f(e,n[0],n[1],n[2],n[3])},"int":function(t,e,n){t.uniform1i(e,n)},ivec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},ivec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},ivec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},bool:function(t,e,n){t.uniform1i(e,n)},bvec2:function(t,e,n){t.uniform2i(e,n[0],n[1])},bvec3:function(t,e,n){t.uniform3i(e,n[0],n[1],n[2])},bvec4:function(t,e,n){t.uniform4i(e,n[0],n[1],n[2],n[3])},mat2:function(t,e,n){t.uniformMatrix2fv(e,!1,n)},mat3:function(t,e,n){t.uniformMatrix3fv(e,!1,n)},mat4:function(t,e,n){t.uniformMatrix4fv(e,!1,n)},sampler2D:function(t,e,n){t.uniform1i(e,n)}},s={"float":function(t,e,n){t.uniform1fv(e,n)},vec2:function(t,e,n){t.uniform2fv(e,n)},vec3:function(t,e,n){t.uniform3fv(e,n)},vec4:function(t,e,n){t.uniform4fv(e,n)},"int":function(t,e,n){t.uniform1iv(e,n)},ivec2:function(t,e,n){t.uniform2iv(e,n)},ivec3:function(t,e,n){t.uniform3iv(e,n)},ivec4:function(t,e,n){t.uniform4iv(e,n)},bool:function(t,e,n){t.uniform1iv(e,n)},bvec2:function(t,e,n){t.uniform2iv(e,n)},bvec3:function(t,e,n){t.uniform3iv(e,n)},bvec4:function(t,e,n){t.uniform4iv(e,n)},sampler2D:function(t,e,n){t.uniform1iv(e,n)}};t.exports=i},function(t,e,n){function r(t,e){if(this.nativeVaoExtension=null,r.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var n=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(n),attribState:new Array(n)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var i=n(187);r.prototype.constructor=r,t.exports=r,r.FORCE_NATIVE=!1,r.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},r.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},r.prototype.activate=function(){for(var t=this.gl,e=null,n=0;n<this.attributes.length;n++){var r=this.attributes[n];e!==r.buffer&&(r.buffer.bind(),e=r.buffer),t.vertexAttribPointer(r.attribute.location,r.attribute.size,r.type||t.FLOAT,r.normalized||!1,r.stride||0,r.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},r.prototype.addAttribute=function(t,e,n,r,i,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:n||this.gl.FLOAT,normalized:r||!1,stride:i||0,start:o||0}),this.dirty=!0,this},r.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},r.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},r.prototype.draw=function(t,e,n){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(n||0)):r.drawArrays(t,n,e||this.getSize()),this},r.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},r.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,n){t.exports={compileProgram:n(192),defaultValue:n(197),extractAttributes:n(193),extractUniforms:n(196),generateUniformAccessObject:n(199),setPrecision:n(198),mapSize:n(195),mapType:n(194)}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(175),o=function(){function t(){r(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:(t=t||new i.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=t[0],a=t[1];e=e>o?o:e,n=n>a?a:n,r=o>r?o:r,i=a>i?a:i,o=t[2],a=t[3],e=e>o?o:e,n=n>a?a:n,r=o>r?o:r,i=a>i?a:i,o=t[4],a=t[5],e=e>o?o:e,n=n>a?a:n,r=o>r?o:r,i=a>i?a:i,o=t[6],a=t[7],e=e>o?o:e,n=n>a?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=e,this.minY=n,this.maxX=r,this.maxY=i},t.prototype.addFrame=function(t,e,n,r,i){var o=t.worldTransform,a=o.a,s=o.b,u=o.c,c=o.d,l=o.tx,h=o.ty,f=this.minX,d=this.minY,p=this.maxX,v=this.maxY,g=a*e+u*n+l,m=s*e+c*n+h;f=f>g?g:f,d=d>m?m:d,p=g>p?g:p,v=m>v?m:v,g=a*r+u*n+l,m=s*r+c*n+h,f=f>g?g:f,d=d>m?m:d,p=g>p?g:p,v=m>v?m:v,g=a*e+u*i+l,m=s*e+c*i+h,f=f>g?g:f,d=d>m?m:d,p=g>p?g:p,v=m>v?m:v,g=a*r+u*i+l,m=s*r+c*i+h,f=f>g?g:f,d=d>m?m:d,p=g>p?g:p,v=m>v?m:v,this.minX=f,this.minY=d,this.maxX=p,this.maxY=v},t.prototype.addVertices=function(t,e,n,r){for(var i=t.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,c=i.tx,l=i.ty,h=this.minX,f=this.minY,d=this.maxX,p=this.maxY,v=n;r>v;v+=2){var g=e[v],m=e[v+1],y=o*g+s*m+c,_=u*m+a*g+l;h=h>y?y:h,f=f>_?_:f,d=y>d?y:d,p=_>p?_:p}this.minX=h,this.minY=f,this.maxX=d,this.maxY=p},t.prototype.addBounds=function(t){var e=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>i?t.maxY:i},t.prototype.addBoundsMask=function(t,e){var n=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,i=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i>=n&&o>=r){var a=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=a>n?n:a,this.minY=s>r?r:s,this.maxX=i>u?i:u,this.maxY=o>c?o:c}},t.prototype.addBoundsArea=function(t,e){var n=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,i=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i>=n&&o>=r){var a=this.minX,s=this.minY,u=this.maxX,c=this.maxY;this.minX=a>n?n:a,this.minY=s>r?r:s,this.maxX=i>u?i:u,this.maxY=o>c?o:c}},t}();e["default"]=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(204),c=r(u),l=n(174),h=n(205),f=r(h),d=n(209),p=r(d),v=n(211),g=r(v),m=n(202),y=r(m),_=n(175),b=function(t){function e(){i(this,e);var n=o(this,t.call(this)),r=f["default"].TRANSFORM_MODE===l.TRANSFORM_MODE.STATIC?p["default"]:g["default"];return n.tempDisplayObjectParent=null,n.transform=new r,n.alpha=1,n.visible=!0,n.renderable=!0,n.parent=null,n.worldAlpha=1,n.filterArea=null,n._filters=null,n._enabledFilters=null,n._bounds=new y["default"],n._boundsID=0,n._lastBoundsID=-1,n._boundsRect=null,n._localBoundsRect=null,n._mask=null,n._destroyed=!1,n}return a(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new _.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new _.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=n,this.transform=e,r},e.prototype.toGlobal=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1;return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,n,r){return e&&(t=e.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=n?n:1,this.scale.y=r?r:1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=u,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},s(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(c["default"]);e["default"]=b,b.prototype.displayObjectUpdateTransform=b.prototype.updateTransform},function(t,e,n){"use strict";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(){this._events=new r,this._eventsCount=0}var a=Object.prototype.hasOwnProperty,s="~";Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(s=!1)),o.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)a.call(t,e)&&n.push(s?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t,e){var n=s?s+t:t,r=this._events[n];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);o>i;i++)a[i]=r[i].fn;return a},o.prototype.emit=function(t,e,n,r,i,o){var a=s?s+t:t;if(!this._events[a])return!1;var u,c,l=this._events[a],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,n),!0;case 4:return l.fn.call(l.context,e,n,r),!0;case 5:return l.fn.call(l.context,e,n,r,i),!0;case 6:return l.fn.call(l.context,e,n,r,i,o),!0}for(c=1,u=new Array(h-1);h>c;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var f,d=l.length;for(c=0;d>c;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),h){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,n);break;case 4:l[c].fn.call(l[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(h-1);h>f;f++)u[f-1]=arguments[f];l[c].fn.apply(l[c].context,u)}}return!0},o.prototype.on=function(t,e,n){var r=new i(e,n||this),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),o=s?s+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},o.prototype.removeListener=function(t,e,n,i){var o=s?s+t:t;if(!this._events[o])return this;if(!e)return 0===--this._eventsCount?this._events=new r:delete this._events[o],this;var a=this._events[o];if(a.fn)a.fn!==e||i&&!a.once||n&&a.context!==n||(0===--this._eventsCount?this._events=new r:delete this._events[o]);else{for(var u=0,c=[],l=a.length;l>u;u++)(a[u].fn!==e||i&&!a[u].once||n&&a[u].context!==n)&&c.push(a[u]);c.length?this._events[o]=1===c.length?c[0]:c:0===--this._eventsCount?this._events=new r:delete this._events[o]}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=s?s+t:t,this._events[e]&&(0===--this._eventsCount?this._events=new r:delete this._events[e])):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prototype.setMaxListeners=function(){return this},o.prefixed=s,o.EventEmitter=o,t.exports=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(206),o=r(i),a=n(208),s=r(a);e["default"]={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:o["default"](32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:s["default"](),MESH_CANVAS_PADDING:0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){return a["default"].tablet||a["default"].phone?4:t}e.__esModule=!0,e["default"]=i;var o=n(207),a=r(o)},function(t,e,n){var r,i,o;/**
	 * isMobile.js v0.4.1
	 *
	 * A simple library to detect Apple phones and tablets,
	 * Android phones and tablets, other mobile devices (like blackberry, mini-opera and windows phone),
	 * and any kind of seven inch device, via user agent sniffing.
	 *
	 * @author: Kai Mallea (kmallea@gmail.com)
	 *
	 * @license: http://creativecommons.org/publicdomain/zero/1.0/
	 */
!function(n){var a=/iPhone/i,s=/iPod/i,u=/iPad/i,c=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,l=/Android/i,h=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,f=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,d=/Windows Phone/i,p=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,v=/BlackBerry/i,g=/BB10/i,m=/Opera Mini/i,y=/(CriOS|Chrome)(?=.*\bMobile\b)/i,_=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,b=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(t,e){return t.test(e)},w=function(t){var e=t||navigator.userAgent,n=e.split("[FBAN");return"undefined"!=typeof n[1]&&(e=n[0]),n=e.split("Twitter"),"undefined"!=typeof n[1]&&(e=n[0]),this.apple={phone:x(a,e),ipod:x(s,e),tablet:!x(a,e)&&x(u,e),device:x(a,e)||x(s,e)||x(u,e)},this.amazon={phone:x(h,e),tablet:!x(h,e)&&x(f,e),device:x(h,e)||x(f,e)},this.android={phone:x(h,e)||x(c,e),tablet:!x(h,e)&&!x(c,e)&&(x(f,e)||x(l,e)),device:x(h,e)||x(f,e)||x(c,e)||x(l,e)},this.windows={phone:x(d,e),tablet:x(p,e),device:x(d,e)||x(p,e)},this.other={blackberry:x(v,e),blackberry10:x(g,e),opera:x(m,e),firefox:x(_,e),chrome:x(y,e),device:x(v,e)||x(g,e)||x(m,e)||x(_,e)||x(y,e)},this.seven_inch=x(b,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},T=function(){var t=new w;return t.Class=w,t};"undefined"!=typeof t&&t.exports&&"undefined"==typeof window?t.exports=w:"undefined"!=typeof t&&t.exports&&"undefined"!=typeof window?t.exports=T():(i=[],r=n.isMobile=T(),o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o)))}(this)},function(t,e){"use strict";function n(){var t=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!t}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(175),c=n(210),l=r(c),h=function(t){function e(){i(this,e);var n=o(this,t.call(this));return n.position=new u.ObservablePoint(n.onChange,n,0,0),n.scale=new u.ObservablePoint(n.onChange,n,1,1),n.pivot=new u.ObservablePoint(n.onChange,n,0,0),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n._localID=0,n._currentLocalID=0,n}return a(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(l["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(175),o=function(){function t(){r(this,t),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,n=this.worldTransform,r=this.localTransform;n.a=r.a*e.a+r.b*e.c,n.b=r.a*e.b+r.b*e.d,n.c=r.c*e.a+r.d*e.c,n.d=r.c*e.b+r.d*e.d,n.tx=r.tx*e.a+r.ty*e.c+e.tx,n.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();e["default"]=o,o.prototype.updateWorldTransform=o.prototype.updateTransform,o.IDENTITY=new o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(175),c=n(210),l=r(c),h=function(t){function e(){i(this,e);var n=o(this,t.call(this));return n.position=new u.Point(0,0),n.scale=new u.Point(1,1),n.skew=new u.ObservablePoint(n.updateSkew,n,0,0),n.pivot=new u.Point(0,0),n._rotation=0,n._cx=1,n._sx=0,n._cy=0,n._sy=1,n}return a(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},s(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(l["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(213),c=n(203),l=r(c),h=function(t){function e(){i(this,e);var n=o(this,t.call(this));return n.children=[],n}return a(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var n=0;e>n;n++)this.addChild(arguments[n]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(0>e||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var n=this.getChildIndex(t),r=this.getChildIndex(e);this.children[n]=e,this.children[r]=t,this.onChildrenChange(r>n?n:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(0>e||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var n=this.getChildIndex(t);u.removeItems(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var n=0;e>n;n++)this.removeChild(arguments[n]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,u.removeItems(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,u.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=t,r="number"==typeof e?e:this.children.length,i=r-n,o=void 0;if(i>0&&r>=i){o=this.children.splice(n,i);for(var a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var s=0;s<o.length;++s)o[s].emit("removed",this);return o}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;e>t;++t){var n=this.children[t];n.visible&&n.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,n=this.children.length;n>e;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}n&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var i=0,o=this.children.length;o>i;i++)this.children[i].renderWebGL(t);t.flush(),n&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,n=this.children.length;n>e;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var n="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(n)for(var i=0;i<r.length;++i)r[i].destroy(e)},s(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(l["default"]);e["default"]=h,h.prototype.containerUpdateTransform=h.prototype.updateTransform},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(){return++B}function a(t,e){return e=e||[],e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function s(t){return t=t.toString(16),t="000000".substr(0,6-t.length)+t,"#"+t}function u(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}function c(t,e){var n=S["default"].RETINA_PREFIX.exec(t);return n?parseFloat(n[1]):void 0!==e?e:1}function l(t){var e=T.DATA_URI.exec(t);return e?{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}:void 0}function h(t){var e=T.URL_FILE_EXTENSION.exec(t);return e?e[1].toLowerCase():void 0}function f(t){var e=T.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}function d(){X=!0}function p(t){if(!X){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+T.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+T.VERSION+" - "+t+" - http://www.pixijs.com/");X=!0}}function v(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!n||!n.getContextAttributes().stencil);if(n){var i=n.getExtension("WEBGL_lose_context");i&&i.loseContext()}return n=null,r}catch(o){return!1}}function g(t){return 0===t?0:0>t?-1:1}function m(){var t=void 0;for(t in H)H[t].destroy();for(t in W)W[t].destroy()}function y(){var t=void 0;for(t in H)delete H[t];for(t in W)delete W[t]}function _(t,e){return G[e?1:0][t]}function b(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var n=t>>16&255,r=t>>8&255,i=255&t;return n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0,(255*e<<24)+(n<<16)+(r<<8)+i}function x(t,e,n,r){return n=n||new Float32Array(4),r||void 0===r?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function w(t,e,n,r){return n=n||new Float32Array(4),n[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(255&t)/255,(r||void 0===r)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=o,e.hex2rgb=a,e.hex2string=s,e.rgb2hex=u,e.getResolutionOfUrl=c,e.decomposeDataUri=l,e.getUrlFileExtension=h,e.getSvgSize=f,e.skipHello=d,e.sayHello=p,e.isWebGLSupported=v,e.sign=g,e.destroyTextureCache=m,e.clearTextureCache=y,e.correctBlendMode=_,e.premultiplyTint=b,e.premultiplyRgba=x,e.premultiplyTintToRgba=w;var T=n(174),E=n(205),S=i(E),O=n(204),M=i(O),C=n(214),P=i(C),k=n(215),A=r(k),I=n(207),R=r(I),D=n(216),j=i(D),L=n(217),N=i(L),F=n(218),U=i(F),B=0,X=!1;e.isMobile=R,e.removeItems=j["default"],e.EventEmitter=M["default"],e.pluginTarget=P["default"],e.mixins=A,e.earcut=U["default"];var H=e.TextureCache=Object.create(null),W=e.BaseTextureCache=Object.create(null),G=e.premultiplyBlendMode=N["default"]()},function(t,e){"use strict";function n(t){t.__plugins={},t.registerPlugin=function(e,n){t.__plugins[e]=n},t.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var e in t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}e.__esModule=!0,e["default"]={mixin:function(t){n(t)}}},function(t,e){"use strict";function n(t,e){if(t&&e)for(var n=Object.keys(e),r=0;r<n.length;++r){var i=n[r];Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}}function r(t,e){o.push(t,e)}function i(){for(var t=0;t<o.length;t+=2)n(o[t],o[t+1]);o.length=0}e.__esModule=!0,e.mixin=n,e.delayMixin=r,e.performMixins=i;var o=[]},function(t,e){"use strict";function n(t,e,n){var r,i=t.length;if(!(e>=i||0===n)){n=e+n>i?i-e:n;var o=i-n;for(r=e;o>r;++r)t[r]=t[r+n];t.length=o}}t.exports=n},function(t,e,n){"use strict";function r(){for(var t=[],e=[],n=0;32>n;n++)t[n]=n,e[n]=n;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}e.__esModule=!0,e["default"]=r;var i=n(174)},function(t,e){"use strict";function n(t,e,n){n=n||2;var i=e&&e.length,a=i?e[0]*n:t.length,s=r(t,0,a,n,!0),u=[];if(!s)return u;var c,h,f,d,p,v,g;if(i&&(s=l(t,e,s,n)),t.length>80*n){c=f=t[0],h=d=t[1];for(var m=n;a>m;m+=n)p=t[m],v=t[m+1],c>p&&(c=p),h>v&&(h=v),p>f&&(f=p),v>d&&(d=v);g=Math.max(f-c,d-h),g=0!==g?1/g:0}return o(s,u,n,c,h,g),u}function r(t,e,n,r,i){var o,a;if(i===k(t,e,n,r)>0)for(o=e;n>o;o+=r)a=M(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=M(o,t[o],t[o+1],a);return a&&x(a,a.next)&&(C(a),a=a.next),a}function i(t,e){if(!t)return t;e||(e=t);var n,r=t;do if(n=!1,r.steiner||!x(r,r.next)&&0!==b(r.prev,r,r.next))r=r.next;else{if(C(r),r=e=r.prev,r===r.next)break;n=!0}while(n||r!==e);return e}function o(t,e,n,r,l,h,f){if(t){!f&&h&&p(t,r,l,h);for(var d,v,g=t;t.prev!==t.next;)if(d=t.prev,v=t.next,h?s(t,r,l,h):a(t))e.push(d.i/n),e.push(t.i/n),e.push(v.i/n),C(t),t=v.next,g=v.next;else if(t=v,t===g){f?1===f?(t=u(t,e,n),o(t,e,n,r,l,h,2)):2===f&&c(t,e,n,r,l,h):o(i(t),e,n,r,l,h,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(b(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(y(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&b(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function s(t,e,n,r){var i=t.prev,o=t,a=t.next;if(b(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,c=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,l=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=g(s,u,e,n,r),f=g(c,l,e,n,r),d=t.prevZ,p=t.nextZ;d&&d.z>=h&&p&&p.z<=f;){if(d!==t.prev&&d!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&b(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=f;){if(p!==t.prev&&p!==t.next&&y(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&b(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function u(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!x(i,o)&&w(i,r,r.next,o)&&E(i,o)&&E(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),C(r),C(r.next),r=t=o),r=r.next}while(r!==t);return r}function c(t,e,n,r,a,s){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&_(u,c)){var l=O(u,c);return u=i(u,u.next),l=i(l,l.next),o(u,e,n,r,a,s),void o(l,e,n,r,a,s)}c=c.next}u=u.next}while(u!==t)}function l(t,e,n,o){var a,s,u,c,l,d=[];for(a=0,s=e.length;s>a;a++)u=e[a]*o,c=s-1>a?e[a+1]*o:t.length,l=r(t,u,c,o,!1),l===l.next&&(l.steiner=!0),d.push(m(l));for(d.sort(h),a=0;a<d.length;a++)f(d[a],n),n=i(n,n.next);return n}function h(t,e){return t.x-e.x}function f(t,e){if(e=d(t,e)){var n=O(e,t);i(n,n.next)}}function d(t,e){var n,r=e,i=t.x,o=t.y,a=-(1/0);do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(i>=s&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n.prev;var u,c=n,l=n.x,h=n.y,f=1/0;for(r=n.next;r!==c;)i>=r.x&&r.x>=l&&i!==r.x&&y(h>o?i:a,o,l,h,h>o?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),(f>u||u===f&&r.x>n.x)&&E(r,t)&&(n=r,f=u)),r=r.next;return n}function p(t,e,n,r){var i=t;do null===i.z&&(i.z=g(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,v(i)}function v(t){var e,n,r,i,o,a,s,u,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;c>e&&(s++,r=r.nextZ,r);e++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1);return t}function g(t,e,n,r,i){return t=32767*(t-n)*i,e=32767*(e-r)*i,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function m(t){var e=t,n=t;do e.x<n.x&&(n=e),e=e.next;while(e!==t);return n}function y(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!T(t,e)&&E(t,e)&&E(e,t)&&S(t,e)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){return x(t,e)&&x(n,r)||x(t,r)&&x(n,e)?!0:b(t,e,n)>0!=b(t,e,r)>0&&b(n,r,t)>0!=b(n,r,e)>0}function T(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function E(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function S(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function O(t,e){var n=new P(t.i,t.x,t.y),r=new P(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function M(t,e,n,r){var i=new P(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function P(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(t,e,n,r){for(var i=0,o=e,a=n-r;n>o;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}t.exports=n,t.exports["default"]=n,n.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(k(t,0,o,n));if(i)for(var s=0,u=e.length;u>s;s++){var c=e[s]*n,l=u-1>s?e[s+1]*n:t.length;a-=Math.abs(k(t,c,l,n))}var h=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,d=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},n.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;e>a;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(175),c=n(213),l=n(174),h=n(220),f=r(h),d=n(212),p=r(d),v=new u.Point,g=function(t){function e(n){i(this,e);var r=o(this,t.call(this));return r._anchor=new u.ObservablePoint(r._onAnchorUpdate,r,n?n.defaultAnchor.x:0,n?n.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=l.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=n||f["default"].EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return a(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=c.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=c.sign(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,u=this.vertexData,c=t.trim,l=t.orig,h=this._anchor,f=0,d=0,p=0,v=0;c?(d=c.x-h._x*l.width,f=d+c.width,v=c.y-h._y*l.height,p=v+c.height):(d=-h._x*l.width,f=d+l.width,v=-h._y*l.height,p=v+l.height),u[0]=n*d+i*v+a,u[1]=o*v+r*d+s,u[2]=n*f+i*v+a,u[3]=o*v+r*f+s,u[4]=n*f+i*p+a,u[5]=o*p+r*f+s,u[6]=n*d+i*p+a,u[7]=o*p+r*d+s}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,n=t.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,u=i.d,c=i.tx,l=i.ty,h=-r._x*n.width,f=h+n.width,d=-r._y*n.height,p=d+n.height;e[0]=o*h+s*d+c,e[1]=u*d+a*h+l,e[2]=o*f+s*d+c,e[3]=u*d+a*f+l,e[4]=o*f+s*p+c,e[5]=u*p+a*f+l,e[6]=o*h+s*p+c,e[7]=u*p+a*h+l},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,v);var e=this._texture.orig.width,n=this._texture.orig.height,r=-e*this.anchor.x,i=0;return v.x>=r&&v.x<r+e&&(i=-n*this.anchor.y,v.y>=i&&v.y<i+n)?!0:!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var n="boolean"==typeof e?e:e&&e.texture;if(n){var r="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!r)}this._texture=null,this.shader=null},e.from=function(t){return new e(f["default"].from(t))},e.fromFrame=function(t){var n=c.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(n)},e.fromImage=function(t,n,r){return new e(f["default"].fromImage(t,n,r))},s(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=c.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=c.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||f["default"].EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(p["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new w(new h["default"](t))}function u(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}e.__esModule=!0;var c=function(){function t(t,e){for(var n=0;n<e.length;n++){
var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(221),h=r(l),f=n(229),d=r(f),p=n(233),v=r(p),g=n(204),m=r(g),y=n(175),_=n(213),b=n(205),x=r(b),w=function(t){function e(n,r,a,s,u,c){i(this,e);var l=o(this,t.call(this));if(l.noFrame=!1,r||(l.noFrame=!0,r=new y.Rectangle(0,0,1,1)),n instanceof e&&(n=n.baseTexture),l.baseTexture=n,l._frame=r,l.trim=s,l.valid=!1,l.requiresUpdate=!1,l._uvs=null,l.orig=a||r,l._rotate=Number(u||0),u===!0)l._rotate=2;else if(l._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return n.hasLoaded?(l.noFrame&&(r=new y.Rectangle(0,0,n.width,n.height),n.on("update",l.onBaseTextureUpdated,l)),l.frame=r):n.once("loaded",l.onBaseTextureLoaded,l),l.defaultAnchor=c?new y.Point(c.x,c.y):new y.Point(0,0),l._updateID=0,l.transform=null,l.textureCacheIds=[],l}return a(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.frame=this.noFrame?new y.Rectangle(0,0,t.width,t.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(_.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new v["default"]),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,n,r,i){var o=_.TextureCache[t];return o||(o=new e(h["default"].fromImage(t,n,r,i)),e.addToCache(o,t)),o},e.fromFrame=function(t){var e=_.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(h["default"].fromCanvas(t,n,r))},e.fromVideo=function(t,n){return"string"==typeof t?e.fromVideoUrl(t,n):new e(d["default"].fromVideo(t,n))},e.fromVideoUrl=function(t,n){return new e(d["default"].fromUrl(t,n))},e.from=function(t){if("string"==typeof t){var n=_.TextureCache[t];if(!n){var r=null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return r?e.fromVideoUrl(t):e.fromImage(t)}return n}return t instanceof HTMLImageElement?new e(h["default"].from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,x["default"].SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof h["default"]?new e(t):t},e.fromLoader=function(t,n,r){var i=new h["default"](t,void 0,_.getResolutionOfUrl(n)),o=new e(i);return i.imageUrl=n,r||(r=n),h["default"].addToCache(o.baseTexture,r),e.addToCache(o,r),r!==n&&(h["default"].addToCache(o.baseTexture,n),e.addToCache(o,n)),o},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),_.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),_.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=_.TextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete _.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)_.TextureCache[t.textureCacheIds[r]]===t&&delete _.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},c(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,n=t.y,r=t.width,i=t.height,o=e+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",u="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,c="Y: "+n+" + "+i+" = "+(n+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(u+" "+s+" "+c))}this.valid=r&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(m["default"]);e["default"]=w,w.EMPTY=new w(new h["default"]),u(w.EMPTY),u(w.EMPTY.baseTexture),w.WHITE=s(),u(w.WHITE),u(w.WHITE.baseTexture)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(213),u=n(205),c=r(u),l=n(204),h=r(l),f=n(222),d=r(f),p=n(228),v=r(p),g=function(t){function e(n,r,a){i(this,e);var u=o(this,t.call(this));return u.uid=s.uid(),u.touched=0,u.resolution=a||c["default"].RESOLUTION,u.width=100,u.height=100,u.realWidth=100,u.realHeight=100,u.scaleMode=void 0!==r?r:c["default"].SCALE_MODE,u.hasLoaded=!1,u.isLoading=!1,u.source=null,u.origSource=null,u.imageType=null,u.sourceScale=1,u.premultipliedAlpha=!0,u.imageUrl=null,u.isPowerOfTwo=!1,u.mipmap=c["default"].MIPMAP_TEXTURES,u.wrapMode=c["default"].WRAP_MODE,u._glTextures={},u._enabled=0,u._virtalBoundId=-1,u._destroyed=!1,u.textureCacheIds=[],n&&u.loadSource(n),u}return a(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=v["default"].isPow2(this.realWidth)&&v["default"].isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var n=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),n&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){return r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading?(r.isLoading=!1,r._sourceLoaded(),"svg"===r.imageType?void r._loadSvgSource():void r.emit("loaded",r)):void 0},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=s.decomposeDataUri(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var n=t.subType.split("+")[0];if(e=s.getUrlFileExtension("."+n),!e)throw new Error("Invalid image type in data URI.")}else e=s.getUrlFileExtension(this.imageUrl),e||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=s.decomposeDataUri(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var n=s.getSvgSize(t),r=n.width,i=n.height;if(!r||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(i*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+s.uid(),o.getContext("2d").drawImage(this.source,0,0,r,i,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,e.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,n,r,i){var o=s.BaseTextureCache[t];if(!o){var a=new Image;void 0===n&&0!==t.indexOf("data:")?a.crossOrigin=d["default"](t):n&&(a.crossOrigin="string"==typeof n?n:"anonymous"),o=new e(a,r),o.imageUrl=t,i&&(o.sourceScale=i),o.resolution=s.getResolutionOfUrl(t),a.src=t,e.addToCache(o,t)}return o},e.fromCanvas=function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=r+"_"+s.uid());var i=s.BaseTextureCache[t._pixiId];return i||(i=new e(t,n),e.addToCache(i,t._pixiId)),i},e.from=function(t,n,r){if("string"==typeof t)return e.fromImage(t,void 0,n,r);if(t instanceof HTMLImageElement){var i=t.src,o=s.BaseTextureCache[i];return o||(o=new e(t,n),o.imageUrl=i,r&&(o.sourceScale=r),o.resolution=s.getResolutionOfUrl(i),e.addToCache(o,i)),o}return t instanceof HTMLCanvasElement?e.fromCanvas(t,n):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete s.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e}(h["default"]);e["default"]=g},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t,t=a["default"].parse(s.href);var n=!t.port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&n&&t.protocol===e.protocol?"":"anonymous"}e.__esModule=!0,e["default"]=i;var o=n(223),a=r(o),s=void 0},function(t,e,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(t,e,n){if(t&&c(t)&&t instanceof r)return t;var i=new r;return i.parse(t,e,n),i}function o(t){return u(t)&&(t=i(t)),t instanceof r?t.format():r.prototype.format.call(t)}function a(t,e){return i(t,!1,!0).resolve(e)}function s(t,e){return t?i(t,!1,!0).resolveObject(e):e}function u(t){return"string"==typeof t}function c(t){return"object"==typeof t&&null!==t}function l(t){return null===t}function h(t){return null==t}
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var f=n(224);e.parse=i,e.resolve=a,e.resolveObject=s,e.format=o,e.Url=r;var d=/^([a-z0-9.+-]+:)/i,p=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","	"],g=["{","}","|","\\","^","`"].concat(v),m=["'"].concat(g),y=["%","/","?",";","#"].concat(m),_=["/","?","#"],b=255,x=/^[a-z0-9A-Z_-]{0,63}$/,w=/^([a-z0-9A-Z_-]{0,63})(.*)$/,T={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},S={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=n(225);r.prototype.parse=function(t,e,n){if(!u(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t;r=r.trim();var i=d.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===r.substr(0,2);!a||i&&E[i]||(r=r.substr(2),this.slashes=!0)}if(!E[i]&&(a||i&&!S[i])){for(var s=-1,c=0;c<_.length;c++){var l=r.indexOf(_[c]);-1!==l&&(-1===s||s>l)&&(s=l)}var h,p;p=-1===s?r.lastIndexOf("@"):r.lastIndexOf("@",s),-1!==p&&(h=r.slice(0,p),r=r.slice(p+1),this.auth=decodeURIComponent(h)),s=-1;for(var c=0;c<y.length;c++){var l=r.indexOf(y[c]);-1!==l&&(-1===s||s>l)&&(s=l)}-1===s&&(s=r.length),this.host=r.slice(0,s),r=r.slice(s),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var g=this.hostname.split(/\./),c=0,M=g.length;M>c;c++){var C=g[c];if(C&&!C.match(x)){for(var P="",k=0,A=C.length;A>k;k++)P+=C.charCodeAt(k)>127?"x":C[k];if(!P.match(x)){var I=g.slice(0,c),R=g.slice(c+1),D=C.match(w);D&&(I.push(D[1]),R.unshift(D[2])),R.length&&(r="/"+R.join(".")+r),this.hostname=I.join(".");break}}}if(this.hostname=this.hostname.length>b?"":this.hostname.toLowerCase(),!v){for(var j=this.hostname.split("."),L=[],c=0;c<j.length;++c){var N=j[c];L.push(N.match(/[^A-Za-z0-9_-]/)?"xn--"+f.encode(N):N)}this.hostname=L.join(".")}var F=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+F,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!T[o])for(var c=0,M=m.length;M>c;c++){var B=m[c],X=encodeURIComponent(B);X===B&&(X=escape(B)),r=r.split(B).join(X)}var H=r.indexOf("#");-1!==H&&(this.hash=r.substr(H),r=r.slice(0,H));var W=r.indexOf("?");if(-1!==W?(this.search=r.substr(W),this.query=r.substr(W+1),e&&(this.query=O.parse(this.query)),r=r.slice(0,W)):e&&(this.search="",this.query={}),r&&(this.pathname=r),S[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",N=this.search||"";this.path=F+N}return this.href=this.format(),this},r.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=O.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||S[e])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),e+i+n+a+r},r.prototype.resolve=function(t){return this.resolveObject(i(t,!1,!0)).format()},r.prototype.resolveObject=function(t){if(u(t)){var e=new r;e.parse(t,!1,!0),t=e}var n=new r;if(Object.keys(this).forEach(function(t){n[t]=this[t]},this),n.hash=t.hash,""===t.href)return n.href=n.format(),n;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(n[e]=t[e])}),S[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(t.protocol&&t.protocol!==n.protocol){if(!S[t.protocol])return Object.keys(t).forEach(function(e){n[e]=t[e]}),n.href=n.format(),n;if(n.protocol=t.protocol,t.host||E[t.protocol])n.pathname=t.pathname;else{for(var i=(t.pathname||"").split("/");i.length&&!(t.host=i.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var o=n.pathname||"",a=n.search||"";n.path=o+a}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var s=n.pathname&&"/"===n.pathname.charAt(0),c=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=c||s||n.host&&t.pathname,d=f,p=n.pathname&&n.pathname.split("/")||[],i=t.pathname&&t.pathname.split("/")||[],v=n.protocol&&!S[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===p[0]?p[0]=n.host:p.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===i[0]?i[0]=t.host:i.unshift(t.host)),t.host=null),f=f&&(""===i[0]||""===p[0])),c)n.host=t.host||""===t.host?t.host:n.host,n.hostname=t.hostname||""===t.hostname?t.hostname:n.hostname,n.search=t.search,n.query=t.query,p=i;else if(i.length)p||(p=[]),p.pop(),p=p.concat(i),n.search=t.search,n.query=t.query;else if(!h(t.search)){if(v){n.hostname=n.host=p.shift();var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return n.search=t.search,n.query=t.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!p.length)return n.pathname=null,n.path=n.search?"/"+n.search:null,n.href=n.format(),n;for(var m=p.slice(-1)[0],y=(n.host||t.host)&&("."===m||".."===m)||""===m,_=0,b=p.length;b>=0;b--)m=p[b],"."==m?p.splice(b,1):".."===m?(p.splice(b,1),_++):_&&(p.splice(b,1),_--);if(!f&&!d)for(;_--;_)p.unshift("..");!f||""===p[0]||p[0]&&"/"===p[0].charAt(0)||p.unshift(""),y&&"/"!==p.join("/").substr(-1)&&p.push("");var x=""===p[0]||p[0]&&"/"===p[0].charAt(0);if(v){n.hostname=n.host=x?"":p.length?p.shift():"";var g=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;g&&(n.auth=g.shift(),n.host=n.hostname=g.shift())}return f=f||n.host&&p.length,f&&!x&&p.unshift(""),p.length?n.pathname=p.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var t=this.host,e=p.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){var r;(function(t,i){!function(o){function a(t){throw RangeError(I[t])}function s(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function u(t,e){var n=t.split("@"),r="";n.length>1&&(r=n[0]+"@",t=n[1]),t=t.replace(A,".");var i=t.split("."),o=s(i,e).join(".");return r+o}function c(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function l(t){return s(t,function(t){var e="";return t>65535&&(t-=65536,e+=j(t>>>10&1023|55296),t=56320|1023&t),e+=j(t)}).join("")}function h(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:x}function f(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function d(t,e,n){var r=0;for(t=n?D(t/S):t>>1,t+=D(t/e);t>R*T>>1;r+=x)t=D(t/R);return D(r+(R+1)*t/(t+E))}function p(t){var e,n,r,i,o,s,u,c,f,p,v=[],g=t.length,m=0,y=M,_=O;for(n=t.lastIndexOf(C),0>n&&(n=0),r=0;n>r;++r)t.charCodeAt(r)>=128&&a("not-basic"),v.push(t.charCodeAt(r));for(i=n>0?n+1:0;g>i;){for(o=m,s=1,u=x;i>=g&&a("invalid-input"),c=h(t.charCodeAt(i++)),(c>=x||c>D((b-m)/s))&&a("overflow"),m+=c*s,f=_>=u?w:u>=_+T?T:u-_,!(f>c);u+=x)p=x-f,s>D(b/p)&&a("overflow"),s*=p;e=v.length+1,_=d(m-o,e,0==o),D(m/e)>b-y&&a("overflow"),y+=D(m/e),m%=e,v.splice(m++,0,y)}return l(v)}function v(t){var e,n,r,i,o,s,u,l,h,p,v,g,m,y,_,E=[];for(t=c(t),g=t.length,e=M,n=0,o=O,s=0;g>s;++s)v=t[s],128>v&&E.push(j(v));for(r=i=E.length,i&&E.push(C);g>r;){for(u=b,s=0;g>s;++s)v=t[s],v>=e&&u>v&&(u=v);for(m=r+1,u-e>D((b-n)/m)&&a("overflow"),n+=(u-e)*m,e=u,s=0;g>s;++s)if(v=t[s],e>v&&++n>b&&a("overflow"),v==e){for(l=n,h=x;p=o>=h?w:h>=o+T?T:h-o,!(p>l);h+=x)_=l-p,y=x-p,E.push(j(f(p+_%y,0))),l=D(_/y);E.push(j(f(l,0))),o=d(n,m,r==i),n=0,++r}++n,++e}return E.join("")}function g(t){return u(t,function(t){return P.test(t)?p(t.slice(4).toLowerCase()):t})}function m(t){return u(t,function(t){return k.test(t)?"xn--"+v(t):t})}var y=("object"==typeof e&&e&&!e.nodeType&&e,"object"==typeof t&&t&&!t.nodeType&&t,"object"==typeof i&&i);(y.global===y||y.window===y||y.self===y)&&(o=y);var _,b=2147483647,x=36,w=1,T=26,E=38,S=700,O=72,M=128,C="-",P=/^xn--/,k=/[^\x20-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=x-w,D=Math.floor,j=String.fromCharCode;_={version:"1.3.2",ucs2:{decode:c,encode:l},decode:p,encode:v,toASCII:m,toUnicode:g},r=function(){return _}.call(e,n,e,t),!(void 0!==r&&(t.exports=r))}(this)}).call(e,n(28)(t),function(){return this}())},function(t,e,n){"use strict";e.decode=e.parse=n(226),e.encode=e.stringify=n(227)},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,r,i){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var a=/\+/g;t=t.split(e);var s=1e3;i&&"number"==typeof i.maxKeys&&(s=i.maxKeys);var u=t.length;s>0&&u>s&&(u=s);for(var c=0;u>c;++c){var l,h,f,d,p=t[c].replace(a,"%20"),v=p.indexOf(r);v>=0?(l=p.substr(0,v),h=p.substr(v+1)):(l=p,h=""),f=decodeURIComponent(l),d=decodeURIComponent(h),n(o,f)?Array.isArray(o[f])?o[f].push(d):o[f]=[o[f],d]:o[f]=d}return o}},function(t,e){
// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,r,i){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(i){var o=encodeURIComponent(n(i))+r;return Array.isArray(t[i])?t[i].map(function(t){return o+encodeURIComponent(n(t))}).join(e):o+encodeURIComponent(n(t[i]))}).join(e):i?encodeURIComponent(n(i))+r+encodeURIComponent(n(t)):""}},function(t,e){"use strict";"use restrict";function n(t){var e=32;return t&=-t,t&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}var r=32;e.INT_BITS=r,e.INT_MAX=2147483647,e.INT_MIN=-1<<r-1,e.sign=function(t){return(t>0)-(0>t)},e.abs=function(t){var e=t>>r-1;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(e>t)},e.max=function(t,e){return t^(t^e)&-(e>t)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,n;return e=(t>65535)<<4,t>>>=e,n=(t>255)<<3,t>>>=n,e|=n,n=(t>15)<<2,t>>>=n,e|=n,n=(t>3)<<1,t>>>=n,e|=n,e|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,t=(858993459&t)+(t>>>2&858993459),16843009*(t+(t>>>4)&252645135)>>>24},e.countTrailingZeros=n,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,t&=15,27030>>>t&1};var i=new Array(256);!function(t){for(var e=0;256>e;++e){var n=e,r=e,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;t[e]=r<<i&255}}(i),e.reverse=function(t){return i[255&t]<<24|i[t>>>8&255]<<16|i[t>>>16&255]<<8|i[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1},e.deinterleave2=function(t,e){return t=t>>>e&1431655765,t=858993459&(t|t>>>1),t=252645135&(t|t>>>2),t=16711935&(t|t>>>4),t=65535&(t|t>>>16),t<<16>>16},e.interleave3=function(t,e,n){return t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t|=e<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),t|n<<2},e.deinterleave3=function(t,e){return t=t>>>e&1227133513,t=3272356035&(t|t>>>2),t=251719695&(t|t>>>4),t=4278190335&(t|t>>>8),t=1023&(t|t>>>16),t<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>n(t)+1}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){e||(t=t.split("?").shift().toLowerCase(),e="video/"+t.substr(t.lastIndexOf(".")+1));var n=document.createElement("source");return n.src=t,n.type=e,n}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(221),l=r(c),h=n(213),f=n(230),d=n(174),p=n(222),v=r(p),g=function(t){function e(n,r){if(i(this,e),!n)throw new Error("No video source element specified.");(n.readyState===n.HAVE_ENOUGH_DATA||n.readyState===n.HAVE_FUTURE_DATA)&&n.width&&n.height&&(n.complete=!0);var a=o(this,t.call(this,n,r));return a.width=n.videoWidth,a.height=n.videoHeight,a._autoUpdate=!0,a._isAutoUpdating=!1,a.autoPlay=!0,a.update=a.update.bind(a),a._onCanPlay=a._onCanPlay.bind(a),n.addEventListener("play",a._onPlayStart.bind(a)),n.addEventListener("pause",a._onPlayStop.bind(a)),a.hasLoaded=!1,a.__loaded=!1,a._isSourceReady()?a._onCanPlay():(n.addEventListener("canplay",a._onCanPlay),n.addEventListener("canplaythrough",a._onCanPlay)),a}return a(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(f.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&f.shared.remove(this.update,this),this.source&&this.source._pixiId&&(l["default"].removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,n){t._pixiId||(t._pixiId="video_"+h.uid());var r=h.BaseTextureCache[t._pixiId];return r||(r=new e(t,n),l["default"].addToCache(r,t._pixiId)),r},e.fromUrl=function(t,n,r){var i=document.createElement("video");i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline","");var o=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==o.indexOf("data:")?i.crossOrigin=v["default"](o):r&&(i.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)i.appendChild(s(t[a].src||t[a],t[a].mime));else i.appendChild(s(o,t.mime));return i.load(),e.fromVideo(i,n)},u(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(f.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(f.shared.add(this.update,this,d.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(l["default"]);e["default"]=g,g.fromUrls=g.fromUrl},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.Ticker=e.shared=void 0;var i=n(231),o=r(i),a=new o["default"];a.autoStart=!0,a.destroy=function(){},e.shared=a,e.Ticker=o["default"]},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(205),s=r(a),u=n(174),c=n(232),l=r(c),h=function(){function t(){var e=this;i(this,t),this._head=new l["default"](null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/s["default"].TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new l["default"](t,e,n))},t.prototype.addOnce=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.UPDATE_PRIORITY.NORMAL;return this._addListener(new l["default"](t,e,n,!0))},t.prototype._addListener=function(t){var e=this._head.next,n=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}else t.connect(n);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var n=this._head.next;n;)n=n.match(t,e)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*s["default"].TARGET_FPMS*this.speed;for(var n=this._head,r=n.next;r;)r=r.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},o(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,s["default"].TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();e["default"]=h},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;n(this,t),this.fn=e,this.context=r,this.priority=i,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(179),a=r(o),s=function(){function t(){i(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,n){var r=e.width,i=e.height;if(n){var o=t.width/2/r,s=t.height/2/i,u=t.x/r+o,c=t.y/i+s;n=a["default"].add(n,a["default"].NW),this.x0=u+o*a["default"].uX(n),this.y0=c+s*a["default"].uY(n),n=a["default"].add(n,2),this.x1=u+o*a["default"].uX(n),this.y1=c+s*a["default"].uY(n),n=a["default"].add(n,2),this.x2=u+o*a["default"].uX(n),this.y2=c+s*a["default"].uY(n),n=a["default"].add(n,2),this.x3=u+o*a["default"].uX(n),this.y3=c+s*a["default"].uY(n)}else this.x0=t.x/r,this.y0=t.y/i,this.x1=(t.x+t.width)/r,this.y1=t.y/i,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/i,this.x3=t.x/r,this.y3=(t.y+t.height)/i;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(235),a=r(o),s=n(174),u=n(175),c=n(243),l=r(c),h=new u.Matrix,f=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,n=this.renderer,r=e._frame.width,i=e._frame.height,o=t.transform.worldTransform,a=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(n.setBlendMode(t.blendMode),e.valid)){n.context.globalAlpha=t.worldAlpha;var f=e.baseTexture.scaleMode===s.SCALE_MODES.LINEAR;n.smoothProperty&&n.context[n.smoothProperty]!==f&&(n.context[n.smoothProperty]=f),e.trim?(a=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(a=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(o.copy(h),o=h,u.GroupD8.matrixAppendRotationInv(o,e.rotate,a,c),a=0,c=0),a-=r/2,c-=i/2,n.roundPixels?(n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution|0,o.ty*n.resolution|0),a=0|a,c=0|c):n.context.setTransform(o.a,o.b,o.c,o.d,o.tx*n.resolution,o.ty*n.resolution);var d=e.baseTexture.resolution;16777215!==t.tint?((t.cachedTint!==t.tint||t.tintedTexture.tintId!==t._texture._updateID)&&(t.cachedTint=t.tint,t.tintedTexture=l["default"].getTintedTexture(t,t.tint)),n.context.drawImage(t.tintedTexture,0,0,r*d,i*d,a*n.resolution,c*n.resolution,r*n.resolution,i*n.resolution)):n.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,r*d,i*d,a*n.resolution,c*n.resolution,r*n.resolution,i*n.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();e["default"]=f,a["default"].registerPlugin("sprite",f)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(236),u=r(s),c=n(239),l=r(c),h=n(240),f=r(h),d=n(241),p=r(d),v=n(213),g=n(174),m=n(205),y=r(m),_=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,"Canvas",n,r,a));return s.type=g.RENDERER_TYPE.CANVAS,s.rootContext=s.view.getContext("2d",{alpha:s.transparent}),s.context=s.rootContext,s.refresh=!0,s.maskManager=new l["default"](s),s.smoothProperty="imageSmoothingEnabled",s.rootContext.imageSmoothingEnabled||(s.rootContext.webkitImageSmoothingEnabled?s.smoothProperty="webkitImageSmoothingEnabled":s.rootContext.mozImageSmoothingEnabled?s.smoothProperty="mozImageSmoothingEnabled":s.rootContext.oImageSmoothingEnabled?s.smoothProperty="oImageSmoothingEnabled":s.rootContext.msImageSmoothingEnabled&&(s.smoothProperty="msImageSmoothingEnabled")),s.initPlugins(),s.blendModes=p["default"](),s._activeBlendMode=null,s.renderingToScreen=!1,s.resize(s.options.width,s.options.height),s}return a(e,t),e.prototype.render=function(t,e,n,r,i){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var o=this.resolution;e?(e=e.baseTexture||e,e._canvasRenderTarget||(e._canvasRenderTarget=new f["default"](e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!i){var s=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=s}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=g.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[g.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==n?n:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=o,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,n){t.prototype.resize.call(this,e,n),this.smoothProperty&&(this.rootContext[this.smoothProperty]=y["default"].SCALE_MODE===g.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(u["default"]);e["default"]=_,v.pluginTarget.mixin(_)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(213),c=n(175),l=n(174),h=n(205),f=r(h),d=n(212),p=r(d),v=n(237),g=r(v),m=n(204),y=r(m),_=new c.Matrix,b=function(t){function e(n,r,a,s){i(this,e);var h=o(this,t.call(this));return u.sayHello(n),"number"==typeof r&&(r=Object.assign({width:r,height:a||f["default"].RENDER_OPTIONS.height},s)),r=Object.assign({},f["default"].RENDER_OPTIONS,r),h.options=r,h.type=l.RENDERER_TYPE.UNKNOWN,h.screen=new c.Rectangle(0,0,r.width,r.height),h.view=r.view||document.createElement("canvas"),h.resolution=r.resolution||f["default"].RESOLUTION,h.transparent=r.transparent,h.autoResize=r.autoResize||!1,h.blendModes=null,h.preserveDrawingBuffer=r.preserveDrawingBuffer,h.clearBeforeRender=r.clearBeforeRender,h.roundPixels=r.roundPixels,h._backgroundColor=0,h._backgroundColorRgba=[0,0,0,0],h._backgroundColorString="#000000",h.backgroundColor=r.backgroundColor||h._backgroundColor,h._tempDisplayObjectParent=new p["default"],h._lastObjectRendered=h._tempDisplayObjectParent,h}return a(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,n,r){r=r||t.getLocalBounds();var i=g["default"].create(0|r.width,0|r.height,e,n);return _.tx=-r.x,_.ty=-r.y,this.render(t,i,!1,_,!!t.parent),i},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=l.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},s(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=u.hex2string(t),u.hex2rgb(t,this._backgroundColorRgba)}}]),e}(y["default"]);e["default"]=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(238),u=r(s),c=n(220),l=r(c),h=function(t){function e(n,r){i(this,e);var a=null;if(!(n instanceof u["default"])){var s=arguments[1],c=arguments[2],l=arguments[3],h=arguments[4];console.warn("Please use RenderTexture.create("+s+", "+c+") instead of the ctor directly."),a=arguments[0],r=null,n=new u["default"](s,c,l,h)}var f=o(this,t.call(this,n,r));return f.legacyRenderer=a,f.valid=!0,f._updateUvs(),f}return a(e,t),e.prototype.resize=function(t,e,n){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,n||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,n,r,i){return new e(new u["default"](t,n,r,i))},e}(l["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(221),u=r(s),c=n(205),l=r(c),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments[2],s=arguments[3];i(this,e);var u=o(this,t.call(this,null,a));return u.resolution=s||l["default"].RESOLUTION,u.width=Math.ceil(n),u.height=Math.ceil(r),u.realWidth=u.width*u.resolution,u.realHeight=u.height*u.resolution,u.scaleMode=void 0!==a?a:l["default"].SCALE_MODE,u.hasLoaded=!0,u._glRenderTargets={},u._canvasRenderTarget=null,u.valid=!1,u}return a(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),(t!==this.width||e!==this.height)&&(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(u["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=n(174),o=function(){function t(e){r(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var n=t.alpha,r=t.transform.worldTransform,i=e.resolution;e.context.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=n},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,n=t.graphicsData.length;if(0!==n){e.beginPath();for(var r=0;n>r;r++){var o=t.graphicsData[r],a=o.shape;if(o.type===i.SHAPES.POLY){var s=a.points;e.moveTo(s[0],s[1]);for(var u=1;u<s.length/2;u++)e.lineTo(s[2*u],s[2*u+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===i.SHAPES.RECT)e.rect(a.x,a.y,a.width,a.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(a.x,a.y,a.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var c=2*a.width,l=2*a.height,h=a.x-c/2,f=a.y-l/2,d=.5522848,p=c/2*d,v=l/2*d,g=h+c,m=f+l,y=h+c/2,_=f+l/2;e.moveTo(h,_),e.bezierCurveTo(h,_-v,y-p,f,y,f),e.bezierCurveTo(y+p,f,g,_-v,g,_),e.bezierCurveTo(g,_+v,y+p,m,y,m),e.bezierCurveTo(y-p,m,h,_+v,h,_),e.closePath()}else if(o.type===i.SHAPES.RREC){var b=a.x,x=a.y,w=a.width,T=a.height,E=a.radius,S=Math.min(w,T)/2|0;E=E>S?S:E,e.moveTo(b,x+E),e.lineTo(b,x+T-E),e.quadraticCurveTo(b,x+T,b+E,x+T),e.lineTo(b+w-E,x+T),e.quadraticCurveTo(b+w,x+T,b+w,x+T-E),e.lineTo(b+w,x+E),e.quadraticCurveTo(b+w,x,b+w-E,x),e.lineTo(b+E,x),e.quadraticCurveTo(b,x,b,x+E),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();e["default"]=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(205),s=r(a),u=function(){function t(e,n,r){i(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s["default"].RESOLUTION,this.resize(e,n)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},o(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s["default"]()?(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="multiply",t[o.BLEND_MODES.SCREEN]="screen",t[o.BLEND_MODES.OVERLAY]="overlay",t[o.BLEND_MODES.DARKEN]="darken",t[o.BLEND_MODES.LIGHTEN]="lighten",t[o.BLEND_MODES.COLOR_DODGE]="color-dodge",t[o.BLEND_MODES.COLOR_BURN]="color-burn",t[o.BLEND_MODES.HARD_LIGHT]="hard-light",t[o.BLEND_MODES.SOFT_LIGHT]="soft-light",t[o.BLEND_MODES.DIFFERENCE]="difference",t[o.BLEND_MODES.EXCLUSION]="exclusion",t[o.BLEND_MODES.HUE]="hue",t[o.BLEND_MODES.SATURATION]="saturate",t[o.BLEND_MODES.COLOR]="color",t[o.BLEND_MODES.LUMINOSITY]="luminosity"):(t[o.BLEND_MODES.NORMAL]="source-over",t[o.BLEND_MODES.ADD]="lighter",t[o.BLEND_MODES.MULTIPLY]="source-over",t[o.BLEND_MODES.SCREEN]="source-over",t[o.BLEND_MODES.OVERLAY]="source-over",t[o.BLEND_MODES.DARKEN]="source-over",t[o.BLEND_MODES.LIGHTEN]="source-over",t[o.BLEND_MODES.COLOR_DODGE]="source-over",t[o.BLEND_MODES.COLOR_BURN]="source-over",t[o.BLEND_MODES.HARD_LIGHT]="source-over",t[o.BLEND_MODES.SOFT_LIGHT]="source-over",t[o.BLEND_MODES.DIFFERENCE]="source-over",t[o.BLEND_MODES.EXCLUSION]="source-over",t[o.BLEND_MODES.HUE]="source-over",t[o.BLEND_MODES.SATURATION]="source-over",t[o.BLEND_MODES.COLOR]="source-over",t[o.BLEND_MODES.LUMINOSITY]="source-over"),t[o.BLEND_MODES.NORMAL_NPM]=t[o.BLEND_MODES.NORMAL],t[o.BLEND_MODES.ADD_NPM]=t[o.BLEND_MODES.ADD],t[o.BLEND_MODES.SCREEN_NPM]=t[o.BLEND_MODES.SCREEN],t}e.__esModule=!0,e["default"]=i;var o=n(174),a=n(242),s=r(a)},function(t,e){"use strict";function n(t){var e=document.createElement("canvas");e.width=6,e.height=1;var n=e.getContext("2d");return n.fillStyle=t,n.fillRect(0,0,6,1),e}function r(){if("undefined"==typeof document)return!1;var t=n("#ff00ff"),e=n("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var i=r.getContext("2d");i.globalCompositeOperation="multiply",i.drawImage(t,0,0),i.drawImage(e,2,0);var o=i.getImageData(2,0,1,1);if(!o)return!1;var a=o.data;return 255===a[0]&&0===a[1]&&0===a[2]}e.__esModule=!0,e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(213),o=n(242),a=r(o),s={getTintedTexture:function(t,e){var n=t._texture;e=s.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);n.tintCache=n.tintCache||{};var i=n.tintCache[r],o=void 0;if(i){if(i.tintId===n._updateID)return n.tintCache[r];o=n.tintCache[r]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(n,e,o),o.tintId=n._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),n.tintCache[r]=a}else n.tintCache[r]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithOverlay:function(t,e,n){var r=n.getContext("2d"),i=t._frame.clone(),o=t.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,n.width=Math.ceil(i.width),n.height=Math.ceil(i.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,i.width,i.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),r.restore()},tintWithPerPixel:function(t,e,n){var r=n.getContext("2d"),o=t._frame.clone(),a=t.baseTexture.resolution;o.x*=a,o.y*=a,o.width*=a,o.height*=a,n.width=Math.ceil(o.width),n.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var s=i.hex2rgb(e),u=s[0],c=s[1],l=s[2],h=r.getImageData(0,0,o.width,o.height),f=h.data,d=0;d<f.length;d+=4)f[d+0]*=u,f[d+1]*=c,f[d+2]*=l;r.putImageData(h,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,n=i.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),i.rgb2hex(n)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:a["default"](),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");

return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(245),u=r(s),c=n(247),l=r(c),h=n(261),f=r(h),d=n(270),p=r(d),v=n(271),g=r(v),m=n(272),y=r(m),_=n(205),b=r(_),x=n(213),w=n(185),T=r(w),E=n(228),S=r(E),O=0,M=0,C=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=b["default"].SPRITE_BATCH_SIZE,r.buffers=[];for(var a=1;a<=S["default"].nextPow2(r.size);a*=2)r.buffers.push(new y["default"](4*a*r.vertByteSize));r.indices=f["default"](r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),b["default"].SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=g["default"](this.MAX_TEXTURES,t)),this.shader=p["default"](t,this.MAX_TEXTURES),this.indexBuffer=T["default"].GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,n=0;n<this.vaoMax;n++){var r=this.vertexBuffers[n]=T["default"].GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&i.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[n]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,n=S["default"].nextPow2(this.currentIndex),r=S["default"].log2(n),i=this.buffers[r],o=this.sprites,a=this.groups,s=i.float32View,u=i.uint32View,c=this.boundTextures,l=this.renderer.boundTextures,h=this.renderer.textureGC.count,f=0,d=void 0,p=void 0,v=1,g=0,m=a[0],y=void 0,_=void 0,w=x.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];m.textureCount=0,m.start=0,m.blend=w,O++;var E=void 0;for(E=0;e>E;++E){var C=l[E];C._enabled!==O?(c[E]=C,C._virtalBoundId=E,C._enabled=O):c[E]=this.renderer.emptyTextures[E]}for(O++,E=0;E<this.currentIndex;++E){var P=o[E];o[E]=null,d=P._texture.baseTexture;var k=x.premultiplyBlendMode[Number(d.premultipliedAlpha)][P.blendMode];if(w!==k&&(w=k,p=null,g=e,O++),p!==d&&(p=d,d._enabled!==O)){if(g===e&&(O++,m.size=E-m.start,g=0,m=a[v++],m.blend=w,m.textureCount=0,m.start=E),d.touched=h,-1===d._virtalBoundId)for(var A=0;e>A;++A){var I=(A+M)%e,R=c[I];if(R._enabled!==O){M++,R._virtalBoundId=-1,d._virtalBoundId=I,c[I]=d;break}}d._enabled=O,m.textureCount++,m.ids[g]=d._virtalBoundId,m.textures[g++]=d}if(y=P.vertexData,_=P._texture._uvs.uvsUint32,this.renderer.roundPixels){var D=this.renderer.resolution;s[f]=(y[0]*D|0)/D,s[f+1]=(y[1]*D|0)/D,s[f+5]=(y[2]*D|0)/D,s[f+6]=(y[3]*D|0)/D,s[f+10]=(y[4]*D|0)/D,s[f+11]=(y[5]*D|0)/D,s[f+15]=(y[6]*D|0)/D,s[f+16]=(y[7]*D|0)/D}else s[f]=y[0],s[f+1]=y[1],s[f+5]=y[2],s[f+6]=y[3],s[f+10]=y[4],s[f+11]=y[5],s[f+15]=y[6],s[f+16]=y[7];u[f+2]=_[0],u[f+7]=_[1],u[f+12]=_[2],u[f+17]=_[3];var j=Math.min(P.worldAlpha,1),L=1>j&&d.premultipliedAlpha?x.premultiplyTint(P._tintRGB,j):P._tintRGB+(255*j<<24);u[f+3]=u[f+8]=u[f+13]=u[f+18]=L,s[f+4]=s[f+9]=s[f+14]=s[f+19]=d._virtalBoundId,f+=20}if(m.size=E-m.start,b["default"].CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var N=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=T["default"].GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,N.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(F,N.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,N.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);N.aTextureId&&U.addAttribute(F,N.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(E=0;e>E;++E)l[E]._virtalBoundId=-1;for(E=0;v>E;++E){for(var B=a[E],X=B.textureCount,H=0;X>H;H++)p=B.textures[H],l[B.ids[H]]!==p&&this.renderer.bindTexture(p,B.ids[H],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(B.blend),t.drawElements(t.TRIANGLES,6*B.size,t.UNSIGNED_SHORT,6*B.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),b["default"].CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var n=0;n<this.buffers.length;++n)this.buffers[n].destroy()},e}(u["default"]);e["default"]=C,l["default"].registerPlugin("sprite",C)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(246),u=r(s),c=function(t){function e(){return i(this,e),o(this,t.apply(this,arguments))}return a(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(u["default"]);e["default"]=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(236),u=r(s),c=n(248),l=r(c),h=n(257),f=r(h),d=n(258),p=r(d),v=n(259),g=r(v),m=n(245),y=r(m),_=n(264),b=r(_),x=n(221),w=r(x),T=n(265),E=r(T),S=n(266),O=r(S),M=n(268),C=r(M),P=n(269),k=r(P),A=n(213),I=n(185),R=r(I),D=n(174),j=0,L=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,"WebGL",n,r,a));return s.legacy=s.options.legacy,s.legacy&&(R["default"].VertexArrayObject.FORCE_NATIVE=!0),s.type=D.RENDERER_TYPE.WEBGL,s.handleContextLost=s.handleContextLost.bind(s),s.handleContextRestored=s.handleContextRestored.bind(s),s.view.addEventListener("webglcontextlost",s.handleContextLost,!1),s.view.addEventListener("webglcontextrestored",s.handleContextRestored,!1),s._contextOptions={alpha:s.transparent,antialias:s.options.antialias,premultipliedAlpha:s.transparent&&"notMultiplied"!==s.transparent,stencil:!0,preserveDrawingBuffer:s.options.preserveDrawingBuffer,powerPreference:s.options.powerPreference},s._backgroundColorRgba[3]=s.transparent?0:1,s.maskManager=new l["default"](s),s.stencilManager=new f["default"](s),s.emptyRenderer=new y["default"](s),s.currentRenderer=s.emptyRenderer,s.textureManager=null,s.filterManager=null,s.initPlugins(),s.options.context&&k["default"](s.options.context),s.gl=s.options.context||R["default"].createContext(s.view,s._contextOptions),s.CONTEXT_UID=j++,s.state=new O["default"](s.gl),s.renderingToScreen=!0,s.boundTextures=null,s._activeShader=null,s._activeVao=null,s._activeRenderTarget=null,s._initContext(),s.drawModes=C["default"](s.gl),s._nextTextureLocation=0,s.setBlendMode(0),s}return a(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this.textureManager=new b["default"](this),this.filterManager=new p["default"](this),this.textureGC=new E["default"](this),this.state.resetToDefault(),this.rootRenderTarget=new g["default"](t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var n=new R["default"].GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var i=0;e>i;i++){var o=new w["default"];o._glTextures[this.CONTEXT_UID]=n,this.boundTextures[i]=r,this.emptyTextures[i]=o,this.bindTexture(null,i)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,n,r,i){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!i){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==n?n:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){u["default"].prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var n=t.baseTexture,r=n._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var n=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),n=r._glRenderTargets[this.CONTEXT_UID],n.setFrame(t.frame)}else n=this.rootRenderTarget;return n.transform=e,this.bindRenderTarget(n),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),e!==!1&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,n){if(t=t||this.emptyTextures[e],t=t.baseTexture||t,t.touched=this.textureGC.count,n)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;t=t.baseTexture||t;for(var n=0;n<this.boundTextures.length;n++)this.boundTextures[n]===t&&(this.boundTextures[n]=this.emptyTextures[n],e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[n]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new R["default"].VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(u["default"]);e["default"]=L,A.pluginTarget.mixin(L)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(246),u=r(s),c=n(249),l=r(c),h=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return a(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var n=e.worldTransform,r=Math.atan2(n.b,n.a);r=Math.round(r*(180/Math.PI)),r%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new l["default"](e)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=e,t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,n),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var n=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(n.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(r.x*i,(n.root?n.size.height-r.y-r.height:r.y)*i,r.width*i,r.height*i),this.scissorRenderTarget=n,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(u["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(250),u=r(s),c=n(175),l=(n(252),n(256)),h=r(l),f=function(t){function e(n){i(this,e);var r=new c.Matrix,a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return n.renderable=!1,a.maskSprite=n,a.maskMatrix=r,a}return a(e,t),e.prototype.apply=function(t,e,n){var r=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new h["default"](i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,r).prepend(i.transform.mapCoord),this.uniforms.alpha=r.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,t.applyFilter(this,e,n))},e}(u["default"]);e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(251),s=r(a),u=n(213),c=n(174),l=n(205),h=r(l),f={},d=function(){function t(e,n,r){i(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=n||t.defaultFragmentSrc,this._blendMode=c.BLEND_MODES.NORMAL,this.uniformData=r||s["default"](this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var o in this.uniformData)this.uniforms[o]=this.uniformData[o].value,this.uniformData[o].type&&(this.uniformData[o].type=this.uniformData[o].type.toLowerCase());this.glShaders={},f[this.vertexSrc+this.fragmentSrc]||(f[this.vertexSrc+this.fragmentSrc]=u.uid()),this.glShaderKey=f[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=h["default"].FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,n,r,i){t.applyFilter(this,e,n,r)},o(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=o(t,n),i=o(e,n);return Object.assign(r,i)}function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),n={},r=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),o=0;o<i.length;o++){var a=i[o].trim();if(a.indexOf("uniform")>-1){var s=a.split(" "),c=s[1],l=s[2],h=1;l.indexOf("[")>-1&&(r=l.split(/\[|]/),l=r[0],h*=Number(r[1])),l.match(e)||(n[l]={value:u(c,h),name:l,type:c})}}return n}e.__esModule=!0,e["default"]=i;var a=n(185),s=r(a),u=s["default"].shader.defaultValue},function(t,e,n){(function(e){// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
"use strict";function r(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];i&&"."!==i&&(".."===i?n.length&&".."!==n[n.length-1]?n.pop():e&&n.push(".."):n.push(i))}return n}function i(t){for(var e=t.length-1,n=0;e>=n&&!t[n];n++);for(var r=e;r>=0&&!t[r];r--);return 0===n&&r===e?t:n>r?[]:t.slice(n,r+1)}function o(t){var e=h.exec(t),n=(e[1]||"")+(e[2]||""),r=e[3]||"",i=f.exec(r),o=i[1],a=i[2],s=i[3];return[n,o,a,s]}function a(t){var e=h.exec(t),n=e[1]||"",r=!!n&&":"!==n[1];return{device:n,isUnc:r,isAbsolute:r||!!e[2],tail:e[3]}}function s(t){return"\\\\"+t.replace(/^[\\\/]+/,"").replace(/[\\\/]+/g,"\\")}function u(t){return p.exec(t).slice(1)}var c="win32"===e.platform,l=n(253),h=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,f=/^([\s\S]*?)((?:\.{1,2}|[^\\\/]+?|)(\.[^.\/\\]*|))(?:[\\\/]*)$/,d={};d.resolve=function(){for(var t="",n="",i=!1,o=arguments.length-1;o>=-1;o--){var u;if(o>=0?u=arguments[o]:t?(u=e.env["="+t],u&&u.substr(0,3).toLowerCase()===t.toLowerCase()+"\\"||(u=t+"\\")):u=e.cwd(),!l.isString(u))throw new TypeError("Arguments to path.resolve must be strings");if(u){var c=a(u),h=c.device,f=c.isUnc,d=c.isAbsolute,p=c.tail;if((!h||!t||h.toLowerCase()===t.toLowerCase())&&(t||(t=h),i||(n=p+"\\"+n,i=d),t&&i))break}}return f&&(t=s(t)),n=r(n.split(/[\\\/]+/),!i).join("\\"),t+(i?"\\":"")+n||"."},d.normalize=function(t){var e=a(t),n=e.device,i=e.isUnc,o=e.isAbsolute,u=e.tail,c=/[\\\/]$/.test(u);return u=r(u.split(/[\\\/]+/),!o).join("\\"),u||o||(u="."),u&&c&&(u+="\\"),i&&(n=s(n)),n+(o?"\\":"")+u},d.isAbsolute=function(t){return a(t).isAbsolute},d.join=function(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&t.push(n)}var r=t.join("\\");return/^[\\\/]{2}[^\\\/]/.test(t[0])||(r=r.replace(/^[\\\/]{2,}/,"\\")),d.normalize(r)},d.relative=function(t,e){t=d.resolve(t),e=d.resolve(e);for(var n=t.toLowerCase(),r=e.toLowerCase(),o=i(e.split("\\")),a=i(n.split("\\")),s=i(r.split("\\")),u=Math.min(a.length,s.length),c=u,l=0;u>l;l++)if(a[l]!==s[l]){c=l;break}if(0==c)return e;for(var h=[],l=c;l<a.length;l++)h.push("..");return h=h.concat(o.slice(c)),h.join("\\")},d._makeLong=function(t){if(!l.isString(t))return t;if(!t)return"";var e=d.resolve(t);return/^[a-zA-Z]\:\\/.test(e)?"\\\\?\\"+e:/^\\\\[^?.]/.test(e)?"\\\\?\\UNC\\"+e.substring(2):t},d.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},d.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},d.extname=function(t){return o(t)[3]},d.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir,r=t.base||"";return n?n[n.length-1]===d.sep?n+r:n+d.sep+r:r},d.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=o(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},d.sep="\\",d.delimiter=";";var p=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,v={};v.resolve=function(){for(var t="",n=!1,i=arguments.length-1;i>=-1&&!n;i--){var o=i>=0?arguments[i]:e.cwd();if(!l.isString(o))throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,n="/"===o[0])}return t=r(t.split("/"),!n).join("/"),(n?"/":"")+t||"."},v.normalize=function(t){var e=v.isAbsolute(t),n=t&&"/"===t[t.length-1];return t=r(t.split("/"),!e).join("/"),t||e||(t="."),t&&n&&(t+="/"),(e?"/":"")+t},v.isAbsolute=function(t){return"/"===t.charAt(0)},v.join=function(){for(var t="",e=0;e<arguments.length;e++){var n=arguments[e];if(!l.isString(n))throw new TypeError("Arguments to path.join must be strings");n&&(t+=t?"/"+n:n)}return v.normalize(t)},v.relative=function(t,e){t=v.resolve(t).substr(1),e=v.resolve(e).substr(1);for(var n=i(t.split("/")),r=i(e.split("/")),o=Math.min(n.length,r.length),a=o,s=0;o>s;s++)if(n[s]!==r[s]){a=s;break}for(var u=[],s=a;s<n.length;s++)u.push("..");return u=u.concat(r.slice(a)),u.join("/")},v._makeLong=function(t){return t},v.dirname=function(t){var e=u(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},v.basename=function(t,e){var n=u(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},v.extname=function(t){return u(t)[3]},v.format=function(t){if(!l.isObject(t))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof t);var e=t.root||"";if(!l.isString(e))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof t.root);var n=t.dir?t.dir+v.sep:"",r=t.base||"";return n+r},v.parse=function(t){if(!l.isString(t))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof t);var e=u(t);if(!e||4!==e.length)throw new TypeError("Invalid path '"+t+"'");return e[1]=e[1]||"",e[2]=e[2]||"",e[3]=e[3]||"",{root:e[0],dir:e[0]+e[1].slice(0,-1),base:e[2],ext:e[3],name:e[2].slice(0,e[2].length-e[3].length)}},v.sep="/",v.delimiter=":",t.exports=c?d:v,t.exports.posix=v,t.exports.win32=d}).call(e,n(99))},function(t,e,n){(function(t,r){function i(t,n){var r={seen:[],stylize:a};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(n)?r.showHidden=n:n&&e._extend(r,n),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),u(r,t,r.depth)}function o(t,e){var n=i.styles[e];return n?"["+i.colors[n][0]+"m"+t+"["+i.colors[n][1]+"m":t}function a(t,e){return t}function s(t){var e={};return t.forEach(function(t,n){e[t]=!0}),e}function u(t,n,r){if(t.customInspect&&n&&O(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return _(i)||(i=u(t,i,r)),i}var o=c(t,n);if(o)return o;var a=Object.keys(n),v=s(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),S(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(n);if(0===a.length){if(O(n)){var g=n.name?": "+n.name:"";return t.stylize("[Function"+g+"]","special")}if(w(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(S(n))return l(n)}var m="",y=!1,b=["{","}"];if(p(n)&&(y=!0,b=["[","]"]),O(n)){var x=n.name?": "+n.name:"";m=" [Function"+x+"]"}if(w(n)&&(m=" "+RegExp.prototype.toString.call(n)),E(n)&&(m=" "+Date.prototype.toUTCString.call(n)),S(n)&&(m=" "+l(n)),0===a.length&&(!y||0==n.length))return b[0]+m+b[1];if(0>r)return w(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special");t.seen.push(n);var T;return T=y?h(t,n,r,v,a):a.map(function(e){return f(t,n,r,v,e,y)}),t.seen.pop(),d(T,m,b)}function c(t,e){if(x(e))return t.stylize("undefined","undefined");if(_(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return y(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,n,r,i){for(var o=[],a=0,s=e.length;s>a;++a)o.push(A(e,String(a))?f(t,e,n,r,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(f(t,e,n,r,i,!0))}),o}function f(t,e,n,r,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),A(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=g(n)?u(t,c.value,null):u(t,c.value,n-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n"))):s=t.stylize("[Circular]","special")),x(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function d(t,e,n){var r=0,i=t.reduce(function(t,e){return r++,e.indexOf("\n")>=0&&r++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}function p(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return null==t}function y(t){return"number"==typeof t}function _(t){return"string"==typeof t}function b(t){return"symbol"==typeof t}function x(t){return void 0===t}function w(t){return T(t)&&"[object RegExp]"===C(t)}function T(t){return"object"==typeof t&&null!==t}function E(t){return T(t)&&"[object Date]"===C(t)}function S(t){return T(t)&&("[object Error]"===C(t)||t instanceof Error)}function O(t){return"function"==typeof t}function M(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function C(t){return Object.prototype.toString.call(t)}function P(t){return 10>t?"0"+t.toString(10):t.toString(10)}function k(){var t=new Date,e=[P(t.getHours()),P(t.getMinutes()),P(t.getSeconds())].join(":");return[t.getDate(),j[t.getMonth()],e].join(" ")}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.
var I=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(i(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,o=r.length,a=String(t).replace(I,function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(e){return"[Circular]"}default:return t}}),s=r[n];o>n;s=r[++n])a+=g(s)||!T(s)?" "+s:" "+i(s);return a},e.deprecate=function(n,i){function o(){if(!a){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?console.trace(i):console.error(i),a=!0}return n.apply(this,arguments)}if(x(t.process))return function(){return e.deprecate(n,i).apply(this,arguments)};if(r.noDeprecation===!0)return n;var a=!1;return o};var R,D={};e.debuglog=function(t){if(x(R)&&(R=r.env.NODE_DEBUG||""),t=t.toUpperCase(),!D[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=r.pid;D[t]=function(){var r=e.format.apply(e,arguments);console.error("%s %d: %s",t,n,r)}}else D[t]=function(){};return D[t]},e.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=v,e.isNull=g,e.isNullOrUndefined=m,e.isNumber=y,e.isString=_,e.isSymbol=b,e.isUndefined=x,e.isRegExp=w,e.isObject=T,e.isDate=E,e.isError=S,e.isFunction=O,e.isPrimitive=M,e.isBuffer=n(254);var j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];e.log=function(){console.log("%s - %s",k(),e.format.apply(e,arguments))},e.inherits=n(255),e._extend=function(t,e){if(!e||!T(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t}}).call(e,function(){return this}(),n(99))},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(178),s=r(a),u=new s["default"],c=function(){function t(e,n){i(this,t),this._texture=e,this.mapCoord=new s["default"],this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof n?.5:n}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var n=this.mapCoord,r=0;r<t.length;r+=2){var i=t[r],o=t[r+1];e[r]=i*n.a+o*n.c+n.tx,e[r+1]=i*n.b+o*n.d+n.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var n=e._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=e.orig,i=e.trim;i&&(u.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(u));var o=e.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(e._frame.x+s+c)/o.width,a[1]=(e._frame.y+s+c)/o.height,a[2]=(e._frame.x+e._frame.width-s+c)/o.width,a[3]=(e._frame.y+e._frame.height-s+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,!0},o(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(246),u=r(s),c=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.stencilMaskStack=null,r}return a(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,n=this.stencilMaskStack.length;0===n&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,n,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){u["default"].prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var u=n(246),c=i(u),l=n(259),h=i(l),f=n(260),d=i(f),p=n(175),v=n(262),g=i(v),m=n(263),y=r(m),_=n(228),b=i(_),x=function(){function t(){s(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new p.Rectangle,this.destinationFrame=new p.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),w="screen",T=function(t){function e(n){s(this,e);var r=o(this,t.call(this,n));return r.gl=r.renderer.gl,r.quad=new d["default"](r.gl,n.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=n.view.width,r._screenHeight=n.view.height,r}return a(e,t),e.prototype.pushFilter=function(t,e){var n=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var i=new x;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=n._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[i]},this.filterData=r}var o=r.stack[++r.index],a=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new x);var s=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===n.screen.width&&t.filterArea.height===n.screen.height,u=e[0].resolution,c=0|e[0].padding,l=s?n.screen:t.filterArea||t.getBounds(!0),h=o.sourceFrame,f=o.destinationFrame;h.x=(l.x*u|0)/u,h.y=(l.y*u|0)/u,h.width=(l.width*u|0)/u,h.height=(l.height*u|0)/u,s||(r.stack[0].renderTarget.transform||e[0].autoFit&&h.fit(a),h.pad(c)),f.width=h.width,f.height=h.height;var d=this.getPotRenderTarget(n.gl,h.width,h.height,u);o.target=t,o.filters=e,o.resolution=u,o.renderTarget=d,d.setFrame(f,h),n.bindRenderTarget(d),d.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],n=t.stack[t.index];this.quad.map(n.renderTarget.size,n.sourceFrame).upload();var r=n.filters;if(1===r.length)r[0].apply(this,n.renderTarget,e.renderTarget,!1,n),this.freePotRenderTarget(n.renderTarget);else{var i=n.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,n.resolution);o.setFrame(n.destinationFrame,n.sourceFrame),o.clear();var a=0;for(a=0;a<r.length-1;++a){r[a].apply(this,i,o,!0,n);var s=i;i=o,o=s}r[a].apply(this,i,e.renderTarget,!1,n),this.freePotRenderTarget(i),this.freePotRenderTarget(o)}n.clear(),t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,n,r){var i=this.renderer,o=i.gl,a=t.glShaders[i.CONTEXT_UID];a||(t.glShaderKey?(a=this.shaderCache[t.glShaderKey],a||(a=new g["default"](this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[i.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=a,this.managedFilters.push(t))):(a=t.glShaders[i.CONTEXT_UID]=new g["default"](this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),i.bindVao(null),this.quad.initVao(a)),i.bindVao(this.quad.vao),i.bindRenderTarget(n),r&&(o.disable(o.SCISSOR_TEST),i.clear(),o.enable(o.SCISSOR_TEST)),n===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(a);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(a,t),i.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var n=e.uniformData,r=e.uniforms,i=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var a=t.uniforms.filterArea;a[0]=o.renderTarget.size.width,a[1]=o.renderTarget.size.height,a[2]=o.sourceFrame.x,a[3]=o.sourceFrame.y,t.uniforms.filterArea=a}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var s=t.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,s[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=s}for(var u in n){var c=n[u].type;if("sampler2d"===c&&0!==r[u]){if(r[u].baseTexture)t.uniforms[u]=this.renderer.bindTexture(r[u].baseTexture,i);else{t.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),r[u].texture.bind()}i++}else if("mat3"===c)t.uniforms[u]=void 0!==r[u].a?r[u].toArray(!0):r[u];else if("vec2"===c)if(void 0!==r[u].x){var h=t.uniforms[u]||new Float32Array(2);h[0]=r[u].x,h[1]=r[u].y,t.uniforms[u]=h}else t.uniforms[u]=r[u];else"float"===c?t.uniforms.data[u].value!==n[u]&&(t.uniforms[u]=r[u]):t.uniforms[u]=r[u]}},e.prototype.getRenderTarget=function(t,e){var n=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,n.sourceFrame.width,n.sourceFrame.height,e||n.resolution);return r.setFrame(n.destinationFrame,n.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return y.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var n=this.filterData.stack[this.filterData.index];return y.calculateSpriteMatrix(t,n.sourceFrame,n.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1,e=this.renderer,n=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<n.length;r++)t||n[r].glShaders[e.CONTEXT_UID].destroy(),delete n[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,n,r){var i=w;e*=r,n*=r,(e!==this._screenWidth||n!==this._screenHeight)&&(e=b["default"].nextPow2(e),n=b["default"].nextPow2(n),i=(65535&e)<<16|65535&n),this.pool[i]||(this.pool[i]=[]);var o=this.pool[i].pop();if(!o){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),o=new h["default"](t,e,n,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return o.resolution=r,o.defaultFrame.width=o.size.width=e/r,o.defaultFrame.height=o.size.height=n/r,o.filterPoolKey=i,o},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var n=0;n<e.length;n++)e[n].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool[w];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool[w]=[]}},e}(c["default"]);e["default"]=T},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(175),a=n(174),s=n(205),u=r(s),c=n(185),l=function(){function t(e,n,r,s,l,h){i(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new o.Rectangle(0,0,1,1),this.resolution=l||u["default"].RESOLUTION,this.projectionMatrix=new o.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new o.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==s?s:u["default"].SCALE_MODE,this.root=h,this.root?(this.frameBuffer=new c.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=c.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===a.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(n,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var n=this.projectionMatrix;e=e||t,n.identity(),this.root?(n.a=1/t.width*2,n.d=-1/t.height*2,n.tx=-1-e.x*n.a,n.ty=1-e.y*n.d):(n.a=1/t.width*2,n.d=1/t.height*2,n.tx=-1-e.x*n.a,n.ty=-1-e.y*n.d)},t.prototype.resize=function(t,e){if(t=0|t,e=0|e,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var n=this.frame||this.size;this.calculateProjection(n)}},t.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(185),a=r(o),s=n(261),u=r(s),c=function(){function t(e,n){i(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;4>r;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=u["default"](1),this.vertexBuffer=a["default"].GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a["default"].GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a["default"].VertexArrayObject(e,n)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+e.width/t.width,this.uvs[3]=r,this.uvs[4]=n+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=n,this.uvs[7]=r+e.height/t.height,n=e.x,r=e.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+e.width,this.vertices[3]=r,this.vertices[4]=n+e.width,this.vertices[5]=r+e.height,this.vertices[6]=n,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;4>t;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();e["default"]=c},function(t,e){"use strict";function n(t){for(var e=6*t,n=new Uint16Array(e),r=0,i=0;e>r;r+=6,i+=4)n[r+0]=i+0,n[r+1]=i+1,n[r+2]=i+2,n[r+3]=i+0,n[r+4]=i+2,n[r+5]=i+3;return n}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var n=t.slice(0);return n.unshift("precision "+e+" float;"),n}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}e.__esModule=!0;var u=n(185),c=n(205),l=r(c),h=function(t){function e(n,r,a,u,c){return i(this,e),o(this,t.call(this,n,s(r,c||l["default"].PRECISION_VERTEX),s(a,c||l["default"].PRECISION_FRAGMENT),void 0,u))}return a(e,t),e}(u.GLShader);e["default"]=h},function(t,e,n){"use strict";function r(t,e,n){var r=t.identity();return r.translate(e.x/n.width,e.y/n.height),r.scale(n.width,n.height),r}function i(t,e,n){var r=t.identity();r.translate(e.x/n.width,e.y/n.height);var i=n.width/e.width,o=n.height/e.height;return r.scale(i,o),r}function o(t,e,n,r){var i=r._texture.orig,o=t.set(n.width,0,0,n.height,e.x,e.y),s=r.worldTransform.copy(a.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(r.anchor.x,r.anchor.y),o}e.__esModule=!0,e.calculateScreenSpaceMatrix=r,e.calculateNormalizedScreenSpaceMatrix=i,e.calculateSpriteMatrix=o;var a=n(175)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(185),a=n(174),s=n(259),u=r(s),c=n(213),l=function(){function t(e){i(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var n=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===e){e=0;for(var s=0;s<i.length;++s)if(i[s]===t){e=s;break}}i[e]=t,n.activeTexture(n.TEXTURE0+e);var c=t._glTextures[this.renderer.CONTEXT_UID];if(c)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):c.upload(t.source);else{if(r){var l=new u["default"](this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=l,c=l.texture}else c=new o.GLTexture(this.gl,null,null,null,null),c.bind(e),c.premultiplyAlpha=!0,c.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=c,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&c.enableMipmap(),t.wrapMode===a.WRAP_MODES.CLAMP?c.enableWrapClamp():t.wrapMode===a.WRAP_MODES.REPEAT?c.enableWrapRepeat():c.enableWrapMirrorRepeat()):c.enableWrapClamp(),t.scaleMode===a.SCALE_MODES.NEAREST?c.enableNearestScaling():c.enableLinearScaling()}return c},t.prototype.destroyTexture=function(t,e){if(t=t.baseTexture||t,t.hasLoaded){var n=this.renderer.CONTEXT_UID,r=t._glTextures,i=t._glRenderTargets;if(r[n]&&(this.renderer.unbindTexture(t),r[n].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete r[n],!e)){var o=this._managedTextures.indexOf(t);-1!==o&&c.removeItems(this._managedTextures,o,1)}i&&i[n]&&(i[n].destroy(),delete i[n])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(174),a=n(205),s=r(a),u=function(){function t(e){i(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s["default"].GC_MAX_IDLE,this.checkCountMax=s["default"].GC_MAX_CHECK_COUNT,this.mode=s["default"].GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==o.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,n=!1,r=0;r<e.length;r++){var i=e[r];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[r]=null,n=!0)}if(n){for(var o=0,a=0;a<e.length;a++)null!==e[a]&&(e[o++]=e[a]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var n=t.children.length-1;n>=0;n--)this.unload(t.children[n])},t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(267),a=r(o),s=0,u=1,c=2,l=3,h=4,f=function(){function t(e){i(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=a["default"](e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[s]),this.setDepthTest(t[u]),this.setFrontFace(t[c]),this.setCullFace(t[l]),this.setBlendMode(t[h])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[s]!==t&&(this.activeState[s]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[h]){this.activeState[h]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[u]!==t&&(this.activeState[u]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[l]!==t&&(this.activeState[l]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[c]!==t&&(this.activeState[c]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var n=1;n<this.maxAttribs;n++)this.gl.disableVertexAttribArray(n)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();e["default"]=f},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e}e.__esModule=!0,e["default"]=r;var i=n(174)},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e}e.__esModule=!0,e["default"]=r;var i=n(174)},function(t,e){"use strict";function n(t){var e=t.getContextAttributes();e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r=u;r=r.replace(/%count%/gi,e),r=r.replace(/%forloop%/gi,o(e));for(var i=new s["default"](t,n,r),a=[],c=0;e>c;c++)a[c]=c;return i.bind(),i.uniforms.uSamplers=a,i}function o(t){var e="";e+="\n",e+="\n";for(var n=0;t>n;n++)n>0&&(e+="\nelse "),t-1>n&&(e+="if(textureId == "+n+".0)"),e+="\n{",e+="\n	color = texture2D(uSamplers["+n+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}e.__esModule=!0,e["default"]=i;var a=n(262),s=r(a),u=(n(252),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){var n=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(n){var r=document.createElement("canvas");r.width=1,r.height=1,e=s["default"].createContext(r)}for(var i=e.createShader(e.FRAGMENT_SHADER);;){var a=u.replace(/%forloop%/gi,o(t));if(e.shaderSource(i,a),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return n&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t}function o(t){for(var e="",n=0;t>n;++n)n>0&&(e+="\nelse "),t-1>n&&(e+="if(test == "+n+".0){}");return e}e.__esModule=!0,e["default"]=i;var a=n(185),s=r(a),u=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e);

}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(219),c=r(u),l=n(220),h=r(l),f=n(175),d=n(213),p=n(174),v=n(205),g=r(v),m=n(274),y=r(m),_=n(275),b=r(_),x=n(276),w=r(x),T={texture:!0,children:!1,baseTexture:!0},E=function(t){function e(n,r,a){i(this,e),a=a||document.createElement("canvas"),a.width=3,a.height=3;var s=h["default"].fromCanvas(a,g["default"].SCALE_MODE,"text");s.orig=new f.Rectangle,s.trim=new f.Rectangle;var u=o(this,t.call(this,s));return h["default"].addToCache(u._texture,u._texture.baseTexture.textureCacheIds[0]),u.canvas=a,u.context=u.canvas.getContext("2d"),u.resolution=g["default"].RESOLUTION,u._text=null,u._style=null,u._styleListener=null,u._font="",u.text=n,u.style=r,u.localStyleID=-1,u}return a(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var n=this.context,r=b["default"].measureText(this._text,this._style,this._style.wordWrap,this.canvas),i=r.width,o=r.height,a=r.lines,s=r.lineHeight,u=r.lineWidths,c=r.maxLineWidth,l=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,i)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),n.scale(this.resolution,this.resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.strokeStyle=e.stroke,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;var h=void 0,f=void 0;if(e.dropShadow){n.fillStyle=e.dropShadowColor,n.globalAlpha=e.dropShadowAlpha,n.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(n.shadowColor=e.dropShadowColor);for(var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,p=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,v=0;v<a.length;v++)h=e.strokeThickness/2,f=e.strokeThickness/2+v*s+l.ascent,"right"===e.align?h+=c-u[v]:"center"===e.align&&(h+=(c-u[v])/2),e.fill&&(this.drawLetterSpacing(a[v],h+d+e.padding,f+p+e.padding),e.stroke&&e.strokeThickness&&(n.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(a[v],h+d+e.padding,f+p+e.padding,!0),n.strokeStyle=e.stroke))}n.shadowBlur=0,n.globalAlpha=1,n.fillStyle=this._generateFillStyle(e,a);for(var g=0;g<a.length;g++)h=e.strokeThickness/2,f=e.strokeThickness/2+g*s+l.ascent,"right"===e.align?h+=c-u[g]:"center"===e.align&&(h+=(c-u[g])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(a[g],h+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(a[g],h+e.padding,f+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1,i=this._style,o=i.letterSpacing;if(0===o)return void(r?this.context.strokeText(t,e,n):this.context.fillText(t,e,n));for(var a=String.prototype.split.call(t,""),s=e,u=0,c="";u<t.length;)c=a[u++],r?this.context.strokeText(c,s,n):this.context.fillText(c,s,n),s+=this.context.measureText(c).width+o},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=w["default"](t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,n.trim.width=n._frame.width=t.width/this.resolution,n.trim.height=n._frame.height=t.height/this.resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var n=void 0,r=void 0,i=void 0,o=void 0,a=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,u=t.fill.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var l=u.length+1,h=1;l>h;++h)c.push(h/l);if(u.unshift(t.fill[0]),c.unshift(0),u.push(t.fill[t.fill.length-1]),c.push(1),t.fillGradientType===p.TEXT_GRADIENT.LINEAR_VERTICAL){n=this.context.createLinearGradient(a/2,0,a/2,s),r=(u.length+1)*e.length,i=0;for(var f=0;f<e.length;f++){i+=1;for(var d=0;d<u.length;d++)o="number"==typeof c[d]?c[d]/e.length+f/e.length:i/r,n.addColorStop(o,u[d]),i++}}else{n=this.context.createLinearGradient(0,s/2,a,s/2),r=u.length+1,i=1;for(var v=0;v<u.length;v++)o="number"==typeof c[v]?c[v]:i/r,n.addColorStop(o,u[v]),i++}return n},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},T,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},s(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=d.sign(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=d.sign(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof y["default"]?t:new y["default"](t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null===t||void 0===t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(c["default"]);e["default"]=E},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return"number"==typeof t?l.hex2string(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function o(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=i(t[e]);return t}return i(t)}function a(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function s(t,e,n){for(var r in n)t[r]=Array.isArray(e[r])?e[r].slice():e[r]}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(174),l=n(213),h={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:c.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},f=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],d=function(){function t(e){r(this,t),this.styleID=0,this.reset(),s(this,e,e)}return t.prototype.clone=function(){var e={};return s(e,this,h),new t(e)},t.prototype.reset=function(){s(this,h,h)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var n=e.length-1;n>=0;n--){var r=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&f.indexOf(r)<0&&(r='"'+r+'"'),e[n]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},u(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=o(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=o(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){a(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=o(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();e["default"]=d},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,r,i,o,a,s,u,c,l){n(this,t),this.text=e,this.style=r,this.width=i,this.height=o,this.lines=a,this.lineWidths=s,this.lineHeight=u,this.maxLineWidth=c,this.fontProperties=l}return t.measureText=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=void 0===r||null===r?n.wordWrap:r;var o=n.toFontString(),a=t.measureFont(o),s=i.getContext("2d");s.font=o;for(var u=r?t.wordWrap(e,n,i):e,c=u.split(/(?:\r\n|\r|\n)/),l=new Array(c.length),h=0,f=0;f<c.length;f++){var d=s.measureText(c[f]).width+(c[f].length-1)*n.letterSpacing;l[f]=d,h=Math.max(h,d)}var p=h+n.strokeThickness;n.dropShadow&&(p+=n.dropShadowDistance);var v=n.lineHeight||a.fontSize+n.strokeThickness,g=Math.max(v,a.fontSize+n.strokeThickness)+(c.length-1)*(v+n.leading);return n.dropShadow&&(g+=n.dropShadowDistance),new t(e,n,p,g,c,l,v+n.leading,h,a)},t.wordWrap=function(e,n){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,i=r.getContext("2d"),o=0,a="",s="",u={},c=n.letterSpacing,l=n.whiteSpace,h=t.collapseSpaces(l),f=t.collapseNewlines(l),d=!h,p=n.wordWrapWidth+c,v=t.tokenize(e),g=0;g<v.length;g++){var m=v[g];if(t.isNewline(m)){if(!f){s+=t.addLine(a),d=!h,a="",o=0;continue}m=" "}if(h){var y=t.isBreakingSpace(m),_=t.isBreakingSpace(a[a.length-1]);if(y&&_)continue}var b=t.getFromCache(m,c,u,i);if(b>p)if(""!==a&&(s+=t.addLine(a),a="",o=0),t.canBreakWords(m,n.breakWords))for(var x=m.split(""),w=0;w<x.length;w++){for(var T=x[w],E=1;x[w+E];){var S=x[w+E],O=T[T.length-1];if(t.canBreakChars(O,S,m,w,n.breakWords))break;T+=S,E++}w+=T.length-1;var M=t.getFromCache(T,c,u,i);M+o>p&&(s+=t.addLine(a),d=!1,a="",o=0),a+=T,o+=M}else{a.length>0&&(s+=t.addLine(a),a="",o=0);var C=g===v.length-1;s+=t.addLine(m,!C),d=!1,a="",o=0}else b+o>p&&(d=!1,s+=t.addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(m)||d)&&(a+=m,o+=b)}return s+=t.addLine(a,!1)},t.addLine=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!0;return e=t.trimRight(e),e=n?e+"\n":e},t.getFromCache=function(t,e,n,r){var i=n[t];if(void 0===i){var o=t.length*e;i=r.measureText(t).width+o,n[t]=i}return i},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var n=e.length-1;n>=0;n--){var r=e[n];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"!=typeof e?!1:t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"!=typeof e?!1:t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var n=[],r="";if("string"!=typeof e)return n;for(var i=0;i<e.length;i++){var o=e[i];t.isBreakingSpace(o)||t.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,n,r,i){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var n={},r=t._canvas,i=t._context;i.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(t.BASELINE_SYMBOL).width),u=2*s;s=s*t.BASELINE_MULTIPLIER|0,r.width=a,r.height=u,i.fillStyle="#f00",i.fillRect(0,0,a,u),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var c=i.getImageData(0,0,a,u).data,l=c.length,h=4*a,f=0,d=0,p=!1;for(f=0;s>f;++f){for(var v=0;h>v;v+=4)if(255!==c[d+v]){p=!0;break}if(p)break;d+=h}for(n.ascent=s-f,d=l-h,p=!1,f=u;f>s;--f){for(var g=0;h>g;g+=4)if(255!==c[d+g]){p=!0;break}if(p)break;d-=h}return n.descent=f-s,n.fontSize=n.ascent+n.descent,t._fonts[e]=n,n},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();e["default"]=r;var i=document.createElement("canvas");i.width=i.height=10,r._canvas=i,r._context=i.getContext("2d"),r._fonts={},r.METRICS_STRING="|Éq",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e){"use strict";function n(t){var e=t.width,n=t.height,r=t.getContext("2d"),i=r.getImageData(0,0,e,n),o=i.data,a=o.length,s={top:null,left:null,right:null,bottom:null},u=null,c=void 0,l=void 0,h=void 0;for(c=0;a>c;c+=4)0!==o[c+3]&&(l=c/4%e,h=~~(c/4/e),null===s.top&&(s.top=h),null===s.left?s.left=l:l<s.left&&(s.left=l),null===s.right?s.right=l+1:s.right<l&&(s.right=l+1),null===s.bottom?s.bottom=h:s.bottom<h&&(s.bottom=h));return null!==s.top&&(e=s.right-s.left,n=s.bottom-s.top+1,u=r.getImageData(s.left,s.top,e,n)),{height:n,width:e,data:u}}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(212),u=r(s),c=n(237),l=r(c),h=n(220),f=r(h),d=n(278),p=r(d),v=n(219),g=r(v),m=n(175),y=n(213),_=n(174),b=n(202),x=r(b),w=n(279),T=r(w),E=n(235),S=r(E),O=void 0,M=new m.Matrix,C=new m.Point,P=new Float32Array(4),k=new Float32Array(4),A=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;i(this,e);var r=o(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=n,r.lineColor=0,r.lineAlignment=.5,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=_.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new x["default"],r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r._prevRectTint=null,r._prevRectFillColor=null,r}return a(e,t),e.prototype.clone=function n(){var n=new e;n.renderable=this.renderable,n.fillAlpha=this.fillAlpha,n.lineWidth=this.lineWidth,n.lineColor=this.lineColor,n.lineAlignment=this.lineAlignment,n.tint=this.tint,n.blendMode=this.blendMode,n.isMask=this.isMask,n.boundsPadding=this.boundsPadding,n.dirty=0,n.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)n.graphicsData.push(this.graphicsData[t].clone());return n.currentPath=n.graphicsData[n.graphicsData.length-1],n.updateLocalBounds(),n},e.prototype._quadraticCurveLength=function(t,e,n,r,i,o){var a=t-(2*n+i),s=e-(2*r+o),u=2*(n-2)*t,c=2*(r-2)*e,l=4*(a*a+s*s),h=4*(a*u+s*c),f=u*u+c*c,d=2*Math.sqrt(l+h+f),p=Math.sqrt(l),v=2*l*p,g=2*Math.sqrt(f),m=h/p;return(v*d+p*h*(d-g)+(4*f*l-h*h)*Math.log((2*p+m+d)/(m+g)))/(4*v)},e.prototype._bezierCurveLength=function(t,e,n,r,i,o,a,s){for(var u=10,c=0,l=0,h=0,f=0,d=0,p=0,v=0,g=0,m=0,y=0,_=0,b=t,x=e,w=1;u>=w;++w)l=w/u,h=l*l,f=h*l,d=1-l,p=d*d,v=p*d,g=v*t+3*p*l*n+3*d*h*i+f*a,m=v*e+3*p*l*r+3*d*h*o+f*s,y=b-g,_=x-m,b=g,x=m,c+=Math.sqrt(y*y+_*_);return c},e.prototype._segmentsCount=function(t){var n=Math.ceil(t/e.CURVES.maxLength);return n<e.CURVES.minSegments?n=e.CURVES.minSegments:n>e.CURVES.maxSegments&&(n=e.CURVES.maxSegments),n},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=n,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var i=new m.Polygon(this.currentPath.shape.points.slice(-2));i.closed=!1,this.drawShape(i)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var n=new m.Polygon([t,e]);return n.closed=!1,this.drawShape(n),this},e.prototype.lineTo=function(t,e){var n=this.currentPath.shape.points,r=n[n.length-2],i=n[n.length-1];return(r!==t||i!==e)&&(n.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,a=0,s=0;0===o.length&&this.moveTo(0,0);for(var u=o[o.length-2],c=o[o.length-1],l=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(u,c,t,n,r,i)):20,h=1;l>=h;++h){var f=h/l;a=u+(t-u)*f,s=c+(n-c)*f,o.push(a+(t+(r-t)*f-a)*f,s+(n+(i-n)*f-s)*f)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,n,r,i,o,a){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,u=s[s.length-2],c=s[s.length-1];s.length-=2;var l=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(u,c,t,n,r,i,o,a)):20;return T["default"](u,c,t,n,r,i,o,a,l,s),this.dirty++,this},e.prototype.arcTo=function(t,e,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,a=o[o.length-2],s=o[o.length-1],u=s-e,c=a-t,l=r-e,h=n-t,f=Math.abs(u*h-c*l);if(1e-8>f||0===i)(o[o.length-2]!==t||o[o.length-1]!==e)&&o.push(t,e);else{var d=u*u+c*c,p=l*l+h*h,v=u*l+c*h,g=i*Math.sqrt(d)/f,m=i*Math.sqrt(p)/f,y=g*v/d,_=m*v/p,b=g*h+m*c,x=g*l+m*u,w=c*(m+y),T=u*(m+y),E=h*(g+_),S=l*(g+_),O=Math.atan2(T-x,w-b),M=Math.atan2(S-x,E-b);this.arc(b+t,x+e,i,O,M,c*l>h*u)}return this.dirty++,this},e.prototype.arc=function(t,n,r,i,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!1;if(i===o)return this;!a&&i>=o?o+=_.PI_2:a&&o>=i&&(i+=_.PI_2);var s=o-i,u=e.CURVES.adaptive?this._segmentsCount(Math.abs(s)*r):40*Math.ceil(Math.abs(s)/_.PI_2);if(0===s)return this;var c=t+Math.cos(i)*r,l=n+Math.sin(i)*r,h=this.currentPath?this.currentPath.shape.points:null;if(h){var f=Math.abs(h[h.length-2]-c),d=Math.abs(h[h.length-1]-l);.001>f&&.001>d||h.push(c,l)}else this.moveTo(c,l),h=this.currentPath.shape.points;for(var p=s/(2*u),v=2*p,g=Math.cos(p),m=Math.sin(p),y=u-1,b=y%1/y,x=0;y>=x;++x){var w=x+b*x,T=p+i+v*w,E=Math.cos(T),S=-Math.sin(T);h.push((g*E+m*S)*r+t,(g*-S+m*E)*r+n)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,n,r){return this.drawShape(new m.Rectangle(t,e,n,r)),this},e.prototype.drawRoundedRect=function(t,e,n,r,i){return this.drawShape(new m.RoundedRectangle(t,e,n,r,i)),this},e.prototype.drawCircle=function(t,e,n){return this.drawShape(new m.Circle(t,e,n)),this},e.prototype.drawEllipse=function(t,e,n,r){return this.drawShape(new m.Ellipse(t,e,n,r)),this},e.prototype.drawPolygon=function(t){var e=t,n=!0;if(e instanceof m.Polygon&&(n=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var i=new m.Polygon(e);return i.closed=n,this.drawShape(i),this},e.prototype.drawStar=function(t,e,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;i=i||r/2;for(var a=-1*Math.PI/2+o,s=2*n,u=_.PI_2/s,c=[],l=0;s>l;l++){var h=l%2?i:r,f=l*u+a;c.push(t+h*Math.cos(f),e+h*Math.sin(f))}return this.drawPolygon(c)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===_.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new g["default"](new f["default"](f["default"].WHITE)));var n=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)n.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var i=P,o=k;y.hex2rgb(r,i),y.hex2rgb(this.tint,o),i[0]*=o[0],i[1]*=o[1],i[2]*=o[2],n.tint=y.rgb2hex(i),this._prevRectTint=this.tint,this._prevRectFillColor=r}n.alpha=this.graphicsData[0].fillAlpha,n.worldAlpha=this.worldAlpha*n.alpha,n.blendMode=this.blendMode,n._texture._frame.width=e.width,n._texture._frame.height=e.height,n.transform.worldTransform=this.transform.worldTransform,n.anchor.set(-e.x/e.width,-e.y/e.height),n._onAnchorUpdate(),n._renderWebGL(t)},e.prototype._renderCanvas=function(t){this.isMask!==!0&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,C);for(var e=this.graphicsData,n=0;n<e.length;++n){var r=e[n];if(r.fill&&r.shape&&r.shape.contains(C.x,C.y)){if(r.holes)for(var i=0;i<r.holes.length;i++){var o=r.holes[i];if(o.contains(C.x,C.y))return!1}return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-(1/0),n=1/0,r=-(1/0);if(this.graphicsData.length)for(var i=0,o=0,a=0,s=0,u=0,c=0;c<this.graphicsData.length;c++){var l=this.graphicsData[c],h=l.type,f=l.lineWidth;if(i=l.shape,h===_.SHAPES.RECT||h===_.SHAPES.RREC)o=i.x-f/2,a=i.y-f/2,s=i.width+f,u=i.height+f,t=t>o?o:t,e=o+s>e?o+s:e,n=n>a?a:n,r=a+u>r?a+u:r;else if(h===_.SHAPES.CIRC)o=i.x,a=i.y,s=i.radius+f/2,u=i.radius+f/2,t=t>o-s?o-s:t,e=o+s>e?o+s:e,n=n>a-u?a-u:n,r=a+u>r?a+u:r;else if(h===_.SHAPES.ELIP)o=i.x,a=i.y,s=i.width+f/2,u=i.height+f/2,t=t>o-s?o-s:t,e=o+s>e?o+s:e,n=n>a-u?a-u:n,r=a+u>r?a+u:r;else for(var d=i.points,p=0,v=0,g=0,m=0,y=0,b=0,x=0,w=0,T=0;T+2<d.length;T+=2)o=d[T],a=d[T+1],p=d[T+2],v=d[T+3],g=Math.abs(p-o),m=Math.abs(v-a),u=f,s=Math.sqrt(g*g+m*m),1e-9>s||(y=(u/s*m+g)/2,b=(u/s*g+m)/2,x=(p+o)/2,w=(v+a)/2,t=t>x-y?x-y:t,e=x+y>e?x+y:e,n=n>w-b?w-b:n,r=w+b>r?w+b:r)}else t=0,e=0,n=0,r=0;var E=this.boundsPadding;this._localBounds.minX=t-E,this._localBounds.maxX=e+E,this._localBounds.minY=n-E,this._localBounds.maxY=r+E},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new p["default"](this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===_.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.getLocalBounds(),r=l["default"].create(n.width,n.height,t,e);O||(O=new S["default"]),this.transform.updateLocalTransform(),this.transform.localTransform.copy(M),M.invert(),M.tx-=n.x,M.ty-=n.y,O.render(this,r,!0,M);var i=f["default"].fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return i.baseTexture.resolution=e,i.baseTexture.update(),i},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var n=0;n<this.graphicsData.length;++n)this.graphicsData[n].destroy();for(var r in this._webGL)for(var i=0;i<this._webGL[r].data.length;++i)this._webGL[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(u["default"]);e["default"]=A,A._SPRITE_TEXTURE=null,A.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e,r,i,o,a,s,u,c,l){n(this,t),this.lineWidth=e,this.lineAlignment=l,this.nativeLines=u,this.lineColor=r,this.lineAlpha=i,this._lineTint=r,this.fillColor=o,this.fillAlpha=a,this._fillTint=o,this.fill=s,this.holes=[],this.shape=c,this.type=c.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();e["default"]=r},function(t,e){"use strict";function n(t,e,n,r,i,o,a,s,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],l=0,h=0,f=0,d=0,p=0;c.push(t,e);for(var v=1,g=0;u>=v;++v)g=v/u,l=1-g,h=l*l,f=h*l,d=g*g,p=d*g,c.push(f*t+3*h*g*n+3*l*d*i+p*a,f*e+3*h*g*r+3*l*d*o+p*s);return c}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(213),u=n(174),c=n(245),l=r(c),h=n(247),f=r(h),d=n(281),p=r(d),v=n(282),g=r(v),m=n(283),y=r(m),_=n(285),b=r(_),x=n(286),w=r(x),T=n(287),E=r(T),S=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=n.gl,r.CONTEXT_UID=0,r}return a(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new g["default"](this.gl)},e.prototype.destroy=function(){l["default"].prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,n=e.gl,r=void 0,i=t._webGL[this.CONTEXT_UID];i&&t.dirty===i.dirty||(this.updateGraphics(t),i=t._webGL[this.CONTEXT_UID]);var o=this.primitiveShader;e.bindShader(o),e.state.setBlendMode(t.blendMode);for(var a=0,u=i.data.length;u>a;a++){r=i.data[a];var c=r.shader;e.bindShader(c),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),
c.uniforms.tint=s.hex2rgb(t.tint),c.uniforms.alpha=t.worldAlpha,e.bindVao(r.vao),r.nativeLines?n.drawArrays(n.LINES,0,r.points.length/6):r.vao.draw(n.TRIANGLE_STRIP,r.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,n=t._webGL[this.CONTEXT_UID];if(n||(n=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),n.dirty=t.dirty,t.clearDirty!==n.clearDirty){n.clearDirty=t.clearDirty;for(var r=0;r<n.data.length;r++)this.graphicsDataPool.push(n.data[r]);n.data.length=0,n.lastIndex=0}for(var i=void 0,o=void 0,a=n.lastIndex;a<t.graphicsData.length;a++){var s=t.graphicsData[a];i=this.getWebGLData(n,0),s.nativeLines&&s.lineWidth&&(o=this.getWebGLData(n,0,!0),n.lastIndex++),s.type===u.SHAPES.POLY&&y["default"](s,i,o),s.type===u.SHAPES.RECT?b["default"](s,i,o):s.type===u.SHAPES.CIRC||s.type===u.SHAPES.ELIP?E["default"](s,i,o):s.type===u.SHAPES.RREC&&w["default"](s,i,o),n.lastIndex++}this.renderer.bindVao(null);for(var c=0;c<n.data.length;c++)i=n.data[c],i.dirty&&i.upload()},e.prototype.getWebGLData=function(t,e,n){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==n||r.points.length>32e4)&&(r=this.graphicsDataPool.pop()||new p["default"](this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),r.nativeLines=n,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(l["default"]);e["default"]=S,f["default"].registerPlugin("graphics",S)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(185),a=r(o),s=function(){function t(e,n,r){i(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=a["default"].GLBuffer.createVertexBuffer(e),this.indexBuffer=a["default"].GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=n,this.vao=new a["default"].VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,n.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,n.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(262),u=r(s),c=function(t){function e(n){return i(this,e),o(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return a(e,t),e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){t.points=t.shape.points.slice();var r=t.points;if(t.fill&&r.length>=6){for(var i=[],o=t.holes,u=0;u<o.length;u++){var l=o[u];i.push(r.length/2),r=r.concat(l.points)}var h=e.points,f=e.indices,d=r.length/2,p=s.hex2rgb(t.fillColor),v=t.fillAlpha,g=p[0]*v,m=p[1]*v,y=p[2]*v,_=c["default"](r,i,2);if(!_)return;for(var b=h.length/6,x=0;x<_.length;x+=3)f.push(_[x]+b),f.push(_[x]+b),f.push(_[x+1]+b),f.push(_[x+2]+b),f.push(_[x+2]+b);for(var w=0;d>w;w++)h.push(r[2*w],r[2*w+1],g,m,y,v)}t.lineWidth>0&&a["default"](t,e,n)}e.__esModule=!0,e["default"]=i;var o=n(284),a=r(o),s=n(213),u=n(218),c=r(u)},function(t,e,n){"use strict";function r(t,e){var n=t.points;if(0!==n.length){var r=new o.Point(n[0],n[1]),i=new o.Point(n[n.length-2],n[n.length-1]);if(r.x===i.x&&r.y===i.y){n=n.slice(),n.pop(),n.pop(),i=new o.Point(n[n.length-2],n[n.length-1]);var s=i.x+.5*(r.x-i.x),u=i.y+.5*(r.y-i.y);n.unshift(s,u),n.push(s,u)}var c=e.points,l=e.indices,h=n.length/2,f=n.length,d=c.length/6,p=t.lineWidth/2,v=a.hex2rgb(t.lineColor),g=t.lineAlpha,m=v[0]*g,y=v[1]*g,_=v[2]*g,b=n[0],x=n[1],w=n[2],T=n[3],E=0,S=0,O=-(x-T),M=b-w,C=0,P=0,k=0,A=0,I=Math.sqrt(O*O+M*M);O/=I,M/=I,O*=p,M*=p;var R=t.lineAlignment,D=2*(1-R),j=2*R;c.push(b-O*D,x-M*D,m,y,_,g),c.push(b+O*j,x+M*j,m,y,_,g);for(var L=1;h-1>L;++L){b=n[2*(L-1)],x=n[2*(L-1)+1],w=n[2*L],T=n[2*L+1],E=n[2*(L+1)],S=n[2*(L+1)+1],O=-(x-T),M=b-w,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=p,M*=p,C=-(T-S),P=w-E,I=Math.sqrt(C*C+P*P),C/=I,P/=I,C*=p,P*=p;var N=-M+x-(-M+T),F=-O+w-(-O+b),U=(-O+b)*(-M+T)-(-O+w)*(-M+x),B=-P+S-(-P+T),X=-C+w-(-C+E),H=(-C+E)*(-P+T)-(-C+w)*(-P+S),W=N*X-B*F;if(Math.abs(W)<.1)W+=10.1,c.push(w-O*D,T-M*D,m,y,_,g),c.push(w+O*j,T+M*j,m,y,_,g);else{var G=(F*H-X*U)/W,z=(B*U-N*H)/W,V=(G-w)*(G-w)+(z-T)*(z-T);V>196*p*p?(k=O-C,A=M-P,I=Math.sqrt(k*k+A*A),k/=I,A/=I,k*=p,A*=p,c.push(w-k*D,T-A*D),c.push(m,y,_,g),c.push(w+k*j,T+A*j),c.push(m,y,_,g),c.push(w-k*j*D,T-A*D),c.push(m,y,_,g),f++):(c.push(w+(G-w)*D,T+(z-T)*D),c.push(m,y,_,g),c.push(w-(G-w)*j,T-(z-T)*j),c.push(m,y,_,g))}}b=n[2*(h-2)],x=n[2*(h-2)+1],w=n[2*(h-1)],T=n[2*(h-1)+1],O=-(x-T),M=b-w,I=Math.sqrt(O*O+M*M),O/=I,M/=I,O*=p,M*=p,c.push(w-O*D,T-M*D),c.push(m,y,_,g),c.push(w+O*j,T+M*j),c.push(m,y,_,g),l.push(d);for(var Y=0;f>Y;++Y)l.push(d++);l.push(d-1)}}function i(t,e){var n=0,r=t.points;if(0!==r.length){var i=e.points,o=r.length/2,s=a.hex2rgb(t.lineColor),u=t.lineAlpha,c=s[0]*u,l=s[1]*u,h=s[2]*u;for(n=1;o>n;n++){var f=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],v=r[2*n+1];i.push(f,d),i.push(c,l,h,u),i.push(p,v),i.push(c,l,h,u)}}}e.__esModule=!0,e["default"]=function(t,e,n){t.nativeLines?i(t,n):r(t,e)};var o=n(175),a=n(213)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=t.shape,i=r.x,o=r.y,u=r.width,c=r.height;if(t.fill){var l=s.hex2rgb(t.fillColor),h=t.fillAlpha,f=l[0]*h,d=l[1]*h,p=l[2]*h,v=e.points,g=e.indices,m=v.length/6;v.push(i,o),v.push(f,d,p,h),v.push(i+u,o),v.push(f,d,p,h),v.push(i,o+c),v.push(f,d,p,h),v.push(i+u,o+c),v.push(f,d,p,h),g.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var y=t.points;t.points=[i,o,i+u,o,i+u,o+c,i,o+c,i,o],a["default"](t,e,n),t.points=y}}e.__esModule=!0,e["default"]=i;var o=n(284),a=r(o),s=n(213)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=t.shape,i=r.x,o=r.y,s=r.width,c=r.height,f=r.radius,d=[];if(d.push(i,o+f),a(i,o+c-f,i,o+c,i+f,o+c,d),a(i+s-f,o+c,i+s,o+c,i+s,o+c-f,d),a(i+s,o+f,i+s,o,i+s-f,o,d),a(i+f,o,i,o,i,o+f+1e-10,d),t.fill){for(var p=h.hex2rgb(t.fillColor),v=t.fillAlpha,g=p[0]*v,m=p[1]*v,y=p[2]*v,_=e.points,b=e.indices,x=_.length/6,w=u["default"](d,null,2),T=0,E=w.length;E>T;T+=3)b.push(w[T]+x),b.push(w[T]+x),b.push(w[T+1]+x),b.push(w[T+2]+x),b.push(w[T+2]+x);for(var S=0,O=d.length;O>S;S++)_.push(d[S],d[++S],g,m,y,v)}if(t.lineWidth){var M=t.points;t.points=d,l["default"](t,e,n),t.points=M}}function o(t,e,n){var r=e-t;return t+r*n}function a(t,e,n,r,i,a){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],u=20,c=s,l=0,h=0,f=0,d=0,p=0,v=0,g=0,m=0;u>=g;++g)m=g/u,l=o(t,n,m),h=o(e,r,m),f=o(n,i,m),d=o(r,a,m),p=o(l,f,m),v=o(h,d,m),c.push(p,v);return c}e.__esModule=!0,e["default"]=i;var s=n(218),u=r(s),c=n(284),l=r(c),h=n(213)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){var r=t.shape,i=r.x,o=r.y,c=void 0,l=void 0;if(t.type===s.SHAPES.CIRC?(c=r.radius,l=r.radius):(c=r.width,l=r.height),0!==c&&0!==l){var h=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),f=2*Math.PI/h;if(t.fill){var d=u.hex2rgb(t.fillColor),p=t.fillAlpha,v=d[0]*p,g=d[1]*p,m=d[2]*p,y=e.points,_=e.indices,b=y.length/6;_.push(b);for(var x=0;h+1>x;x++)y.push(i,o,v,g,m,p),y.push(i+Math.sin(f*x)*c,o+Math.cos(f*x)*l,v,g,m,p),_.push(b++,b++);_.push(b-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;h>T;T++)t.points.push(i+Math.sin(f*-T)*c,o+Math.cos(f*-T)*l);t.points.push(t.points[0],t.points[1]),a["default"](t,e,n),t.points=w}}}e.__esModule=!0,e["default"]=i;var o=n(284),a=r(o),s=n(174),u=n(213)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(235),a=r(o),s=n(174),u=function(){function t(e){i(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldAlpha,i=t.transform.worldTransform,o=e.resolution;n.setTransform(i.a*o,i.b*o,i.c*o,i.d*o,i.tx*o,i.ty*o),(t.canvasTintDirty!==t.dirty||t._prevTint!==t.tint)&&this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var u=t.graphicsData[a],c=u.shape,l=u._fillTint,h=u._lineTint;if(n.lineWidth=u.lineWidth,u.type===s.SHAPES.POLY){n.beginPath(),this.renderPolygon(c.points,c.closed,n);for(var f=0;f<u.holes.length;f++)this.renderPolygon(u.holes[f].points,!0,n);u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===s.SHAPES.RECT)(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),n.fillRect(c.x,c.y,c.width,c.height)),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.strokeRect(c.x,c.y,c.width,c.height));else if(u.type===s.SHAPES.CIRC)n.beginPath(),n.arc(c.x,c.y,c.radius,0,2*Math.PI),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke());else if(u.type===s.SHAPES.ELIP){var d=2*c.width,p=2*c.height,v=c.x-d/2,g=c.y-p/2;n.beginPath();var m=.5522848,y=d/2*m,_=p/2*m,b=v+d,x=g+p,w=v+d/2,T=g+p/2;n.moveTo(v,T),n.bezierCurveTo(v,T-_,w-y,g,w,g),n.bezierCurveTo(w+y,g,b,T-_,b,T),n.bezierCurveTo(b,T+_,w+y,x,w,x),n.bezierCurveTo(w-y,x,v,T+_,v,T),n.closePath(),u.fill&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}else if(u.type===s.SHAPES.RREC){var E=c.x,S=c.y,O=c.width,M=c.height,C=c.radius,P=Math.min(O,M)/2|0;C=C>P?P:C,n.beginPath(),n.moveTo(E,S+C),n.lineTo(E,S+M-C),n.quadraticCurveTo(E,S+M,E+C,S+M),n.lineTo(E+O-C,S+M),n.quadraticCurveTo(E+O,S+M,E+O,S+M-C),n.lineTo(E+O,S+C),n.quadraticCurveTo(E+O,S,E+O-C,S),n.lineTo(E+C,S),n.quadraticCurveTo(E,S,E,S+C),n.closePath(),(u.fillColor||0===u.fillColor)&&(n.globalAlpha=u.fillAlpha*r,n.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),n.fill()),u.lineWidth&&(n.globalAlpha=u.lineAlpha*r,n.strokeStyle="#"+("00000"+(0|h).toString(16)).substr(-6),n.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,n=(t.tint>>8&255)/255,r=(255&t.tint)/255,i=0;i<t.graphicsData.length;++i){var o=t.graphicsData[i],a=0|o.fillColor,s=0|o.lineColor;o._fillTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*n*255<<8)+(255&a)/255*r*255,o._lineTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*n*255<<8)+(255&s)/255*r*255}},t.prototype.renderPolygon=function(t,e,n){n.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)n.lineTo(t[2*r],t[2*r+1]);e&&n.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();e["default"]=u,a["default"].registerPlugin("graphics",u)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(173),a=n(213),s=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;r(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=n,this.resolution=this._updateResolution(i||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return i(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,n=a.getResolutionOfUrl(t,null);return null===n&&(n=void 0!==e?parseFloat(e):1),1!==n&&(this.baseTexture.resolution=n,this.baseTexture.update()),n},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var n=e,r=t.BATCH_SIZE,i=this.baseTexture.sourceScale;r>n-e&&n<this._frameKeys.length;){var a=this._frameKeys[n],s=this._frames[a],u=s.frame;if(u){var c=null,l=null,h=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,f=new o.Rectangle(0,0,Math.floor(h.w*i)/this.resolution,Math.floor(h.h*i)/this.resolution);c=s.rotated?new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.h*i)/this.resolution,Math.floor(u.w*i)/this.resolution):new o.Rectangle(Math.floor(u.x*i)/this.resolution,Math.floor(u.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new o.Rectangle(Math.floor(s.spriteSourceSize.x*i)/this.resolution,Math.floor(s.spriteSourceSize.y*i)/this.resolution,Math.floor(u.w*i)/this.resolution,Math.floor(u.h*i)/this.resolution)),this.textures[a]=new o.Texture(this.baseTexture,c,f,l,s.rotated?2:0,s.anchor),o.Texture.addToCache(this.textures[a],a)}n++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var n=t[e],r=Array.isArray(n),i=0,n=r?n:n[Symbol.iterator]();;){var o;if(r){if(i>=n.length)break;o=n[i++]}else{if(i=n.next(),i.done)break;o=i.value}var a=o;this.animations[e].push(this.textures[a])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())},0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!1;for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();e["default"]=s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(291),s=n(212),u=r(s),c=n(230),l=n(205),h=r(l),f=n(174),d=function(){function t(e,n,r,o,s){i(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:n||h["default"].RENDER_OPTIONS.height,forceCanvas:!!o,sharedTicker:!!s},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=a.autoDetectRenderer(e),this.stage=new u["default"],this._ticker=null,this.ticker=e.sharedTicker?c.shared:new c.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var n=this._ticker;this.ticker=null,n.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},o(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,f.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();e["default"]=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e,n,r){var i=t&&t.forceCanvas;return void 0!==r&&(i=r),!i&&s.isWebGLSupported()?new h["default"](t,e,n):new c["default"](t,e,n)}e.__esModule=!0,e.autoDetectRenderer=o;var a=n(213),s=i(a),u=n(235),c=r(u),l=n(247),h=r(l)},function(t,e){"use strict";function n(t){if(!i[t]){var e=(new Error).stack;"undefined"==typeof e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),i[t]=!0}}function r(t){var e=t.mesh,r=t.particles,i=t.extras,o=t.filters,a=t.prepare,s=t.loaders,u=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var c=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=function(e){var r=c[e];Object.defineProperty(t[r.parent],"DEFAULT",{get:function(){return n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]},set:function(e){n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]=e}})},h=0;h<c.length;h++)l(h);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,r){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,r)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,r,i){this.legacyRenderer.render(t,this,r,e,!i),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),e=e||{},e instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=t.indexOf("italic")>1?"italic":t.indexOf("oblique")>-1?"oblique":"normal",this._fontVariant=t.indexOf("small-caps")>-1?"small-caps":"normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var o=0;r>o;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(r>-1&&r<e.length-1){this._fontFamily="";for(var a=r+1;a<e.length;++a)this._fontFamily+=e[a]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,r){t.Texture.addToCache(e,r),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var f=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),f=t},get:function(){return f}}),a.BasePrepare&&(a.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),a.canvas&&Object.defineProperty(a.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),0/0}}),a.webgl&&Object.defineProperty(a.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),0/0}}),s.Loader){var d=s.Resource,p=s.Loader;Object.defineProperties(d.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===d.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===d.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===d.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),
this.type===d.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===d.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}u.interactiveTarget&&Object.defineProperty(u.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),u.InteractionManager&&(Object.defineProperty(u.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles["default"]=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles["default"]}}),Object.defineProperty(u.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}e.__esModule=!0,e["default"]=r;var i={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(294);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(295);Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return r(o)["default"]}})},function(t,e){"use strict";e.__esModule=!0,e["default"]={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=n(173),s=i(a),u=n(207),c=r(u),l=n(294),h=r(l);s.utils.mixins.delayMixin(s.DisplayObject.prototype,h["default"]);var f=9,d=100,p=0,v=0,g=2,m=1,y=-1e3,_=-1e3,b=2,x=function(){function t(e){o(this,t),!c["default"].tablet&&!c["default"].phone||navigator.isCocoonJS||this.createTouchHook();var n=document.createElement("div");n.style.width=d+"px",n.style.height=d+"px",n.style.position="absolute",n.style.top=p+"px",n.style.left=v+"px",n.style.zIndex=g,this.div=n,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width=m+"px",e.style.height=m+"px",e.style.position="absolute",e.style.top=y+"px",e.style.left=_+"px",e.style.zIndex=b,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,n=0;n<e.length;n++)this.updateAccessibleObjects(e[n])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,n=t.height/this.renderer.height,r=this.div;r.style.left=t.left+"px",r.style.top=t.top+"px",r.style.width=this.renderer.width+"px",r.style.height=this.renderer.height+"px";for(var i=0;i<this.children.length;i++){var o=this.children[i];if(o.renderId!==this.renderId)o._accessibleActive=!1,s.utils.removeItems(this.children,i,1),this.div.removeChild(o._accessibleDiv),this.pool.push(o._accessibleDiv),o._accessibleDiv=null,i--,0===this.children.length&&this.deactivate();else{r=o._accessibleDiv;var a=o.hitArea,u=o.worldTransform;o.hitArea?(r.style.left=(u.tx+a.x*u.a)*e+"px",r.style.top=(u.ty+a.y*u.d)*n+"px",r.style.width=a.width*u.a*e+"px",r.style.height=a.height*u.d*n+"px"):(a=o.getBounds(),this.capHitArea(a),r.style.left=a.x*e+"px",r.style.top=a.y*n+"px",r.style.width=a.width*e+"px",r.style.height=a.height*n+"px",r.title!==o.accessibleTitle&&null!==o.accessibleTitle&&(r.title=o.accessibleTitle),r.getAttribute("aria-label")!==o.accessibleHint&&null!==o.accessibleHint&&r.setAttribute("aria-label",o.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||(e=document.createElement("button"),e.style.width=d+"px",e.style.height=d+"px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=g,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){t.keyCode===f&&this.activate()},t.prototype._onMouseMove=function(t){(0!==t.movementX||0!==t.movementY)&&this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();e["default"]=x,s.WebGLRenderer.registerPlugin("accessibility",x),s.CanvasRenderer.registerPlugin("accessibility",x)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(297);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(298);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(o)["default"]}})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(173),a=r(o),s=new a.Rectangle,u=4,c=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function e(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=!1,c=void 0,l=!1;t&&(t instanceof a.RenderTexture?c=t:(c=this.renderer.generateTexture(t),l=!0)),c?(n=c.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=n.resolution,i=c.frame,o=!1):(n=this.renderer.rootRenderTarget,r=n.resolution,o=!0,i=s,i.width=n.size.width,i.height=n.size.height);var h=i.width*r,f=i.height*r,d=new a.CanvasRenderTarget(h,f,1);if(n){e.bindRenderTarget(n);var p=new Uint8Array(u*h*f),v=e.gl;v.readPixels(i.x*r,i.y*r,h,f,v.RGBA,v.UNSIGNED_BYTE,p);var g=d.context.getImageData(0,0,h,f);g.data.set(p),d.context.putImageData(g,0,0),o&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-f))}return l&&c.destroy(!0),d.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0,c=!1;t&&(t instanceof a.RenderTexture?o=t:(o=this.renderer.generateTexture(t),c=!0)),o?(n=o.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],r=n.resolution,i=o.frame):(n=this.renderer.rootRenderTarget,r=n.resolution,i=s,i.width=n.size.width,i.height=n.size.height);var l=i.width*r,h=i.height*r,f=new Uint8Array(u*l*h);if(n){e.bindRenderTarget(n);var d=e.gl;d.readPixels(i.x*r,i.y*r,l,h,d.RGBA,d.UNSIGNED_BYTE,f)}return c&&o.destroy(!0),f},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e["default"]=c,a.WebGLRenderer.registerPlugin("extract",c)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(173),a=r(o),s=new a.Rectangle,u=function(){function t(e){i(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function e(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0;t&&(o=t instanceof a.RenderTexture?t:e.generateTexture(t)),o?(n=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(n=e.rootContext,i=s,i.width=this.renderer.width,i.height=this.renderer.height);var u=i.width*r,c=i.height*r,l=new a.CanvasRenderTarget(u,c,1),h=n.getImageData(i.x*r,i.y*r,u,c);return l.context.putImageData(h,0,0),l.canvas},t.prototype.pixels=function(t){var e=this.renderer,n=void 0,r=void 0,i=void 0,o=void 0;return t&&(o=t instanceof a.RenderTexture?t:e.generateTexture(t)),o?(n=o.baseTexture._canvasRenderTarget.context,r=o.baseTexture._canvasRenderTarget.resolution,i=o.frame):(n=e.rootContext,i=s,i.width=e.width,i.height=e.height),n.getImageData(0,0,i.width*r,i.height*r).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();e["default"]=u,a.CanvasRenderer.registerPlugin("extract",u)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var i=n(300);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(301);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(302);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(303);Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return r(s)["default"]}}),n(304),n(305),n(306)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=function(t){function e(n,r){i(this,e);var a=o(this,t.call(this,n[0]instanceof c.Texture?n[0]:n[0].texture));return a._textures=null,a._durations=null,a.textures=n,a._autoUpdate=r!==!1,a.animationSpeed=1,a.loop=!0,a.onComplete=null,a.onFrameChange=null,a.onLoop=null,a._currentTime=0,a.playing=!1,a}return a(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&c.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&c.ticker.shared.add(this.update,this,c.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;0>r;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n?this.onLoop():this.animationSpeed<0&&this.currentFrame>n&&this.onLoop()),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var n=[],r=0;r<t.length;++r)n.push(c.Texture.fromFrame(t[r]));return new e(n)},e.fromImages=function(t){for(var n=[],r=0;r<t.length;++r)n.push(c.Texture.fromImage(t[r]));return new e(n)},s(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof c.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}]),e}(c.Sprite);e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(243),f=r(h),d=new l.Point,p=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;o(this,e);var s=a(this,t.call(this,n));return s.tileTransform=new l.TransformStatic,s._width=r,s._height=i,s._canvasPattern=null,s.uvTransform=n.transform||new l.TextureMatrix(n),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return s(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var n=t.context,r=this.worldTransform,i=t.resolution,o=e.baseTexture,a=o.resolution,s=this.tilePosition.x/this.tileScale.x%e._frame.width*a,u=this.tilePosition.y/this.tileScale.y%e._frame.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new l.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215!==this.tint?(this.tintedTexture=f["default"].getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)):c.context.drawImage(o.source,-e._frame.x*a,-e._frame.y*a),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}n.globalAlpha=this.worldAlpha,n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),t.setBlendMode(this.blendMode),n.fillStyle=this._canvasPattern,n.scale(this.tileScale.x/a,this.tileScale.y/a);var h=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(n.translate(s,u),n.fillRect(-s+h,-u+d,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(n.translate(s+h,u+d),n.fillRect(-s,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,n,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,d);var e=this._width,n=this._height,r=-e*this.anchor._x;if(d.x>=r&&d.x<r+e){var i=-n*this.anchor._y;if(d.y>=i&&d.y<i+n)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,n,r){return new e(l.Texture.from(t),n,r)},e.fromFrame=function(t,n,r){var i=l.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(i,n,r)},e.fromImage=function(t,n,r,i,o){return new e(l.Texture.fromImage(t,i,o),n,r)},u(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(l.Sprite);e["default"]=p},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(173),u=r(s),c=n(174),l=(n(252),new u.Matrix),h=function(t){function e(n){i(this,e);var r=o(this,t.call(this,n));return r.shader=null,r.simpleShader=null,r.quad=null,r}return a(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new u.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new u.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,n=this.quad;e.bindVao(n.vao);var r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&(r=n.uvs,r[0]=r[6]=-t.anchor.x,r[1]=r[3]=-t.anchor.y,r[2]=r[4]=1-t.anchor.x,r[5]=r[7]=1-t.anchor.y),n.upload();var i=t._texture,o=i.baseTexture,a=t.tileTransform.localTransform,s=t.uvTransform,h=o.isPowerOfTwo&&i.frame.width===o.width&&i.frame.height===o.height;h&&(o._glTextures[e.CONTEXT_UID]?h=o.wrapMode!==c.WRAP_MODES.CLAMP:o.wrapMode===c.WRAP_MODES.CLAMP&&(o.wrapMode=c.WRAP_MODES.REPEAT));var f=h?this.simpleShader:this.shader;e.bindShader(f);var d=i.width,p=i.height,v=t._width,g=t._height;l.set(a.a*d/v,a.b*d/g,a.c*p/v,a.d*p/g,a.tx/v,a.ty/g),l.invert(),h?l.prepend(s.mapCoord):(f.uniforms.uMapCoord=s.mapCoord.toArray(!0),f.uniforms.uClampFrame=s.uClampFrame,f.uniforms.uClampOffset=s.uClampOffset),f.uniforms.uTransform=l.toArray(!0),f.uniforms.uColor=u.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,f.uniforms.uColor,o.premultipliedAlpha),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=e.bindTexture(i),e.setBlendMode(u.utils.correctBlendMode(t.blendMode,o.premultipliedAlpha)),n.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(u.ObjectRenderer);e["default"]=h,u.WebGLRenderer.registerPlugin("tilingSprite",h)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(177),f=r(h),d=n(213),p=n(205),v=r(p),g=function(t){function e(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(this,e);var i=a(this,t.call(this));return i._textWidth=0,i._textHeight=0,i._glyphs=[],i._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},i.font=r.font,i._text=n,i._maxWidth=0,i._maxLineHeight=0,i._letterSpacing=0,i._anchor=new f["default"](function(){i.dirty=!0},i,0,0),i.dirty=!1,i.updateText(),i}return s(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],n=this._font.size/t.size,r=new l.Point,i=[],o=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),s=a.length,u=this._maxWidth*t.size/this._font.size,c=null,h=0,f=0,d=0,p=-1,v=0,g=0,m=0,y=0;s>y;y++){var _=a.charCodeAt(y),b=a.charAt(y);if(/(?:\s)/.test(b)&&(p=y,v=h),"\r"!==b&&"\n"!==b){var x=t.chars[_];x&&(c&&x.kerning[c]&&(r.x+=x.kerning[c]),i.push({texture:x.texture,line:d,charCode:_,position:new l.Point(r.x+x.xOffset+this._letterSpacing/2,r.y+x.yOffset)}),r.x+=x.xAdvance+this._letterSpacing,h=r.x,m=Math.max(m,x.yOffset+x.texture.height),c=_,-1!==p&&u>0&&r.x>u&&(++g,l.utils.removeItems(i,1+p-g,1+y-p),y=p,p=-1,o.push(v),f=Math.max(f,v),d++,r.x=0,r.y+=t.lineHeight,c=null))}else o.push(h),f=Math.max(f,h),++d,++g,r.x=0,r.y+=t.lineHeight,c=null}var w=a.charAt(a.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(h=v),o.push(h),f=Math.max(f,h));for(var T=[],E=0;d>=E;E++){var S=0;"right"===this._font.align?S=f-o[E]:"center"===this._font.align&&(S=(f-o[E])/2),T.push(S)}for(var O=i.length,M=this.tint,C=0;O>C;C++){var P=this._glyphs[C];P?P.texture=i[C].texture:(P=new l.Sprite(i[C].texture),this._glyphs.push(P)),P.position.x=(i[C].position.x+T[i[C].line])*n,P.position.y=i[C].position.y*n,P.scale.x=P.scale.y=n,P.tint=M,P.parent||this.addChild(P)}for(var k=O;k<this._glyphs.length;++k)this.removeChild(this._glyphs[k]);if(this._textWidth=f*n,this._textHeight=(r.y+t.lineHeight)*n,0!==this.anchor.x||0!==this.anchor.y)for(var A=0;O>A;A++)this._glyphs[A].x-=this._textWidth*this.anchor.x,this._glyphs[A].y-=this._textHeight*this.anchor.y;this._maxLineHeight=m*n},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,n){var r={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],a=t.getElementsByTagName("page"),s=d.getResolutionOfUrl(a[0].getAttribute("file"),v["default"].RESOLUTION),u={};r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/s,r.chars={},n instanceof l.Texture&&(n=[n]);for(var c=0;c<a.length;c++){var h=a[c].getAttribute("id"),f=a[c].getAttribute("file");u[h]=n instanceof Array?n[c]:n[f]}for(var p=t.getElementsByTagName("char"),g=0;g<p.length;g++){var m=p[g],y=parseInt(m.getAttribute("id"),10),_=m.getAttribute("page")||0,b=new l.Rectangle(parseInt(m.getAttribute("x"),10)/s+u[_].frame.x/s,parseInt(m.getAttribute("y"),10)/s+u[_].frame.y/s,parseInt(m.getAttribute("width"),10)/s,parseInt(m.getAttribute("height"),10)/s);r.chars[y]={xOffset:parseInt(m.getAttribute("xoffset"),10)/s,yOffset:parseInt(m.getAttribute("yoffset"),10)/s,xAdvance:parseInt(m.getAttribute("xadvance"),10)/s,kerning:{},texture:new l.Texture(u[_].baseTexture,b),page:_}}for(var x=t.getElementsByTagName("kerning"),w=0;w<x.length;w++){var T=x[w],E=parseInt(T.getAttribute("first"),10)/s,S=parseInt(T.getAttribute("second"),10)/s,O=parseInt(T.getAttribute("amount"),10)/s;r.chars[S]&&(r.chars[S].kerning[E]=O)}return e.fonts[r.font]=r,r},u(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(l.Container);e["default"]=g,g.fonts={}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=n(173),s=i(a),u=n(220),c=r(u),l=n(221),h=r(l),f=n(213),d=s.DisplayObject,p=new s.Matrix;
d.prototype._cacheAsBitmap=!1,d.prototype._cacheData=!1;var v=function g(){o(this,g),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(d.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new v),e=this._cacheData,e.originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),d.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},d.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var n=this.getLocalBounds().clone();if(this._filters){var r=this._filters[0].padding;n.pad(r)}var i=t._activeRenderTarget,o=t.filterManager.filterStack,a=s.RenderTexture.create(0|n.width,0|n.height),u="cacheAsBitmap_"+f.uid();this._cacheData.textureCacheId=u,h["default"].addToCache(a.baseTexture,u),c["default"].addToCache(a,u);var l=p;l.tx=-n.x,l.ty=-n.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,a,!0,l,!0),t.bindRenderTarget(i),t.filterManager.filterStack=o,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var d=new s.Sprite(a);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=e,d._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},d.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},d.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),n=this.alpha;this.alpha=1;var r=t.context,i=s.RenderTexture.create(0|e.width,0|e.height),o="cacheAsBitmap_"+f.uid();this._cacheData.textureCacheId=o,h["default"].addToCache(i.baseTexture,o),c["default"].addToCache(i,o);var a=p;this.transform.localTransform.copy(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,i,!0,a,!1),t.context=r,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var u=new s.Sprite(i);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(e.x/e.width),u.anchor.y=-(e.y/e.height),u._bounds=this._bounds,u.alpha=n,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=u,this.containsPoint=u.containsPoint.bind(u)}},d.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},d.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},d.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,h["default"].removeFromCache(this._cacheData.textureCacheId),c["default"].removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},d.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}var i=n(173),o=r(i);o.DisplayObject.prototype.name=null,o.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}var i=n(173),o=r(i);o.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new o.Point,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1;return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(308);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(309);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(310);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(311);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(312);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return r(u)["default"]}});var c=n(316);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return r(c)["default"]}});var l=n(317);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return r(l)["default"]}});var h=n(318);Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return r(h)["default"]}})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(173),u=r(s),c=(n(252),function(t){function e(){return i(this,e),o(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return a(e,t),e}(u.Filter));e["default"]=c},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=(n(252),function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();i(this,e);var a=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return a.noise=n,a.seed=r,a}return a(e,t),s(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(c.Filter));e["default"]=l},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=(n(252),function(t){function e(n,r){i(this,e);var a=new c.Matrix;n.renderable=!1;var s=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=n,s.maskMatrix=a,s.uniforms.mapSampler=n._texture,s.uniforms.filterMatrix=a,s.uniforms.scale={x:1,y:1},(null===r||void 0===r)&&(r=20),s.scale=new c.Point(r,r),s}return a(e,t),e.prototype.apply=function(t,e,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,n)},s(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(c.Filter));e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(312),f=r(h),d=n(316),p=r(d),v=function(t){function e(n,r,i,s){o(this,e);var u=a(this,t.call(this));return u.blurXFilter=new f["default"](n,r,i,s),u.blurYFilter=new p["default"](n,r,i,s),u.padding=0,u.resolution=i||l.settings.RESOLUTION,u.quality=r||4,u.blur=n||8,u}return s(e,t),e.prototype.apply=function(t,e,n){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,n,!1),t.returnRenderTarget(r)},u(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(l.Filter);e["default"]=v},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(313),f=r(h),d=n(314),p=r(d),v=n(315),g=r(v),m=function(t){function e(n,r,i,s){o(this,e),s=s||5;var u=f["default"](s,!0),c=p["default"](s),h=a(this,t.call(this,u,c));return h.resolution=i||l.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return s(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,o=g["default"](i);this.vertexSrc=f["default"](o,!0),this.fragmentSrc=p["default"](o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.width*(n.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var a=t.getRenderTarget(!0),s=e,u=a,c=0;c<this.passes-1;c++){t.applyFilter(this,s,u,!0);var l=u;u=s,s=l}t.applyFilter(this,s,n,r),t.returnRenderTarget(a)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);e["default"]=m},function(t,e){"use strict";function n(t,e){var n=Math.ceil(t/2),i=r,o="",a=void 0;a=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;t>s;s++){var u=a.replace("%index%",s);u=u.replace("%sampleIndex%",s-(n-1)+".0"),o+=u,o+="\n"}return i=i.replace("%blur%",o),i=i.replace("%size%",t)}e.__esModule=!0,e["default"]=n;var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e){"use strict";function n(t){for(var e=r[t],n=e.length,o=i,a="",s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",u=void 0,c=0;t>c;c++){var l=s.replace("%index%",c);u=c,c>=n&&(u=t-c-1),l=l.replace("%value%",e[u]),a+=l,a+="\n"}return o=o.replace("%blur%",a),o=o.replace("%size%",t)}e.__esModule=!0,e["default"]=n;var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},i=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e){"use strict";function n(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),n=15;n>e;)n-=2;return n}e.__esModule=!0,e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(313),f=r(h),d=n(314),p=r(d),v=n(315),g=r(v),m=function(t){function e(n,r,i,s){o(this,e),s=s||5;var u=f["default"](s,!1),c=p["default"](s),h=a(this,t.call(this,u,c));return h.resolution=i||l.settings.RESOLUTION,h._quality=0,h.quality=r||4,h.strength=n||8,h.firstRun=!0,h}return s(e,t),e.prototype.apply=function(t,e,n,r){if(this.firstRun){var i=t.renderer.gl,o=g["default"](i);this.vertexSrc=f["default"](o,!1),this.fragmentSrc=p["default"](o),this.firstRun=!1}if(this.uniforms.strength=1/n.size.height*(n.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,n,r);else{for(var a=t.getRenderTarget(!0),s=e,u=a,c=0;c<this.passes-1;c++){t.applyFilter(this,s,u,!0);var l=u;u=s,s=l}t.applyFilter(this,s,n,r),t.returnRenderTarget(a)}},u(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(l.Filter);e["default"]=m},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=(n(252),function(t){function e(){i(this,e);var n=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return n.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],n.alpha=1,n}return a(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,n=t;e&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n},e.prototype._multiply=function(t,e,n){return t[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],t[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],t[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],t[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],t[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],t[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],t[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],t[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],t[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],t[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],t[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],t[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],t[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],t[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],t[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],t[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],t[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],t[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],t[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],t[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.greyscale=function(t,e){var n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.blackAndWhite=function(t){var e=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=Math.sqrt,o=1/3,a=i(o),s=n+(1-n)*o,u=o*(1-n)-a*r,c=o*(1-n)+a*r,l=o*(1-n)+a*r,h=n+o*(1-n),f=o*(1-n)-a*r,d=o*(1-n)-a*r,p=o*(1-n)+a*r,v=n+o*(1-n),g=[s,u,c,0,0,l,h,f,0,0,d,p,v,0,0,0,0,0,1,0];this._loadMatrix(g,e)},e.prototype.contrast=function(t,e){var n=(t||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],n=2*t/3+1,r=(n-1)*-.5,i=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];

this._loadMatrix(i,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){var e=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.sepia=function(t){var e=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.technicolor=function(t){var e=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.polaroid=function(t){var e=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.toBGR=function(t){var e=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.kodachrome=function(t){var e=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.browni=function(t){var e=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.vintage=function(t){var e=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.colorTone=function(t,e,n,r,i){t=t||.2,e=e||.15,n=n||16770432,r=r||3375104;var o=(n>>16&255)/255,a=(n>>8&255)/255,s=(255&n)/255,u=(r>>16&255)/255,c=(r>>8&255)/255,l=(255&r)/255,h=[.3,.59,.11,0,0,o,a,s,t,0,u,c,l,e,0,o-u,a-c,s-l,0,0];this._loadMatrix(h,i)},e.prototype.night=function(t,e){t=t||.1;var n=[-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.predator=function(t,e){var n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.lsd=function(t){var e=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(e,t)},e.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},s(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(c.Filter));e["default"]=l,l.prototype.grayscale=l.prototype.greyscale},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=(n(252),function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;i(this,e);var r=o(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=n,r.glShaderKey="alpha",r}return a(e,t),s(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(c.Filter));e["default"]=l},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(320);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(321);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(324);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(323);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(322);Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return r(u)["default"]}})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(173),s=r(a),u=function(){function t(){i(this,t),this.global=new s.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,n){return t.worldTransform.applyInverse(n||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},o(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=n(173),l=i(c),h=n(320),f=r(h),d=n(322),p=r(d),v=n(323),g=r(v),m=n(204),y=r(m),_=n(324),b=r(_);l.utils.mixins.delayMixin(l.DisplayObject.prototype,b["default"]);var x=1,w={target:null,data:{global:null}},T=function(t){function e(n,r){o(this,e);var i=a(this,t.call(this));return r=r||{},i.renderer=n,i.autoPreventDefault=void 0!==r.autoPreventDefault?r.autoPreventDefault:!0,i.interactionFrequency=r.interactionFrequency||10,i.mouse=new f["default"],i.mouse.identifier=x,i.mouse.global.set(-999999),i.activeInteractionData={},i.activeInteractionData[x]=i.mouse,i.interactionDataPool=[],i.eventData=new p["default"],i.interactionDOMElement=null,i.moveWhenInside=!1,i.eventsAdded=!1,i.mouseOverRenderer=!1,i.supportsTouchEvents="ontouchstart"in window,i.supportsPointerEvents=!!window.PointerEvent,i.onPointerUp=i.onPointerUp.bind(i),i.processPointerUp=i.processPointerUp.bind(i),i.onPointerCancel=i.onPointerCancel.bind(i),i.processPointerCancel=i.processPointerCancel.bind(i),i.onPointerDown=i.onPointerDown.bind(i),i.processPointerDown=i.processPointerDown.bind(i),i.onPointerMove=i.onPointerMove.bind(i),i.processPointerMove=i.processPointerMove.bind(i),i.onPointerOut=i.onPointerOut.bind(i),i.processPointerOverOut=i.processPointerOverOut.bind(i),i.onPointerOver=i.onPointerOver.bind(i),i.cursorStyles={"default":"inherit",pointer:"pointer"},i.currentCursorMode=null,i.cursor=null,i._tempPoint=new l.Point,i.resolution=1,i.setTargetElement(i.renderer.view,i.renderer.resolution),i}return s(e,t),e.prototype.hitTest=function(t,e){return w.target=null,w.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(w,e,null,!0),w.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(l.ticker.shared.add(this.update,this,l.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(l.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=null;for(var e in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var n=this.activeInteractionData[e];if(n.originalEvent&&"touch"!==n.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,n.originalEvent,n);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch("undefined"==typeof e?"undefined":u(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,n){n.stopped||(n.currentTarget=t,n.type=e,t.emit(e,n),t[e]&&t[e](n))},e.prototype.mapPositionToPoint=function(t,e,n){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var i=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*i,t.y=(n-r.top)*(this.interactionDOMElement.height/r.height)*i},e.prototype.processInteractive=function(t,e,n,r,i){if(!e||!e.visible)return!1;var o=t.data.global;i=e.interactive||i;var a=!1,s=i,u=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(r=!1,u=!1)),s=!1):e._mask&&r&&(e._mask.containsPoint(o)||(r=!1,u=!1)),u&&e.interactiveChildren&&e.children)for(var c=e.children,l=c.length-1;l>=0;l--){var h=c[l],f=this.processInteractive(t,h,n,r,s);if(f){if(!h.parent)continue;s=!1,f&&(t.target&&(r=!1),a=!0)}}return i&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(a=!0),e.interactive&&(a&&!t.target&&(t.target=e),n&&n(t,e,!!a))),a},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var n=e.length,r=0;n>r;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);if(a.data.originalEvent=t,this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",a),"touch"===i.pointerType)this.emit("touchstart",a);else if("mouse"===i.pointerType||"pen"===i.pointerType){var s=2===i.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,n){var r=t.data,i=t.data.identifier;if(n)if(e.trackedPointers[i]||(e.trackedPointers[i]=new g["default"](i)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[i].rightDown=!0:e.trackedPointers[i].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,n){for(var r=this.normalizeToPointerData(t),i=r.length,o=t.target!==this.interactionDOMElement?"outside":"",a=0;i>a;a++){var s=r[a],u=this.getInteractionDataForPointerId(s),c=this.configureInteractionEventForDOMEvent(this.eventData,s,u);if(c.data.originalEvent=t,this.processInteractive(c,this.renderer._lastObjectRendered,n,e||!o),this.emit(e?"pointercancel":"pointerup"+o,c),"mouse"===s.pointerType||"pen"===s.pointerType){var l=2===s.button;this.emit(l?"rightup"+o:"mouseup"+o,c)}else"touch"===s.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,c),this.releaseInteractionDataForPointerId(s.pointerId,u))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var n=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===n.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,n){var r=t.data,i=t.data.identifier,o=e.trackedPointers[i],a="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType,u=!1;if(s){var c=2===r.button,l=g["default"].FLAGS,h=c?l.RIGHT_DOWN:l.LEFT_DOWN,f=void 0!==o&&o.flags&h;n?(this.dispatchEvent(e,c?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,c?"rightclick":"click",t),u=!0)):f&&this.dispatchEvent(e,c?"rightupoutside":"mouseupoutside",t),o&&(c?o.rightDown=!1:o.leftDown=!1)}n?(this.dispatchEvent(e,"pointerup",t),a&&this.dispatchEvent(e,"touchend",t),o&&((!s||u)&&this.dispatchEvent(e,"pointertap",t),a&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),a&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[i]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);("mouse"===e[0].pointerType||"pen"===e[0].pointerType)&&(this.didMove=!0,this.cursor=null);for(var n=e.length,r=0;n>r;r++){var i=e[r],o=this.getInteractionDataForPointerId(i),a=this.configureInteractionEventForDOMEvent(this.eventData,i,o);a.data.originalEvent=t;var s="touch"===i.pointerType?this.moveWhenInside:!0;this.processInteractive(a,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",a),"touch"===i.pointerType&&this.emit("touchmove",a),("mouse"===i.pointerType||"pen"===i.pointerType)&&this.emit("mousemove",a)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,n){var r=t.data,i="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,n),(!this.moveWhenInside||n)&&(this.dispatchEvent(e,"pointermove",t),i&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t),n=e[0];"mouse"===n.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(n),i=this.configureInteractionEventForDOMEvent(this.eventData,n,r);i.data.originalEvent=n,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===n.pointerType||"pen"===n.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},e.prototype.processPointerOverOut=function(t,e,n){var r=t.data,i=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,a=e.trackedPointers[i];n&&!a&&(a=e.trackedPointers[i]=new g["default"](i)),void 0!==a&&(n&&this.mouseOverRenderer?(a.over||(a.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):a.over&&(a.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),a.none&&delete e.trackedPointers[i]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t),n=e[0],r=this.getInteractionDataForPointerId(n),i=this.configureInteractionEventForDOMEvent(this.eventData,n,r);i.data.originalEvent=n,"mouse"===n.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),("mouse"===n.pointerType||"pen"===n.pointerType)&&this.emit("mouseover",i)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,n=void 0;return e===x||"mouse"===t.pointerType?n=this.mouse:this.activeInteractionData[e]?n=this.activeInteractionData[e]:(n=this.interactionDataPool.pop()||new f["default"],n.identifier=e,this.activeInteractionData[e]=n),n.copyEvent(t),n},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,n){return t.data=n,this.mapPositionToPoint(n.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(n.global.x=n.global.x/this.resolution,n.global.y=n.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=n.global.x,e.globalY=n.global.y),n.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var n=0,r=t.changedTouches.length;r>n;n++){var i=t.changedTouches[n];"undefined"==typeof i.button&&(i.button=t.touches.length?1:0),"undefined"==typeof i.buttons&&(i.buttons=t.touches.length?1:0),"undefined"==typeof i.isPrimary&&(i.isPrimary=1===t.touches.length&&"touchstart"===t.type),"undefined"==typeof i.width&&(i.width=i.radiusX||1),"undefined"==typeof i.height&&(i.height=i.radiusY||1),"undefined"==typeof i.tiltX&&(i.tiltX=0),"undefined"==typeof i.tiltY&&(i.tiltY=0),"undefined"==typeof i.pointerType&&(i.pointerType="touch"),"undefined"==typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"==typeof i.pressure&&(i.pressure=i.force||.5),i.twist=0,i.tangentialPressure=0,"undefined"==typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"==typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,e.push(i)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent?e.push(t):("undefined"==typeof t.isPrimary&&(t.isPrimary=!0),"undefined"==typeof t.width&&(t.width=1),"undefined"==typeof t.height&&(t.height=1),"undefined"==typeof t.tiltX&&(t.tiltX=0),"undefined"==typeof t.tiltY&&(t.tiltY=0),"undefined"==typeof t.pointerType&&(t.pointerType="mouse"),"undefined"==typeof t.pointerId&&(t.pointerId=x),"undefined"==typeof t.pressure&&(t.pressure=.5),t.twist=0,t.tangentialPressure=0,t.isNormalized=!0,e.push(t));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(y["default"]);e["default"]=T,l.WebGLRenderer.registerPlugin("interaction",T),l.CanvasRenderer.registerPlugin("interaction",T)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(){n(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();e["default"]=r},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){n(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!==(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!==(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();e["default"]=i,i.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e){"use strict";e.__esModule=!0,e["default"]={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var i=n(326);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return r(i)["default"]}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var o=n(334);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return r(o)["default"]}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return o.getResourcePath}});var a=n(335);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(327);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var u=n(290),c=r(u),l=n(336),h=r(l);e.Loader=h["default"];var f=new h["default"];f.destroy=function(){},e.shared=f;var d=c["default"].prototype;d._loader=null,Object.defineProperty(d,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?f:new h["default"]}return this._loader}}),d._parentDestroy=d.destroy,d.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){t.bitmapFont=u.BitmapText.registerFont(t.data,e)}e.__esModule=!0,e.parse=i,e["default"]=function(){return function(t,e){if(!t.data||t.type!==s.Resource.TYPE.XML)return void e();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return void e();var n=t.isDataUrl?"":a.dirname(t.url);t.isDataUrl&&("."===n&&(n=""),this.baseUrl&&n&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(n+="/")),n=n.replace(this.baseUrl,""),n&&"/"!==n.charAt(n.length-1)&&(n+="/");for(var r=t.data.getElementsByTagName("page"),o={},u=function(n){o[n.metadata.pageFile]=n.texture,Object.keys(o).length===r.length&&(i(t,o),e())},c=0;c<r.length;++c){var l=r[c].getAttribute("file"),h=n+l,f=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===h){p.metadata.pageFile=l,p.texture?u(p):p.onAfterMiddleware.add(u),f=!0;break}}if(!f){var v={crossOrigin:t.crossOrigin,loadType:s.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(h,v,u)}}}};var o=n(252),a=r(o),s=n(327),u=n(299)},function(t,e,n){"use strict";var r=n(328)["default"],i=n(332)["default"],o=n(331),a=n(333);r.Resource=i,r.async=o,r.base64=a,t.exports=r,t.exports["default"]=r},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(329),c=i(u),l=n(330),h=i(l),f=n(331),d=r(f),p=n(332),v=i(p),g=100,m=/(#[\w-]+)?$/,y=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;o(this,t),this.baseUrl=n,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,n){return e._loadResource(t,n)},this._queue=d.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new c["default"],this.onError=new c["default"],this.onLoad=new c["default"],this.onStart=new c["default"],this.onComplete=new c["default"]}return t.prototype.add=function(t,e,n,r){if(Array.isArray(t)){for(var i=0;i<t.length;++i)this.add(t[i]);return this}if("object"===("undefined"==typeof t?"undefined":a(t))&&(r=e||t.callback||t.onComplete,n=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(r=n,n=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof n&&(r=n,n=null),this.loading&&(!n||!n.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new v["default"](t,e,n),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var o=n.parentResource,s=[],u=0;u<o.children.length;++u)o.children[u].isComplete||s.push(o.children[u]);var c=o.progressChunk*(s.length+1),l=c/(s.length+2);o.children.push(this.resources[t]),o.progressChunk=l;for(var h=0;h<s.length;++h)s[h].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var t in this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=this._queue._tasks.length,n=100/e,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=n;

this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=h["default"](t,{strictMode:!0}),n=void 0;if(n=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=m.exec(n)[0];n=n.substr(0,n.length-r.length),n+=-1!==n.indexOf("?")?"&"+this.defaultQueryString:"?"+this.defaultQueryString,n+=r}return n},t.prototype._loadResource=function(t,e){var n=this;t._dequeue=e,d.eachSeries(this._beforeMiddleware,function(e,r){e.call(n,t,function(){r(t.isComplete?{}:null)})},function(){t.isComplete?n._onLoad(t):(t._onLoadBinding=t.onComplete.once(n._onLoad,n),t.load())},!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=g,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),d.eachSeries(this._afterMiddleware,function(n,r){n.call(e,t,r)},function(){t.onAfterMiddleware.dispatch(t),e.progress+=t.progressChunk,e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},s(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();e["default"]=y},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e,r,i){void 0===r&&(r=!1),n(this,t),this._fn=e,this._once=r,this._thisArg=i,this._next=this._prev=this._owner=null}return i(t,[{key:"detach",value:function(){return null===this._owner?!1:(this._owner.detach(this),!0)}}]),t}(),a=function(){function t(){n(this,t),this._head=this._tail=void 0}return i(t,[{key:"handlers",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],e=this._head;if(t)return!!e;for(var n=[];e;)n.push(e),e=e._next;return n}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return r(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return r(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this?this:(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this)}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,e["default"]=a,t.exports=e["default"]},function(t,e){"use strict";t.exports=function(t,e){e=e||{};for(var n={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=n.parser[e.strictMode?"strict":"loose"].exec(t),i={},o=14;o--;)i[n.key[o]]=r[o]||"";return i[n.q.name]={},i[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(i[n.q.name][e]=r)}),i}},function(t,e){"use strict";function n(){}function r(t,e,n,r){var i=0,o=t.length;!function a(s){return s||i===o?void(n&&n(s)):void(r?setTimeout(function(){e(t[i++],a)},1):e(t[i++],a))}()}function i(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}function o(t,e){function r(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(s.started=!0,null==t&&s.idle())return void setTimeout(function(){return s.drain()},1);var i={data:t,callback:"function"==typeof r?r:n};e?s._tasks.unshift(i):s._tasks.push(i),setTimeout(function(){return s.process()},1)}function o(t){return function(){a-=1,t.callback.apply(t,arguments),null!=arguments[0]&&s.error(arguments[0],t.data),a<=s.concurrency-s.buffer&&s.unsaturated(),s.idle()&&s.drain(),s.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var a=0,s={_tasks:[],concurrency:e,saturated:n,unsaturated:n,buffer:e/4,empty:n,drain:n,error:n,started:!1,paused:!1,push:function(t,e){r(t,!1,e)},kill:function(){a=0,s.drain=n,s.started=!1,s._tasks=[]},unshift:function(t,e){r(t,!0,e)},process:function(){for(;!s.paused&&a<s.concurrency&&s._tasks.length;){var e=s._tasks.shift();0===s._tasks.length&&s.empty(),a+=1,a===s.concurrency&&s.saturated(),t(e.data,i(o(e)))}},length:function(){return s._tasks.length},running:function(){return a},idle:function(){return s._tasks.length+a===0},pause:function(){s.paused!==!0&&(s.paused=!0)},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=1;t<=s.concurrency;t++)s.process()}}};return s}e.__esModule=!0,e.eachSeries=r,e.queue=o},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(){}function a(t,e,n){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=n)}function s(t){return t.toString().replace("object ","")}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(330),l=r(c),h=n(329),f=r(h),d=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),p=null,v=0,g=200,m=204,y=1223,_=2,b=function(){function t(e,n,r){if(i(this,t),"string"!=typeof e||"string"!=typeof n)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===n.indexOf("data:")),this.name=e,this.url=n,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=o,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new f["default"],this.onProgress=new f["default"],this.onComplete=new f["default"],this.onAfterMiddleware=new f["default"]}return t.setExtensionLoadType=function(e,n){a(t._loadTypeMap,e,n)},t.setExtensionXhrType=function(e,n){a(t._xhrTypeMap,e,n)},t.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},t.prototype.load=function(e){var n=this;if(!this.isLoading){if(this.isComplete)return void(e&&setTimeout(function(){return e(n)},1));switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||"string"!=typeof this.crossOrigin)&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:d&&this.crossOrigin?this._loadXdr():this._loadXhr()}}},t.prototype._hasFlag=function(t){return!!(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._loadElement=function(t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===t&&"undefined"!=typeof window.Image?new Image:document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},t.prototype._loadSourceElement=function(t){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===t&&"undefined"!=typeof window.Audio?new Audio:document.createElement(t),null===this.data)return void this.abort("Unsupported element: "+t);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,n=0;n<this.url.length;++n)this.data.appendChild(this._createSource(t,this.url[n],Array.isArray(e)?e[n]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.responseType=this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?t.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},t.prototype._createSource=function(t,e,n){n||(n=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=n,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(s(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnAbort=function(){this.abort(s(this.xhr)+" Request was aborted by the user.")},t.prototype._xdrOnTimeout=function(){this.abort(s(this.xhr)+" Request timed out.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,n="",r="undefined"==typeof e.status?g:e.status;(""===e.responseType||"text"===e.responseType||"undefined"==typeof e.responseType)&&(n=e.responseText),r===v&&(n.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=g:r===y&&(r=m);var i=r/100|0;if(i!==_)return void this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL);if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=n,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(n),this.type=t.TYPE.JSON}catch(o){return void this.abort("Error trying to parse loaded json: "+o)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var a=new DOMParser;this.data=a.parseFromString(n,"text/xml")}else{var s=document.createElement("div");s.innerHTML=n,this.data=s}this.type=t.TYPE.XML}catch(o){return void this.abort("Error trying to parse loaded xml: "+o)}else this.data=e.response||n;this.complete()},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";e=e||window.location,p||(p=document.createElement("a")),p.href=t,t=l["default"](p.href,{strictMode:!0});var n=!t.port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&n&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var n=t.indexOf("/");e=t.substring(n+1,t.indexOf(";",n))}else{var r=t.indexOf("?"),i=t.indexOf("#"),o=Math.min(r>-1?r:t.length,i>-1?i:t.length);t=t.substring(0,o),e=t.substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},u(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();e["default"]=b,b.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},b.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},b.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},b.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},b._loadTypeMap={gif:b.LOAD_TYPE.IMAGE,png:b.LOAD_TYPE.IMAGE,bmp:b.LOAD_TYPE.IMAGE,jpg:b.LOAD_TYPE.IMAGE,jpeg:b.LOAD_TYPE.IMAGE,tif:b.LOAD_TYPE.IMAGE,tiff:b.LOAD_TYPE.IMAGE,webp:b.LOAD_TYPE.IMAGE,tga:b.LOAD_TYPE.IMAGE,svg:b.LOAD_TYPE.IMAGE,"svg+xml":b.LOAD_TYPE.IMAGE,mp3:b.LOAD_TYPE.AUDIO,ogg:b.LOAD_TYPE.AUDIO,wav:b.LOAD_TYPE.AUDIO,mp4:b.LOAD_TYPE.VIDEO,webm:b.LOAD_TYPE.VIDEO},b._xhrTypeMap={xhtml:b.XHR_RESPONSE_TYPE.DOCUMENT,html:b.XHR_RESPONSE_TYPE.DOCUMENT,htm:b.XHR_RESPONSE_TYPE.DOCUMENT,xml:b.XHR_RESPONSE_TYPE.DOCUMENT,tmx:b.XHR_RESPONSE_TYPE.DOCUMENT,svg:b.XHR_RESPONSE_TYPE.DOCUMENT,tsx:b.XHR_RESPONSE_TYPE.DOCUMENT,gif:b.XHR_RESPONSE_TYPE.BLOB,png:b.XHR_RESPONSE_TYPE.BLOB,bmp:b.XHR_RESPONSE_TYPE.BLOB,jpg:b.XHR_RESPONSE_TYPE.BLOB,jpeg:b.XHR_RESPONSE_TYPE.BLOB,tif:b.XHR_RESPONSE_TYPE.BLOB,tiff:b.XHR_RESPONSE_TYPE.BLOB,webp:b.XHR_RESPONSE_TYPE.BLOB,tga:b.XHR_RESPONSE_TYPE.BLOB,json:b.XHR_RESPONSE_TYPE.JSON,text:b.XHR_RESPONSE_TYPE.TEXT,txt:b.XHR_RESPONSE_TYPE.TEXT,ttf:b.XHR_RESPONSE_TYPE.BUFFER,otf:b.XHR_RESPONSE_TYPE.BUFFER},b.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},function(t,e){"use strict";function n(t){for(var e="",n=0;n<t.length;){for(var i=[0,0,0],o=[0,0,0,0],a=0;a<i.length;++a)i[a]=n<t.length?255&t.charCodeAt(n++):0;o[0]=i[0]>>2,o[1]=(3&i[0])<<4|i[1]>>4,o[2]=(15&i[1])<<2|i[2]>>6,o[3]=63&i[2];var s=n-(t.length-1);switch(s){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var u=0;u<o.length;++u)e+=r.charAt(o[u])}return e}e.__esModule=!0,e.encodeBinary=n;var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){return t.isDataUrl?t.data.meta.image:s["default"].resolve(t.url.replace(e,""),t.data.meta.image)}e.__esModule=!0,e["default"]=function(){return function(t,e){var n=t.name+"_image";if(!t.data||t.type!==o.Resource.TYPE.JSON||!t.data.frames||this.resources[n])return void e();var r={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},a=i(t,this.baseUrl);this.add(n,a,r,function(n){if(n.error)return void e(n.error);var r=new u.Spritesheet(n.texture.baseTexture,t.data,t.url);r.parse(function(){t.spritesheet=r,t.textures=r.textures,e()})})}},e.getResourcePath=i;var o=n(327),a=n(223),s=r(a),u=n(173)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0,e["default"]=function(){return function(t,e){t.data&&t.type===i.Resource.TYPE.IMAGE&&(t.texture=a["default"].fromLoader(t.data,t.url,t.name)),e()}};var i=n(327),o=n(220),a=r(o)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(327),u=r(s),c=n(337),l=n(204),h=r(l),f=n(335),d=r(f),p=n(334),v=r(p),g=n(326),m=r(g),y=function(t){function e(n,r){i(this,e);var a=o(this,t.call(this,n,r));h["default"].call(a);for(var s=0;s<e._pixiMiddleware.length;++s)a.use(e._pixiMiddleware[s]());return a.onStart.add(function(t){return a.emit("start",t)}),a.onProgress.add(function(t,e){return a.emit("progress",t,e)}),a.onError.add(function(t,e,n){return a.emit("error",t,e,n)}),a.onLoad.add(function(t,e){return a.emit("load",t,e)}),a.onComplete.add(function(t,e){return a.emit("complete",t,e)}),a}return a(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(u["default"]);e["default"]=y;for(var _ in h["default"].prototype)y.prototype[_]=h["default"].prototype[_];y._pixiMiddleware=[c.blobMiddlewareFactory,d["default"],v["default"],m["default"]];var b=u["default"].Resource;b.setExtensionXhrType("fnt",b.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(){return function(t,e){if(!t.data)return void e();if(t.xhr&&t.xhrType===s["default"].XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var n=function(){var n=l.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=n,t.type=s["default"].TYPE.IMAGE,t.data.onload=function(){l.revokeObjectURL(n),t.data.onload=null,e()},{v:void 0}}();if("object"===("undefined"==typeof n?"undefined":o(n)))return n.v}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+c["default"].encodeBinary(t.xhr.responseText),t.type=s["default"].TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}}e.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.blobMiddlewareFactory=i;var a=n(332),s=r(a),u=n(333),c=r(u),l=window.URL||window.webkitURL},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(339);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(340);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(341);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(342);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(343);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return r(u)["default"]}});var c=n(344);Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return r(c)["default"]}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(173),l=i(c),h=n(220),f=r(h),d=new l.Point,p=new l.Polygon,v=function(t){function e(n,r,i,s,u){o(this,e);var c=a(this,t.call(this));return c._texture=n||f["default"].EMPTY,c.uvs=i||new Float32Array([0,0,1,0,1,1,0,1]),c.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),c.indices=s||new Uint16Array([0,1,3,2]),c.dirty=0,c.indexDirty=0,c.vertexDirty=0,c.autoUpdate=!0,c.blendMode=l.BLEND_MODES.NORMAL,c.canvasPadding=l.settings.MESH_CANVAS_PADDING,c.drawMode=u||e.DRAW_MODES.TRIANGLE_MESH,c.shader=null,c.tintRgb=new Float32Array([1,1,1]),c._glDatas={},c._uvTransform=new l.TextureMatrix(c._texture),c.uploadUvTransform=!1,c.pluginName="mesh",c}return s(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var n=this.vertices,r=p.points,i=this.indices,o=this.indices.length,a=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,s=0;o>s+2;s+=a){var u=2*i[s],c=2*i[s+1],l=2*i[s+2];if(r[0]=n[u],r[1]=n[u+1],r[2]=n[c],r[3]=n[c+1],r[4]=n[l],r[5]=n[l+1],p.contains(d.x,d.y))return!0}return!1},e.prototype.destroy=function(e){for(var n in this._glDatas){var r=this._glDatas[n];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},u(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return l.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=l.utils.hex2rgb(t,this.tintRgb)}}]),e}(l.Container);e["default"]=v,v.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(173),c=i(u),l=n(185),h=r(l),f=n(339),d=r(f),p=(n(252),c.Matrix.IDENTITY),v=function(t){function e(n){o(this,e);var r=a(this,t.call(this,n));return r.shader=null,r}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new c.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,n=e.gl,r=t._texture;if(r.valid){var i=t._glDatas[e.CONTEXT_UID];i||(e.bindVao(null),i={shader:this.shader,vertexBuffer:h["default"].GLBuffer.createVertexBuffer(n,t.vertices,n.STREAM_DRAW),uvBuffer:h["default"].GLBuffer.createVertexBuffer(n,t.uvs,n.STREAM_DRAW),indexBuffer:h["default"].GLBuffer.createIndexBuffer(n,t.indices,n.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty},i.vao=new h["default"].VertexArrayObject(n).addIndex(i.indexBuffer).addAttribute(i.vertexBuffer,i.shader.attributes.aVertexPosition,n.FLOAT,!1,8,0).addAttribute(i.uvBuffer,i.shader.attributes.aTextureCoord,n.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=i),e.bindVao(i.vao),t.dirty!==i.dirty&&(i.dirty=t.dirty,i.uvBuffer.upload(t.uvs)),t.indexDirty!==i.indexDirty&&(i.indexDirty=t.indexDirty,i.indexBuffer.upload(t.indices)),t.vertexDirty!==i.vertexDirty&&(i.vertexDirty=t.vertexDirty,i.vertexBuffer.upload(t.vertices)),e.bindShader(i.shader),i.shader.uniforms.uSampler=e.bindTexture(r),e.state.setBlendMode(c.utils.correctBlendMode(t.blendMode,r.baseTexture.premultipliedAlpha)),i.shader.uniforms.uTransform&&(i.shader.uniforms.uTransform=t.uploadUvTransform?t._uvTransform.mapCoord.toArray(!0):p.toArray(!0)),i.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),i.shader.uniforms.uColor=c.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,i.shader.uniforms.uColor,r.baseTexture.premultipliedAlpha);var o=t.drawMode===d["default"].DRAW_MODES.TRIANGLE_MESH?n.TRIANGLE_STRIP:n.TRIANGLES;i.vao.draw(o,t.indices.length,0)}},e}(c.ObjectRenderer);e["default"]=v,c.WebGLRenderer.registerPlugin("mesh",v)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var a=n(173),s=i(a),u=n(339),c=r(u),l=function(){function t(e){o(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,n=e.context,r=t.worldTransform,i=e.resolution;e.roundPixels?n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):n.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===c["default"].DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,n=0;e-2>n;n++){var r=2*n;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,n=e.length,r=0;n>r;r+=3){var i=2*e[r],o=2*e[r+1],a=2*e[r+2];this._renderDrawTriangle(t,i,o,a)}},t.prototype._renderDrawTriangle=function(t,e,n,r){var i=this.renderer.context,o=t.uvs,a=t.vertices,s=t._texture;if(s.valid){var u=s.baseTexture,c=u.source,l=u.width,h=u.height,f=void 0,d=void 0,p=void 0,v=void 0,g=void 0,m=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;f=(o[e]*y.a+o[e+1]*y.c+y.tx)*u.width,d=(o[n]*y.a+o[n+1]*y.c+y.tx)*u.width,p=(o[r]*y.a+o[r+1]*y.c+y.tx)*u.width,v=(o[e]*y.b+o[e+1]*y.d+y.ty)*u.height,g=(o[n]*y.b+o[n+1]*y.d+y.ty)*u.height,m=(o[r]*y.b+o[r+1]*y.d+y.ty)*u.height}else f=o[e]*u.width,d=o[n]*u.width,p=o[r]*u.width,v=o[e+1]*u.height,g=o[n+1]*u.height,m=o[r+1]*u.height;var _=a[e],b=a[n],x=a[r],w=a[e+1],T=a[n+1],E=a[r+1],S=t.canvasPadding/this.renderer.resolution;if(S>0){var O=S/Math.abs(t.worldTransform.a),M=S/Math.abs(t.worldTransform.d),C=(_+b+x)/3,P=(w+T+E)/3,k=_-C,A=w-P,I=Math.sqrt(k*k+A*A);_=C+k/I*(I+O),w=P+A/I*(I+M),k=b-C,A=T-P,I=Math.sqrt(k*k+A*A),b=C+k/I*(I+O),T=P+A/I*(I+M),k=x-C,A=E-P,I=Math.sqrt(k*k+A*A),x=C+k/I*(I+O),E=P+A/I*(I+M)}i.save(),i.beginPath(),i.moveTo(_,w),i.lineTo(b,T),i.lineTo(x,E),i.closePath(),i.clip();var R=f*g+v*p+d*m-g*p-v*d-f*m,D=_*g+v*x+b*m-g*x-v*b-_*m,j=f*b+_*p+d*x-b*p-_*d-f*x,L=f*g*x+v*b*p+_*d*m-_*g*p-v*d*x-f*b*m,N=w*g+v*E+T*m-g*E-v*T-w*m,F=f*T+w*p+d*E-T*p-w*d-f*E,U=f*g*E+v*T*p+w*d*m-w*g*p-v*d*E-f*T*m;i.transform(D/R,N/R,j/R,F/R,L/R,U/R),i.drawImage(c,0,0,l*u.resolution,h*u.resolution,0,0,l,h),i.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,n=t.vertices,r=n.length/2;e.beginPath();for(var i=1;r-2>i;++i){var o=2*i,a=n[o],s=n[o+1],u=n[o+2],c=n[o+3],l=n[o+4],h=n[o+5];e.moveTo(a,s),e.lineTo(u,c),e.lineTo(l,h)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){
this.renderer=null},t}();e["default"]=l,s.CanvasRenderer.registerPlugin("mesh",l)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(339),u=r(s),c=function(t){function e(n,r,a){i(this,e);var s=o(this,t.call(this,n));return s._ready=!0,s.verticesX=r||10,s.verticesY=a||10,s.drawMode=u["default"].DRAW_MODES.TRIANGLES,s.refresh(),s}return a(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,n=[],r=[],i=[],o=[],a=this.verticesX-1,s=this.verticesY-1,u=t.width/a,c=t.height/s,l=0;e>l;l++){var h=l%this.verticesX,f=l/this.verticesX|0;n.push(h*u,f*c),i.push(h/a,f/s)}for(var d=a*s,p=0;d>p;p++){var v=p%a,g=p/a|0,m=g*this.verticesX+v,y=g*this.verticesX+v+1,_=(g+1)*this.verticesX+v,b=(g+1)*this.verticesX+v+1;o.push(m,y,_),o.push(y,b,_)}this.vertices=new Float32Array(n),this.uvs=new Float32Array(i),this.colors=new Float32Array(r),this.indices=new Uint16Array(o),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){u["default"].prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(342),c=r(u),l=10,h=function(t){/**
	     * @param {PIXI.Texture} texture - The texture to use on the NineSlicePlane.
	     * @param {int} [leftWidth=10] size of the left vertical bar (A)
	     * @param {int} [topHeight=10] size of the top horizontal bar (C)
	     * @param {int} [rightWidth=10] size of the right vertical bar (B)
	     * @param {int} [bottomHeight=10] size of the bottom horizontal bar (D)
	     */
function e(n,r,a,s,u){i(this,e);var c=o(this,t.call(this,n,4,4));/**
	         * The height of the top row (c)
	         *
	         * @member {number}
	         * @memberof PIXI.NineSlicePlane#
	         * @override
	         */
return c._origWidth=n.orig.width,c._origHeight=n.orig.height,c._width=c._origWidth,c._height=c._origHeight,c._leftWidth="undefined"!=typeof r?r:l,c._rightWidth="undefined"!=typeof s?s:l,c._topHeight="undefined"!=typeof a?a:l,c._bottomHeight="undefined"!=typeof u?u:l,c.refresh(!0),c}return a(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,n=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*n,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*n,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*n,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*n,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode);var n=this.worldTransform,r=t.resolution;t.roundPixels?e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r|0,n.ty*r|0):e.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r);var i=this._texture.baseTexture,o=i.source,a=i.width*i.resolution,s=i.height*i.resolution;this.drawSegment(e,o,a,s,0,1,10,11),this.drawSegment(e,o,a,s,2,3,12,13),this.drawSegment(e,o,a,s,4,5,14,15),this.drawSegment(e,o,a,s,8,9,18,19),this.drawSegment(e,o,a,s,10,11,20,21),this.drawSegment(e,o,a,s,12,13,22,23),this.drawSegment(e,o,a,s,16,17,26,27),this.drawSegment(e,o,a,s,18,19,28,29),this.drawSegment(e,o,a,s,20,21,30,31)},e.prototype.drawSegment=function(t,e,n,r,i,o,a,s){var u=this.uvs,c=this.vertices,l=(u[a]-u[i])*n,h=(u[s]-u[o])*r,f=c[a]-c[i],d=c[s]-c[o];1>l&&(l=1),1>h&&(h=1),1>f&&(f=1),1>d&&(d=1),t.drawImage(e,u[i]*n,u[o]*r,l,h,c[i],c[o],f,d)},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,n=this._texture;this._origWidth=n.orig.width,this._origHeight=n.orig.height;var r=1/this._origWidth,i=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=i*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},s(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(c["default"]);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(339),u=r(s),c=function(t){function e(n,r){i(this,e);var a=o(this,t.call(this,n));return a.points=r,a.vertices=new Float32Array(4*r.length),a.uvs=new Float32Array(4*r.length),a.colors=new Float32Array(2*r.length),a.indices=new Uint16Array(2*r.length),a.autoUpdate=!0,a.refresh(),a}return a(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,n=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,n[0]=0,n[1]=1;for(var i=t.length,o=1;i>o;o++){var a=4*o,s=o/(i-1);e[a]=s,e[a+1]=0,e[a+2]=s,e[a+3]=1,a=2*o,r[a]=1,r[a+1]=1,a=2*o,n[a]=a,n[a+1]=a+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],n=void 0,r=0,i=0,o=this.vertices,a=t.length,s=0;a>s;s++){var u=t[s],c=4*s;n=s<t.length-1?t[s+1]:u,i=-(n.x-e.x),r=n.y-e.y;var l=10*(1-s/(a-1));l>1&&(l=1);var h=Math.sqrt(r*r+i*i),f=this._texture.height/2;r/=h,i/=h,r*=f,i*=f,o[c]=u.x+r,o[c+1]=u.y+i,o[c+2]=u.x-r,o[c+3]=u.y-i,e=u}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(346);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(347);Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return r(o)["default"]}})},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(173),c=r(u),l=n(213),h=function(t){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;i(this,e);var u=o(this,t.call(this)),l=16384;return a>l&&(a=l),a>n&&(a=n),u._properties=[!1,!0,!1,!1,!1],u._maxSize=n,u._batchSize=a,u._glBuffers={},u._bufferUpdateIDs=[],u._updateID=0,u.interactiveChildren=!1,u.blendMode=c.BLEND_MODES.NORMAL,u.autoResize=s,u.roundPixels=!0,u.baseTexture=null,u.setProperties(r),u._tint=0,u.tintRgb=new Float32Array(4),u.tint=16777215,u}return a(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,n=this.worldTransform,r=!0,i=0,o=0,a=0,s=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var u=0;u<this.children.length;++u){var c=this.children[u];if(c.visible){var l=c._texture.frame;if(e.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.b,n.c,n.d,n.tx*t.resolution,n.ty*t.resolution),r=!1),i=c.anchor.x*-l.width*c.scale.x+c.position.x+.5,o=c.anchor.y*-l.height*c.scale.y+c.position.y+.5,a=l.width*c.scale.x,s=l.height*c.scale.y;else{r||(r=!0),c.displayObjectUpdateTransform();var h=c.worldTransform;t.roundPixels?e.setTransform(h.a,h.b,h.c,h.d,h.tx*t.resolution|0,h.ty*t.resolution|0):e.setTransform(h.a,h.b,h.c,h.d,h.tx*t.resolution,h.ty*t.resolution),i=c.anchor.x*-l.width+.5,o=c.anchor.y*-l.height+.5,a=l.width,s=l.height}var f=c._texture.baseTexture.resolution;e.drawImage(c._texture.baseTexture.source,l.x*f,l.y*f,l.width*f,l.height*f,i*t.resolution,o*t.resolution,a*t.resolution,s*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var n=0;n<this._buffers.length;++n)this._buffers[n].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},s(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,l.hex2rgb(t,this.tintRgb)}}]),e}(c.Container);e["default"]=h},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var u=n(173),c=i(u),l=n(348),h=r(l),f=n(349),d=r(f),p=n(213),v=function(t){function e(n){o(this,e);var r=a(this,t.call(this,n));return r.shader=null,r.indexBuffer=null,r.properties=null,r.tempMatrix=new c.Matrix,r.CONTEXT_UID=0,r}return s(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new h["default"](t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,n=t._maxSize,r=t._batchSize,i=this.renderer,o=e.length;if(0!==o){o>n&&(o=n);var a=t._glBuffers[i.CONTEXT_UID];a||(a=t._glBuffers[i.CONTEXT_UID]=this.generateBuffers(t));var s=e[0]._texture.baseTexture;this.renderer.setBlendMode(c.utils.correctBlendMode(t.blendMode,s.premultipliedAlpha));var u=i.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(i._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=c.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,s.premultipliedAlpha),this.shader.uniforms.uSampler=i.bindTexture(s);for(var h=!1,f=0,d=0;o>f;f+=r,d+=1){var p=o-f;if(p>r&&(p=r),d>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var v=a[d];v.uploadDynamic(e,f,p);var g=t._bufferUpdateIDs[d]||0;h=h||v._updateID<g,h&&(v._updateID=t._updateID,v.uploadStatic(e,f,p)),i.bindVao(v.vao),v.vao.draw(u.TRIANGLES,6*p)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,n=[],r=t._maxSize,i=t._batchSize,o=t._properties,a=0;r>a;a+=i)n.push(new d["default"](e,this.properties,o,i));return n},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,n=t._batchSize,r=t._properties;return new d["default"](e,this.properties,r,n)},e.prototype.uploadVertices=function(t,e,n,r,i,o){for(var a=0,s=0,u=0,c=0,l=0;n>l;++l){var h=t[e+l],f=h._texture,d=h.scale.x,p=h.scale.y,v=f.trim,g=f.orig;v?(s=v.x-h.anchor.x*g.width,a=s+v.width,c=v.y-h.anchor.y*g.height,u=c+v.height):(a=g.width*(1-h.anchor.x),s=g.width*-h.anchor.x,u=g.height*(1-h.anchor.y),c=g.height*-h.anchor.y),r[o]=s*d,r[o+1]=c*p,r[o+i]=a*d,r[o+i+1]=c*p,r[o+2*i]=a*d,r[o+2*i+1]=u*p,r[o+3*i]=s*d,r[o+3*i+1]=u*p,o+=4*i}},e.prototype.uploadPosition=function(t,e,n,r,i,o){for(var a=0;n>a;a++){var s=t[e+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}},e.prototype.uploadRotation=function(t,e,n,r,i,o){for(var a=0;n>a;a++){var s=t[e+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}},e.prototype.uploadUvs=function(t,e,n,r,i,o){for(var a=0;n>a;++a){var s=t[e+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}},e.prototype.uploadTint=function(t,e,n,r,i,o){for(var a=0;n>a;++a){var s=t[e+a],u=s._texture.baseTexture.premultipliedAlpha,c=s.alpha,l=1>c&&u?p.premultiplyTint(s._tintRGB,c):s._tintRGB+(255*c<<24);r[o]=l,r[o+i]=l,r[o+2*i]=l,r[o+3*i]=l,o+=4*i}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(c.ObjectRenderer);e["default"]=v,c.WebGLRenderer.registerPlugin("particle",v)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}e.__esModule=!0;var s=n(262),u=r(s),c=function(t){function e(n){return i(this,e),o(this,t.call(this,n,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return a(e,t),e}(u["default"]);e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var o=n(185),a=r(o),s=n(261),u=r(s),c=function(){function t(e,n,r,o){i(this,t),this.gl=e,this.size=o,this.dynamicProperties=[],this.staticProperties=[];for(var a=0;a<n.length;++a){var s=n[a];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[a]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=u["default"](this.size),this.indexBuffer=a["default"].GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var r=this.dynamicProperties[n];r.offset=e,e+=r.size,this.dynamicStride+=r.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=a["default"].GLBuffer.createVertexBuffer(t,i,t.STREAM_DRAW);var o=0;this.staticStride=0;for(var s=0;s<this.staticProperties.length;++s){var c=this.staticProperties[s];c.offset=o,o+=c.size,this.staticStride+=c.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=a["default"].GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new a["default"].VertexArrayObject(t).addIndex(this.indexBuffer);for(var h=0;h<this.dynamicProperties.length;++h){var f=this.dynamicProperties[h];f.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*f.offset):this.vao.addAttribute(this.dynamicBuffer,f.attribute,t.FLOAT,!1,4*this.dynamicStride,4*f.offset)}for(var d=0;d<this.staticProperties.length;++d){var p=this.staticProperties[d];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},t.prototype.uploadDynamic=function(t,e,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(t,e,n,i.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();e["default"]=c},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(351);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return r(i)["default"]}});var o=n(354);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return r(o)["default"]}});var a=n(352);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return r(a)["default"]}});var s=n(353);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return r(s)["default"]}});var u=n(355);Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return r(u)["default"]}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){return e instanceof f.BaseTexture?(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0):!1}function c(t,e){return e instanceof f.Graphics?((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0):!1}function l(t,e){return t instanceof f.Graphics?(e.push(t),!0):!1}e.__esModule=!0;var h=n(173),f=i(h),d=n(352),p=r(d),v=function(t){function e(n){o(this,e);var r=a(this,t.call(this,n));return r.uploadHookHelper=r.renderer,r.registerFindHook(l),r.registerUploadHook(u),r.registerUploadHook(c),r}return s(e,t),e}(p["default"]);e["default"]=v,f.WebGLRenderer.registerPlugin("prepare",v)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var n=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof p.Texture){var i=t._textures[r].baseTexture;-1===e.indexOf(i)&&(e.push(i),n=!0)}return n}function s(t,e){return t instanceof p.BaseTexture?(-1===e.indexOf(t)&&e.push(t),!0):!1}function u(t,e){if(t._texture&&t._texture instanceof p.Texture){var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function c(t,e){return e instanceof p.Text?(e.updateText(!0),!0):!1}function l(t,e){if(e instanceof p.TextStyle){var n=e.toFontString();return p.TextMetrics.measureFont(n),!0}return!1}function h(t,e){if(t instanceof p.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var n=t._texture.baseTexture;return-1===e.indexOf(n)&&e.push(n),!0}return!1}function f(t,e){return t instanceof p.TextStyle?(-1===e.indexOf(t)&&e.push(t),!0):!1}e.__esModule=!0;var d=n(173),p=i(d),v=n(353),g=r(v),m=p.ticker.shared;p.settings.UPLOADS_PER_FRAME=4;var y=function(){function t(e){var n=this;o(this,t),this.limiter=new g["default"](p.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(h),this.registerFindHook(f),this.registerFindHook(a),this.registerFindHook(s),this.registerFindHook(u),this.registerUploadHook(c),this.registerUploadHook(l)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var n=0,r=this.uploadHooks.length;r>n;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)m.addOnce(this.tick,this,p.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,a=i.length;a>o;o++)i[o]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,n=this.addHooks.length;n>e&&!this.addHooks[e](t,this.queue);e++);if(t instanceof p.Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},t.prototype.destroy=function(){this.ticking&&m.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();e["default"]=y},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-->0},t}();e["default"]=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(e instanceof l.BaseTexture){var n=e.source,r=0===n.width?t.canvas.width:Math.min(t.canvas.width,n.width),i=0===n.height?t.canvas.height:Math.min(t.canvas.height,n.height);return t.ctx.drawImage(n,0,0,r,i,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.__esModule=!0;var c=n(173),l=i(c),h=n(352),f=r(h),d=16,p=function(t){function e(n){o(this,e);var r=a(this,t.call(this,n));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=d,r.canvas.height=d,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(u),r}return s(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(f["default"]);e["default"]=p,l.CanvasRenderer.registerPlugin("prepare",p)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}e.__esModule=!0;var r=function(){function t(e){n(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();e["default"]=r},function(t,e){/*! (c) Andrea Giammarchi - ISC */
var n=this||/* istanbul ignore next */{};try{!function(t,e){if(new t("q=%2B").get("q")!==e||new t({q:e}).get("q")!==e||new t([["q",e]]).get("q")!==e||"q=%0A"!==new t("q=\n").toString()||"q=+%26"!==new t({q:" &"}).toString())throw t;n.URLSearchParams=t}(r,"+")}catch(r){!function(t,e,r){"use strict";function i(t){var e=l(null);switch(h(this,"_ungap",{value:e}),!0){case!t:break;case"string"==typeof t:"?"===t.charAt(0)&&(t=t.slice(1));for(var n=t.split("&"),i=0,u=n.length;u>i;i++){var c=n[i],f=c.indexOf("=");f>-1?a(e,s(c.slice(0,f)),s(c.slice(f+1))):c.length&&a(e,s(c),"")}break;case r(t):for(var i=0,u=t.length;u>i;i++){var c=t[i];a(e,c[0],c[1])}break;case"forEach"in t:t.forEach(o,e);break;default:for(var d in t)a(e,d,t[d])}}function o(t,e){a(this,e,t)}function a(t,e,n){var i=r(n)?n.join(","):n;e in t?t[e].push(i):t[e]=[i]}function s(t){return decodeURIComponent(t.replace(d," "))}function u(t){return encodeURIComponent(t).replace(f,c)}function c(t){return p[t]}var l=t.create,h=t.defineProperty,f=/[!'\(\)~]|%20|%00/g,d=/\+/g,p={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\x00"},v={append:function(t,e){a(this._ungap,t,e)},"delete":function(t){delete this._ungap[t]},get:function(t){return this.has(t)?this._ungap[t][0]:null},getAll:function(t){return this.has(t)?this._ungap[t].slice(0):[]},has:function(t){return t in this._ungap},set:function(t,n){this._ungap[t]=[e(n)]},forEach:function(t,n){function r(r){t.call(n,r,e(o),i)}var i=this;for(var o in i._ungap)i._ungap[o].forEach(r,o)},toJSON:function(){return{}},toString:function(){var t=[];for(var e in this._ungap)for(var n=u(e),r=0,i=this._ungap[e];r<i.length;r++)t.push(n+"="+u(i[r]));return t.join("&")}};for(var g in v)h(i.prototype,g,{configurable:!0,writable:!0,value:v[g]});n.URLSearchParams=i}(Object,String,Array.isArray)}!function(t){function e(t,e){var r=[];return t.forEach(e,r),n?r[Symbol.iterator]():{next:function(){var t=r.shift();return{done:void 0===t,value:t}}}}var n=!1;try{n=!!Symbol.iterator}catch(i){}"forEach"in t||(t.forEach=function(t,e){var n=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach(function(i){!i.length||i in r||(r[i]=n.getAll(i)).forEach(function(r){t.call(e,r,i,n)})})}),"keys"in t||(t.keys=function(){return e(this,function(t,e){this.push(e)})}),"values"in t||(t.values=function(){return e(this,function(t,e){this.push(t)})}),"entries"in t||(t.entries=function(){return e(this,function(t,e){this.push([e,t])})}),!n||Symbol.iterator in t||(t[Symbol.iterator]=t.entries),"sort"in t||(t.sort=function(){for(var t,e,n,r=this.entries(),i=r.next(),o=i.done,a=[],s=Object.create(null);!o;)n=i.value,e=n[0],a.push(e),e in s||(s[e]=[]),s[e].push(n[1]),i=r.next(),o=i.done;for(a.sort(),t=0;t<a.length;t++)this["delete"](a[t]);for(t=0;t<a.length;t++)e=a[t],this.append(e,s[e].shift())}),function(e){var n=e.defineProperty,i=e.getOwnPropertyDescriptor,o=function(e){function r(n,r){t.append.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function i(n){t["delete"].call(this,n),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}function o(n,r){t.set.call(this,n,r),n=this.toString(),e.set.call(this._usp,n?"?"+n:"")}return function(t,e){return t.append=r,t["delete"]=i,t.set=o,n(t,"_usp",{configurable:!0,writable:!0,value:e})}},a=function(t){return function(e,r){return n(e,"_searchParams",{configurable:!0,writable:!0,value:t(r,e)}),r}},s=function(e){var n=e.append;e.append=t.append,r.call(e,e._usp.search.slice(1)),e.append=n},u=function(t,e){if(!(t instanceof e))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+e.name)},c=function(t){var n,c=t.prototype,l=i(c,"searchParams"),h=i(c,"href"),f=i(c,"search");!l&&f&&f.set&&(n=a(o(f)),e.defineProperties(c,{href:{get:function(){return h.get.call(this)},set:function(t){var e=this._searchParams;h.set.call(this,t),e&&s(e)}},search:{get:function(){return f.get.call(this)},set:function(t){var e=this._searchParams;f.set.call(this,t),e&&s(e)}},searchParams:{get:function(){return u(this,t),this._searchParams||n(this,new r(this.search.slice(1)))},set:function(e){u(this,t),n(this,e)}}}))};try{c(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&c(URL)}catch(l){}}(Object)}(n.URLSearchParams.prototype,Object),t.exports=n.URLSearchParams},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(358),a=i(o),s=n(140),u=i(s),c=n(143),l=i(c),h=n(6),f=i(h),d=n(7),p=i(d),v=n(166),g=r(v),m="deeplinker.cl.ly",y=443,_="https",b="/ocr",x=_+"://"+m+":"+y+b,w=new Map,T=function(){function t(e){f["default"](this,t),this.opts=e,this._run()}return p["default"](t,[{key:"load_image",value:function(){function t(t){return e.apply(this,arguments)}var e=l["default"](u["default"].mark(function n(t){return u["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.src=t}));case 1:case"end":return e.stop()}},n,this)}));return t}()},{key:"ocr",value:function(){function t(t){return e.apply(this,arguments)}var e=l["default"](u["default"].mark(function n(t){var e;return u["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("OCR on",t),n.next=3,fetch(x+"/image?url="+encodeURIComponent(t),{mode:"cors"})["catch"](function(t){throw console.log(t),t});case 3:return e=n.sent,n.abrupt("return",e.json());case 5:case"end":return n.stop()}},n,this)}));return t}()},{key:"_run",value:function(){function t(){return e.apply(this,arguments)}var e=l["default"](u["default"].mark(function n(){var t,e;return u["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.load_image(this.opts.src);case 2:return t=n.sent,n.next=5,this.ocr(this.opts.src);case 5:if(e=n.sent,e.success){n.next=8;break}throw e.error||"Unknown error processing the image";case 8:this._draw_image(t,e);case 9:case"end":return n.stop()}},n,this)}));return t}()},{key:"_draw_image",value:function(){function t(t,n){return e.apply(this,arguments)}var e=l["default"](u["default"].mark(function n(t,e){var r,i,o,s,c,l,h,f,d,p,v,m=this;return u["default"].wrap(function(n){for(;;)switch(n.prev=n.next){case 0:p=function(t){function e(t){return["CC"].includes(t)?1:0}var n=t.boundingPoly.vertices,r=["CC","SECRET"].includes(t.ner)?16711680:65535,i=new g.Graphics,o=function(t){var e=t.x,n=t.y;return new g.Point(e,n)},u=function(t){return i.drawPolygon.apply(i,a["default"](t.map(o)).concat([o(t[0])]))},c=e(t.ner);i.beginFill(r,c),i.lineStyle(2,r,1),u(n.map(s)),i.endFill();var l=n[0],f="("+l.x+","+l.y+")";if(["EMAIL","URL","PHONE"].includes(t.ner)){var p=d(l,i,t);w.set(f,p),h.addChild(p)}else h.addChild(i),w.set(f,i)},r=this.opts.width||t.width,i=this.opts.height||t.height,o=this.opts.canvas,o.width=r,o.height=i,s=function(t){var e=t.x,n=t.y;return{x:e,y:n}},c=new g.Application(r,i,{antialias:!0,transparent:!0,view:o,backgroundColor:this.opts.backgroundColor}),l=c.stage,h=new g.Container,l.addChild(h),f=new g.Sprite.fromImage(t.src,!0),h.addChild(f),d=function(t,e,n){var r=new g.Sprite(e.generateTexture());return r.interactive=!0,r.buttonMode=!0,r.x=t.x,r.y=t.y,r.on("pointerdown",function(){m.isClicking=!0,setTimeout(function(){return m.isClicking=!1},500),console.log("pointer down"),"URL"===n.ner&&window.open(n.description),"EMAIL"===n.ner&&window.open("mailto:"+n.description),"PHONE"===n.ner&&window.open("tel:"+n.description)}),r},v=function(t){return p(t)},setTimeout(function(){var t=e.responses[0];if(t.textAnnotations)for(var n=[],r=0;r<t.textAnnotations.length;r++){var i=t.textAnnotations[r];i.ner&&(v(i),n.push(i))}},1e3);case 17:case"end":return n.stop()}},n,this)}));return t}()}]),t}();e["default"]=T},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var i=n(359),o=r(i);e["default"]=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return o["default"](t)}},function(t,e,n){t.exports={"default":n(360),__esModule:!0}},function(t,e,n){n(39),n(361),t.exports=n(13).Array.from},function(t,e,n){"use strict";var r=n(14),i=n(11),o=n(66),a=n(149),s=n(150),u=n(56),c=n(362),l=n(113);i(i.S+i.F*!n(161)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,h,f=o(t),d="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,g=void 0!==v,m=0,y=l(f);if(g&&(v=r(v,p>2?arguments[2]:void 0,2)),void 0==y||d==Array&&s(y))for(e=u(f.length),n=new d(e);e>m;m++)c(n,m,g?v(f[m],m):f[m]);else for(h=y.call(f),n=new d;!(i=h.next()).done;m++)c(n,m,g?a(h,v,[i.value,m],!0):i.value);return n.length=m,n}})},function(t,e,n){"use strict";var r=n(17),i=n(25);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function u(){"ngInject";o["default"](this,u);var t={restrict:"E",templateUrl:"app/otherView/otherView.html",controller:s,controllerAs:"vm",bindToController:!0};return t},s=function c(t){"ngInject";o["default"](this,c),this.item=t};s.$inject=["itemService"],e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=function l(){"ngInject";s["default"](this,l);var t={restrict:"E",templateUrl:"app/pdfView/pdfView.html",controller:c,controllerAs:"vm",bindToController:!0};return t},c=function(){function t(e,n,r,i,o){"ngInject";s["default"](this,t),this.item=n,this._config=i,this._$timeout=r,this._loadingService=o,this._$window=e,this.init()}return t.$inject=["$window","itemService","$timeout","config","loadingService"],o["default"](t,[{key:"init",value:function(){var t=this;if(!this.initialized){window.PDFJS&&PDFJS.PDFViewer&&PDFJS.getDocument?(this.initialized=!0,this.initPdf()):window.setTimeout(function(){t.init()},100);var e=_.debounce(function(){t.resizePdf()},500);$(this._$window).on("resize",e)}}},{key:"resizePdf",value:function(){this.pdfViewer.currentScaleValue="page-width",this.pdfViewer.forceRendering()}},{key:"initPdf",value:function(){var t=this,e=this._loadingService,n=this._$timeout,r=this.item;PDFJS.workerSrc=this._config.vendorPath+"/pdf.worker.js",PDFJS.PDFViewer&&PDFJS.getDocument||window.alert("Something went wrong.");var i=$("section#pdf").get(0);this.pdfViewer=new PDFJS.PDFViewer({container:i}),i.addEventListener("pagesinit",function(){t.pdfViewer.currentScaleValue="page-width"});var o=this.item.data.source_url;e.setState("pdfLoad",!0),PDFJS.getDocument(o).then(function(r){e.getState("pdfLoad")&&(t.pdfViewer.setDocument(r),n(function(){e.setState("pdfLoad",!1)}))},function(){n(function(){e.setState("pdfLoad",!1),r.data.type="other"})}),n(function(){e.getState("pdfLoad")&&(e.setState("pdfLoad",!1),r.data.type="other")},5e3)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function u(){"ngInject";o["default"](this,u);var t={restrict:"E",templateUrl:"app/textView/textView.html",controller:s,controllerAs:"vm",bindToController:!0};return t},s=function c(t){"ngInject";o["default"](this,c),this.item=t};s.$inject=["itemService"],e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(140),o=r(i),a=n(143),s=r(a),u=n(7),c=r(u),l=n(6),h=r(l),f=function p(){"ngInject";h["default"](this,p);var t={restrict:"E",templateUrl:"app/videoView/videoView.html",controller:d,controllerAs:"vm",bindToController:!0};return t},d=function(){function t(e,n,r,i,o){"ngInject";h["default"](this,t),this.angularLoad=i,this.item=e,this.transcoding=n,this.vendorPath=r.vendorPath,this._userService=o,this.init()}return t.$inject=["itemService","transcodingService","config","angularLoad","userService"],c["default"](t,[{key:"loadScript",value:function(){function t(t){return e.apply(this,arguments)}var e=s["default"](o["default"].mark(function n(t){return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.angularLoad.loadScript(this.vendorPath+"/"+t);case 2:case"end":return e.stop()}},n,this)}));return t}()},{key:"init",value:function(){function t(){return e.apply(this,arguments)}var e=s["default"](o["default"].mark(function n(){var t;return o["default"].wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.loadScript("video.js");case 3:return e.next=5,this.loadScript("player-0.1.0.min.js");case 5:if("video"!==this.item.data.type){e.next=22;break}if(t=/iPad|iPhone|iPod|Android/.test(platform.toString()),!t){e.next=11;break}throw"Transcoding unsupported";case 11:return e.next=13,this.transcoding.get(this.item.data.slug);case 13:return e.next=15,this.loadScript("vjs-quality-picker.js");case 15:return e.next=17,this.loadScript("dash.all.min.js");case 17:return e.next=19,this.loadScript("videojs-dash.min.js");case 19:this.player({sourceUrl:this.transcoding.dashUrl,poster:this.transcoding.thumbnailUrl,type:"application/dash+xml"});case 20:e.next=23;break;case 22:this.player({type:"audio/mp3",poster:this.vendorPath+"/../assets/images/bg_audio@2x.png"});case 23:e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](0),this.player({type:"video/mp4"});case 28:case"end":return e.stop()}},n,this,[[0,25]])}));return t}()},{key:"player",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={sources:[{src:e.sourceUrl||this.item.data.source_url,type:e.type||"video/mp4"}],html5:{nativeCaptions:!1,dash:{setFastSwitchEnabled:!0,setInitialRepresentationRatioFor:["video",.5625]}},poster:e.poster,constrols:!0,preload:"auto"};this.videoJsPlayer=videojs("player",n,function(){var e=new playerjs.VideoJSAdapter(t.videoJsPlayer);if(t.videoJsPlayer.dash){var n=t.videoJsPlayer.dash.mediaPlayer;n.getDebug().setLogToBrowserConsole(!1),n.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,function(t){console.log("QUALITY_CHANGE_REQUESTED",t)}),n.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,function(t){console.log("QUALITY_CHANGE_RENDERED",t)}),t.videoJsPlayer.qualityPickerPlugin(),n.on(dashjs.MediaPlayer.events.STREAM_INITIALIZED,function(){t.initQualityPicker()})}t.shouldShowAd()&&t.showCloudappAd(),e.ready(),console.log("Player.js Adapter Ready")})}},{key:"initQualityPicker",value:function(){var t=this.videoJsPlayer.dash.mediaPlayer,e=this.videoJsPlayer.tech({IWillNotUseThisInPlugins:!0}),n=t.getBitrateInfoListFor("video"),r=[{id:{qualityIndex:-1},label:"Auto",selected:!0}];n.forEach(function(t){var e=_.findIndex(r,function(e){return e.label===t.height+"p"});0!==t.qualityIndex&&-1===e&&r.unshift({id:t,label:t.height+"p",selected:!1})});var i={qualityData:{video:r},qualitySwitchCallback:function(e){-1===e.qualityIndex?t.setAutoSwitchQualityFor("video",!0):(t.setAutoSwitchQualityFor("video",!1),t.setQualityFor("video",e.qualityIndex))}};e.trigger("loadedqualitydata",i)}},{key:"shouldShowAd",value:function(){var t=!this._userService.isLoggedIn()||this._userService.isTrial();return t&&!!this.item.data.free_user}},{key:"showCloudappAd",value:function(){var t=["<div class='video-ad' style='box-sizing: border-box; bottom: 30px; left: 0px; right: 0px; top: 0px; background-color: rgba(0, 0, 0, 0.8); color: rgb(255, 255, 255); text-align: center; font-size: 15px; position: absolute; z-index: 100; display: flex; justify-content: center; align-items: center;'>","<a href='https://my.cl.ly/register?source_referral=viewer_video_end_cta' style='color: rgb(255, 255, 255);'>","<p style='margin: 0px 0px 10px; padding: 80px 0px 0px; background-image: url(https://s3.amazonaws.com/embed.cl.ly/cloudapp_icon_white.png); background-repeat: no-repeat; background-position: center 20px; background-size: 60px 48px;'>Create videos and share them easily</p>","<div style='color: rgb(255, 255, 255); font-size: 18px;'>Learn more about CloudApp</div>","</p>","</a>","</div>"].join("");this.videoJsPlayer.on("ended",function(){$("#player").append(t),$(".vjs-control-bar > .vjs-play-control").click(function(){$(".video-ad").remove()})})}}]),t}();e["default"]=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function u(){"ngInject";o["default"](this,u);var t={restrict:"E",templateUrl:"app/flashMessages/flashMessages.html",controller:s,controllerAs:"flashVm",bindToController:!0};return t},s=function c(t){"ngInject";o["default"](this,c);var e=this;e.flashMessages=t};s.$inject=["flashMessagesService"],e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(369),s=r(a),u=function c(){"ngInject";return o["default"](this,c),{restrict:"E",templateUrl:"app/navbar/navbar.html",controller:s["default"],controllerAs:"vm",bindToController:!0,link:function(t,e,n){t.attrs=n}}};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(370),s=r(a),u=n(371),c=r(u),l=n(372),h=r(l),f=function d(t,e,n,r,i,a,u,l,f,p,v,g,m,y,b,x,w){"ngInject";var T=this;o["default"](this,d),this.scope=t,this.sidebarFactory=x,e(function(){T.mode=t.attrs.mode,T.annotations=t.attrs.annotations}),this.item=a,this.privacy=function(){s["default"](r)},this.signIn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c["default"](r,"signIn",t)},this.signUp=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c["default"](r,"signUp",t)},this.userService=w,this.plansPath=u.appBase+"/plans",this.chromeExtensionUrl="https://chrome.google.com/webstore/detail/ojnikmlgjpfiogeijjkpeakbedjhjcch",this.toggleComments=function(){T.sidebarFactory.changeTab("comments"),T.sidebarFactory.toggle()},this.toggleEvents=function(){T.sidebarFactory.changeTab("events"),T.sidebarFactory.toggle()},this.openEmbedModal=function(){T.ui.toggleMenu(!1),h["default"](r)},this.signUpAnnotate=function(){return c["default"](r,"signUp",{source_referral:"viewer_annotate"},function(){return a.annotations.save()})},this.signOut=function(){i.signOut().then(function(){g.reset(),a.getItem(),a.getDetails()})},this.share=function(){g.can("share_email")?v.email():T.signUp()},this.annotate=function(){return _.get(a,"annotations.drawing.commands")},this.modeClass=function(t){var e=T.annotate();return e&&e.mode(t)?"btn_active":""},this.setAnnotate=function(t){if(T.annotate()){var e={rectangle:function(){return T.annotate().addRectangle()},circle:function(){return T.annotate().addCircle()},drawing:function(){return T.annotate().freeDraw()},arrow:function(){return T.annotate().addArrow()},text:function(){return T.annotate().addText()},line:function(){return T.annotate().addLine()}};T.annotate().mode(t)?T.annotate().normal():e[t]()}},this.setColor=function(t){return T.annotate()?T.annotate().setColor(t):null},this.ui={toggleMenu:function(t){T.menu="undefined"==typeof t?!T.menu:t,e()},toggleShareMenu:function(t){T.share_menu="undefined"==typeof t?!T.share_menu:t,e()}},this.initClipboard=function(){p(".btn_copy").on("click",function(t){T.ui.toggleMenu(!1),b.send({type:"success",text:"Copied to clipboard",timeout:1750}),t.preventDefault()})},this.saveElsewhere=function(){l.exportFile(T.item.data.source_url,{mimetype:T.item.data.mimetype,suggestedFilename:T.item.data.name})},this.shareVia=v,this.toggleCheatSheet=function(){m.toggleCheatSheet()},this.enginesTeamMembershipPath=function(){var t=T.userService.getTeam().name;if(t){var e=t.replace(/\s+/g,"-").toLowerCase();return u.appBase+"/teams/"+e+"/memberships?slack_invite=true"}},this.showChromeInstallButton=function(){return(!T.userService.isLoggedIn()||T.item.data.free_user)&&"Chrome"===platform.name},this.chromeInlineInstall=function(){chrome&&chrome.webstore&&chrome.webstore.install(T.chromeExtensionUrl,T.successCallback,T.failureCallback)},this.successCallback=function(){console.log("success!!!")},this.failureCallback=function(t){console.log("Chrome extension error:"),console.log(t)}};f.$inject=["$scope","$timeout","$interval","$uibModal","Api","itemService","config","filepicker","storageService","$","shareViaService","abilityService","hotkeys","moment","flashMessagesService","sidebarFactory","userService"],e["default"]=f},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.open({templateUrl:"app/privacy/privacy.html",controller:"PrivacyController",controllerAs:"vm"})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(115),o=r(i),a=function(t,e,n,r){t.open({templateUrl:"app/login/login.modal.html",controller:o["default"],controllerAs:"vm",windowClass:"login_modal",resolve:{action:function(){return e},params:function(){return n},success_callback:function(){return r}}})};e["default"]=a},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){t.open({templateUrl:"app/embed/embed.html",controller:"EmbedController",controllerAs:"vm"})};e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function s(){o["default"](this,s);var t={restrict:"A",controller:["analyticsService",function(t){"ngInject";this.track=function(e,n){t.track(e,n)}}],bindToController:!0,link:function(t,e,n,r){var i="analytics-";e.on("click",function(){var t=_.pick(n.$attr,function(t){return 0===t.indexOf(i)}),e={};_.each(t,function(t,r){var o=t.replace(i,"");e[o]=n[r]}),r.track(n.analytics,e)})}};return t};e["default"]=a},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=function l(){"ngInject";s["default"](this,l);var t={restrict:"E",templateUrl:"app/teamSelector/teamSelector.html",controller:c,controllerAs:"vm",bindToController:!0,scope:{ngModel:"="}};return t},c=function(){function t(e,n){"ngInject";var r=this;s["default"](this,t),this._users=_.map(this.ngModel.users,function(t){var e={text:t};return t===n.getEmail()&&(e["class"]="owner_tag"),e}),e.getTeams().then(function(t){r.teams=t.teams,r.filterTeams(),r.team_members=_.chain(t.teams).pluck("member_emails").flatten().uniq().value()})}return t.$inject=["Api","userService"],o["default"](t,[{key:"change",value:function(){this.ngModel.users=_.pluck(this._users,"text"),this.filterTeams()}},{key:"filterTeams",value:function(){var t=_.pluck(this._users,"text");this.availableTeams=_.filter(this.teams,function(e){return _.difference(e.member_emails,t).length>0})}},{key:"teamSelect",value:function(t){var e=this,n=_.find(this.teams,{id:Number(t)});if(n){var r=_.pluck(this._users,"text");_.each(_.difference(n.member_emails,r),function(t){e._users.push({text:t})}),this.change()}}},{key:"newTag",value:function(t){t["class"]="new_tag",this.change()}},{key:"autocomplete",value:function(){return this.team_members}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(114),s=r(a),u=function c(){"ngInject";o["default"](this,c);var t={restrict:"E",templateUrl:"app/login/login.html",controller:s["default"],controllerAs:"vm",bindToController:!0,scope:{callback:"&",close:"&",action:"=",advertised:"=",params:"="}};return t};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=function l(){"ngInject";s["default"](this,l);var t={restrict:"E",templateUrl:"app/related/related.html",controller:c,controllerAs:"relatedVm",bindToController:!0};return t},c=function(){function t(e,n){"ngInject";s["default"](this,t),n.getRelated(),this._config=e,this._itemService=n}return t.$inject=["config","itemService"],o["default"](t,[{key:"related",value:function e(){var e=this._itemService.related||[];return $("#sidebar").toggleClass("show_related_drops",e.length>1),e}},{key:"thumbnail",value:function(t){return"//"+this._config.thumbnails+"/"+t}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(378),s=r(a),u=function c(){"ngInject";return o["default"](this,c),{restrict:"E",templateUrl:"app/sidebar/sidebar.html",controller:s["default"],controllerAs:"vm",bindToController:!0}};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=n(372),c=r(u),l=function(){function t(e,n,r,i,a,s,u,l,h,f){"ngInject";var d=this;o["default"](this,t),this.item=r,this.storageService=i,this.$timeout=a,this.$window=n,this.ability=s,this.sidebarFactory=u,this.shareVia=l,this.analyticsService=h,r.enablePusher(),this.sidebarFactory.changeTab("comments"),i.fetch("sidebarTab","comments"),this.tab="comments",this.setTab(i.fetch("sidebarTab","comments")),e.$watch("vm.sidebarFactory.hidden",function(){d.toggle()}),e.copyText="Copy Link!",e.copyClass="",this.copyFeedback=function(){e.copyText="Copied!",e.copyClass="copied",d.analyticsService.track("Link Copied",{source_referral:"viewer_share_widget"}),a(function(){e.copyText="Copy Link!",e.copyClass=""},1500)},this.openEmbedModal=function(){c["default"](f)}}return t.$inject=["$scope","$window","itemService","storageService","$timeout","abilityService","sidebarFactory","shareViaService","analyticsService","$uibModal"],s["default"](t,[{key:"submitComment",value:function(){var t=this.$timeout,e=function(t,e){return $(".join_to_team .animation").find(t).removeClass("hidden").addClass("animated").addClass(e)};t(function(){return $(".join_to_team .comments").addClass("animated fadeOut").then(function(){return t(function(){e(".js-first","fadeInDown")},1e3)}).then(function(){return t(function(){e(".js-second","fadeInDown")},1e3)}).then(function(){return t(function(){e(".js-third","fadeInDown")},1e3)})})}},{key:"toggleHidden",value:function(){this.sidebarFactory.toggle()}},{key:"toggle",value:function(){$(this.$window).trigger("resize")}},{key:"isTab",value:function(t){return this.sidebarFactory.selectedTab===t}},{key:"isEventsTab",value:function(){return this.isTab("events")}},{key:"isCommentsTab",value:function(){return this.isTab("comments")}},{key:"setTab",value:function(t){this.sidebarFactory.changeTab(t)}}]),t}();e["default"]=l},function(t,e){"use strict";function n(t){"ngInject";var e=t.fetch("rhcHidden",!1),n=t.fetch("sidebarTab","comments");return{hidden:e,selectedTab:n,toggle:function(){this.hidden=t.store("rhcHidden",!this.hidden)},changeTab:function(e){this.selectedTab=t.store("sidebarTab",e)}}}n.$inject=["storageService"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=n(381),c=r(u),l=n(371),h=r(l),f=function p(){"ngInject";s["default"](this,p);var t={restrict:"E",templateUrl:"app/comments/comments.html",controller:d,controllerAs:"vm",bindToController:!0};return t},d=function(){function t(e,n,r,i,o,a,u,c){"ngInject";s["default"](this,t),this._config=u,this.commentService=i,this._storageService=o,this._loadingService=a,this._itemService=n,i.get(),this.newComment={},this.absoluteDate=o.fetch("absoluteDate",!1),this.userService=r,this.modal=c,$(".comments_list").on("scroll",_.debounce(function(){var t=$(this).get(0).scrollHeight;$(this).height()+$(this).scrollTop()>t-10&&i.next()},200))}return t.$inject=["Api","itemService","userService","commentService","storageService","loadingService","config","$uibModal"],o["default"](t,[{key:"submitComment",value:function(){var t=this;this.newCommentForm.$valid&&(this.userService.isLoggedIn()?(this.commentService.create(this.newComment),this.newCommentForm.$setPristine(),this.newComment={}):h["default"](this.modal,"signUp",{source_referral:"viewer_comment"},function(){t.commentService.create(t.newComment),window.location.reload()}))}},{key:"canDestroy",value:function(t){var e=this.userService.getId(),n=this._itemService.data.owner_id;return!t._deleted&&e&&(t.user_id===e||n===e)}},{key:"toggleAbsoluteDate",value:function(){this.absoluteDate=this._storageService.store("absoluteDate",!this.absoluteDate)}},{key:"destroy",value:function(t){this.commentService.destroy(t)}},{key:"commentContent",value:function(t){return Autolinker.link(t.content,{stripPrefix:!1}).replace(/\n/g,"<br />")}},{key:"avatar",value:function(t){var e=c["default"](t.user).toString();return"https://s.gravatar.com/avatar/"+e+"?s=80&d=blank"}}]),t}();e["default"]=f},function(t,e,n){!function(r,i){t.exports=e=i(n(124))}(this,function(t){return function(e){function n(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+i+a;return(s<<o|s>>>32-o)+e}function r(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+i+a;return(s<<o|s>>>32-o)+e}function i(t,e,n,r,i,o,a){var s=t+(e^n^r)+i+a;return(s<<o|s>>>32-o)+e}function o(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+i+a;return(s<<o|s>>>32-o)+e}var a=t,s=a.lib,u=s.WordArray,c=s.Hasher,l=a.algo,h=[];!function(){for(var t=0;64>t;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}();var f=l.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var a=0;16>a;a++){var s=e+a,u=t[s];t[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,l=t[e+0],f=t[e+1],d=t[e+2],p=t[e+3],v=t[e+4],g=t[e+5],m=t[e+6],y=t[e+7],_=t[e+8],b=t[e+9],x=t[e+10],w=t[e+11],T=t[e+12],E=t[e+13],S=t[e+14],O=t[e+15],M=c[0],C=c[1],P=c[2],k=c[3];M=n(M,C,P,k,l,7,h[0]),k=n(k,M,C,P,f,12,h[1]),P=n(P,k,M,C,d,17,h[2]),C=n(C,P,k,M,p,22,h[3]),M=n(M,C,P,k,v,7,h[4]),k=n(k,M,C,P,g,12,h[5]),P=n(P,k,M,C,m,17,h[6]),C=n(C,P,k,M,y,22,h[7]),M=n(M,C,P,k,_,7,h[8]),k=n(k,M,C,P,b,12,h[9]),P=n(P,k,M,C,x,17,h[10]),C=n(C,P,k,M,w,22,h[11]),M=n(M,C,P,k,T,7,h[12]),k=n(k,M,C,P,E,12,h[13]),P=n(P,k,M,C,S,17,h[14]),C=n(C,P,k,M,O,22,h[15]),M=r(M,C,P,k,f,5,h[16]),k=r(k,M,C,P,m,9,h[17]),P=r(P,k,M,C,w,14,h[18]),C=r(C,P,k,M,l,20,h[19]),M=r(M,C,P,k,g,5,h[20]),k=r(k,M,C,P,x,9,h[21]),P=r(P,k,M,C,O,14,h[22]),C=r(C,P,k,M,v,20,h[23]),M=r(M,C,P,k,b,5,h[24]),k=r(k,M,C,P,S,9,h[25]),P=r(P,k,M,C,p,14,h[26]),C=r(C,P,k,M,_,20,h[27]),M=r(M,C,P,k,E,5,h[28]),k=r(k,M,C,P,d,9,h[29]),P=r(P,k,M,C,y,14,h[30]),C=r(C,P,k,M,T,20,h[31]),M=i(M,C,P,k,g,4,h[32]),k=i(k,M,C,P,_,11,h[33]),P=i(P,k,M,C,w,16,h[34]),C=i(C,P,k,M,S,23,h[35]),M=i(M,C,P,k,f,4,h[36]),k=i(k,M,C,P,v,11,h[37]),P=i(P,k,M,C,y,16,h[38]),C=i(C,P,k,M,x,23,h[39]),M=i(M,C,P,k,E,4,h[40]),k=i(k,M,C,P,l,11,h[41]),P=i(P,k,M,C,p,16,h[42]),C=i(C,P,k,M,m,23,h[43]),M=i(M,C,P,k,b,4,h[44]),k=i(k,M,C,P,T,11,h[45]),P=i(P,k,M,C,O,16,h[46]),C=i(C,P,k,M,d,23,h[47]),M=o(M,C,P,k,l,6,h[48]),k=o(k,M,C,P,y,10,h[49]),P=o(P,k,M,C,S,15,h[50]),C=o(C,P,k,M,g,21,h[51]),M=o(M,C,P,k,T,6,h[52]),k=o(k,M,C,P,p,10,h[53]),P=o(P,k,M,C,x,15,h[54]),C=o(C,P,k,M,f,21,h[55]),M=o(M,C,P,k,_,6,h[56]),k=o(k,M,C,P,O,10,h[57]),P=o(P,k,M,C,m,15,h[58]),C=o(C,P,k,M,E,21,h[59]),M=o(M,C,P,k,v,6,h[60]),k=o(k,M,C,P,w,10,h[61]),P=o(P,k,M,C,d,15,h[62]),C=o(C,P,k,M,b,21,h[63]),c[0]=c[0]+M|0,c[1]=c[1]+C|0,c[2]=c[2]+P|0,c[3]=c[3]+k|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296),a=r;n[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),
n[(i+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),t.sigBytes=4*(n.length+1),this._process();for(var s=this._hash,u=s.words,c=0;4>c;c++){var l=u[c];u[c]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}return s},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});a.MD5=c._createHelper(f),a.HmacMD5=c._createHmacHelper(f)}(Math),t.MD5})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r){"ngInject";var i=this;o["default"](this,t),this.Api=e,this.$timeout=r,this.comments=[],this.count=0,this._perPage=20,this._pages={},n.bindChannel("item","new-comment",function(t){i._add(t)}),n.bindChannel("item","delete-comment",function(t){i._destroy(t)})}return t.$inject=["Api","pusherService","$timeout"],s["default"](t,[{key:"setItem",value:function(t){return this.slug=t,this}},{key:"get",value:function(t){var e=this,n=t||1;if(!this._pages[n]){this._pages[n]=!0;var r=this.Api.getComments(this.slug,{page:n});return r.then(function(t){e.comments=_.uniq(_.union(t.comments,e.comments),"id"),e.count=t.meta.count}),r}}},{key:"destroy",value:function(t){t._deleted||(t._deleted=!0,this.Api.destroyComment(this.slug,t.id))}},{key:"_destroy",value:function(t){var e=this,n=_.find(this.comments,{id:t.id});n&&this.$timeout(function(){e.count-=1,e.comments=_.difference(e.comments,[n])})}},{key:"_add",value:function(t){var e=this;this.$timeout(function(){e.count+=1,e.comments=_.uniq(_.union(e.comments,[t]),"id")})}},{key:"create",value:function(t){return this.Api.createComment(this.slug,{comment:t})}},{key:"next",value:function(){var t=Math.floor(this.comments.length/this._perPage)+1;this.get(t)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=r(i),a=n(6),s=r(a),u=function l(){"ngInject";s["default"](this,l);var t={restrict:"E",templateUrl:"app/events/events.html",controller:c,controllerAs:"vm",bindToController:!0};return t},c=function(){function t(e,n,r){"ngInject";s["default"](this,t),this.eventService=n,this._storageService=r,n.get(),this.absoluteDate=r.fetch("absoluteDate",!1),$(".right_hand_column .events").on("scroll",_.debounce(function(){var t=$(this).get(0).scrollHeight;$(this).height()+$(this).scrollTop()>t-10&&n.next()},200))}return t.$inject=["itemService","eventService","storageService"],o["default"](t,[{key:"toggleAbsoluteDate",value:function(){this.absoluteDate=this._storageService.store("absoluteDate",!this.absoluteDate)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r){"ngInject";o["default"](this,t),this.Api=e,this.$timeout=r,this._pusherService=n,this.events=[],this.count=0,this._perPage=20,this._pages={}}return t.$inject=["Api","pusherService","$timeout"],s["default"](t,[{key:"setItem",value:function(t){var e=this;return this.slug=t,this._pusherService.bindChannel("items","new-event-item-"+t,function(t){e._add(t)}),this}},{key:"get",value:function(t){var e=this,n=t||1;if(!this._pages[n]){this._pages[n]=!0;var r=this.Api.getEvents(this.slug,{page:n});return r.then(function(t){e.events=_.uniq(_.union(t.events,e.events),"id"),e.count=t.meta.count}),r}}},{key:"_add",value:function(t){var e=this;this.$timeout(function(){e.count+=1,e.events=_.uniq(_.union(e.events,[t]),"id")})}},{key:"next",value:function(){var t=Math.floor(this.events.length/this._perPage)+1;this.get(t)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(){o["default"](this,t)}return s["default"](t,[{key:"sourceDirectOrOrganic",value:function(){var t=document.referrer,e=function(){return!(!t.match(/[\/\.]viewer\.dev/)&&!t.match(/[\/\.]getcloudapp\.com/))};return""===t?{source_direct:!0}:e()?{}:{source_organic:t}}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(387),s=r(a),u=function c(){"ngInject";return o["default"](this,c),{restrict:"E",templateUrl:"app/tout/tout.html",controller:s["default"],controllerAs:"vm",bindToController:!0,scope:!0}};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(7),s=r(a),u=function(){function t(e,n,r,i,a){"ngInject";var s=this;o["default"](this,t),this.scope=e,this.storageService=n,this.itemService=i,this.analyticsService=r,this.apiService=a,this.apiService.getTout(this.itemService.slug()).then(function(t){return s.initializeTout(t)})}return t.$inject=["$scope","storageService","analyticsService","itemService","Api"],s["default"](t,[{key:"initializeTout",value:function(t){var e=this,n=t;if(this.scope.tout=n,"not_logged_in"!==n.user_type&&this.checkToutDisplayStatus(),n.visible===!0){this.scope.isVisibleClassName="tout_visible";var r=n.expanded===!0?"expanded":"minimized";null!==n.button_url&&(n.button_url+="&utm_term="+r),this.analyticsService.track("ToutShown",{expanded:n.expanded,offer:n.button_msg,user:n.user_type}),window.dataLayer&&(window.dataLayer.push({event:"ToutShown",toutUserType:n.user_type}),window.dataLayer.push({event:"optimize.activate"}))}n.onClick=function(){null!==n.button_url?window.location.href=n.button_url:e.apiService.hideTout(e.itemService.slug()).then(function(){return n.visible=!1})}}},{key:"checkToutDisplayStatus",value:function(){var t=864e5,e=new Date,n=this.storageService.fetch("toutLastSeen");this.storageService.store("toutLastSeen",e.getTime()),void 0!==n&&e.getTime()-n<=t&&(this.scope.tout.visible=!1)}}]),t}();e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(120),s=r(a),u=function c(){"ngInject";return o["default"](this,c),{restrict:"E",templateUrl:"app/ouibounce/ouibounce.html",controller:s["default"],controllerAs:"vm",bindToController:!0,scope:{action:"="}}};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=n(121),s=r(a),u=function c(){"ngInject";return o["default"](this,c),{restrict:"E",templateUrl:"app/upgrade/upgrade.html",controller:s["default"],controllerAs:"vm",bindToController:!0,scope:!0}};e["default"]=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=r(i),a=function s(){"ngInject";o["default"](this,s);var t={restrict:"C",scope:{ngModel:"=?",change:"&",options:"=?"},link:function(t,e){e.chosen({disable_search_threshold:9}),e.on("change",function(){t.change({value:$(this).val()})}),t.$watch("options",function(){_.defer(function(){return e.trigger("chosen:updated")})}),t.$watch("ngModel",function(){_.defer(function(){return e.trigger("chosen:updated")})})}};return t};e["default"]=a},function(t,e){"use strict";angular.module("viewerConfig",[]).constant("config",{apiBase:"https://my.cl.ly",appBase:"https://my.cl.ly",secureBase:"https://cl.ly/",marketingBase:"https://www.getcloudapp.com",transcodingBase:"https://transcodings.cl.ly/transcodings",thumbnails:"a3a68up577.execute-api.us-east-1.amazonaws.com/production/t",vendorPath:"//s3.amazonaws.com/static.cl.ly/vendor",s3bucket:"static.cl.ly",schema:"https",env:{FILEPICKER_KEY:"Auiv8dTyGQSGrUA6TLwKez",AIRBRAKE_ID:"114043",AIRBRAKE_KEY:"8a2815dfa77e69605776062fb959280c",NODE_ENV:"production",SHARETHIS_KEY:"83992abc-7c26-4434-8609-c6bad278d4d8",SEGMENT_KEY:"g9l0ckpunp",ROLLBAR_TOKEN:"e377da1666874356a57c786619be489e"}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e){"ngInject";var n="staging"==e.env.NODE_ENV||"production"==e.env.NODE_ENV;if(n){var r=u["default"].init({accessToken:e.env.ROLLBAR_TOKEN,captureUncaught:!0,captureUnhandledRejections:!0});r.configure({environment:e.env.NODE_ENV})}a["default"](t,e,r);return function(e,r){if($("body").addClass("exception"),t.error(e),n)try{e.params={angular_cause:r}}catch(i){}}}i.$inject=["$log","config"],Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;var o=n(393),a=r(o),s=n(394),u=r(s)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function i(t,e,n){return function(t,e){n.error(t,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=i;{var o=n(394);r(o)}},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";var r=n(2),i="undefined"!=typeof window&&window._rollbarConfig,o=i&&i.globalAlias||"Rollbar",a="undefined"!=typeof window&&window[o]&&"function"==typeof window[o].shimId&&void 0!==window[o].shimId();if("undefined"==typeof window||window._rollbarStartTime||(window._rollbarStartTime=(new Date).getTime()),!a&&i){var s=new r(i);window[o]=s}else"undefined"!=typeof window?(window.rollbar=r,window._rollbarDidLoad=!0):"undefined"!=typeof self&&(self.rollbar=r,self._rollbarDidLoad=!0);t.exports=r},function(t,e,n){"use strict";function r(t,e){this.options=c.handleOptions(w,t);var n=new l(this.options,d,p);this.client=e||new u(this.options,n,h,"browser");var r="undefined"!=typeof window&&window||"undefined"!=typeof self&&self,i="undefined"!=typeof document&&document;o(this.client.notifier),a(this.client.queue),(this.options.captureUncaught||this.options.handleUncaughtExceptions)&&(f.captureUncaughtExceptions(r,this),f.wrapGlobals(r,this)),(this.options.captureUnhandledRejections||this.options.handleUnhandledRejections)&&f.captureUnhandledRejections(r,this),this.instrumenter=new b(this.options,this.client.telemeter,this,r,i),this.instrumenter.instrument()}function i(t){var e="Rollbar is not initialized";h.error(e),t&&t(new Error(e))}function o(t){t.addTransform(v.handleItemWithError).addTransform(v.ensureItemHasSomethingToSay).addTransform(v.addBaseInfo).addTransform(v.addRequestInfo(window)).addTransform(v.addClientInfo(window)).addTransform(v.addPluginInfo(window)).addTransform(v.addBody).addTransform(g.addMessageWithError).addTransform(g.addTelemetryData).addTransform(g.addConfigToPayload).addTransform(v.scrubPayload).addTransform(g.userTransform(h)).addTransform(g.itemToPayload)}function a(t){t.addPredicate(y.checkLevel).addPredicate(m.checkIgnore).addPredicate(y.userCheckIgnore(h)).addPredicate(y.urlIsNotBlacklisted(h)).addPredicate(y.urlIsWhitelisted(h)).addPredicate(y.messageIsIgnored(h))}function s(t){for(var e=0,n=t.length;n>e;++e)if(c.isFunction(t[e]))return t[e]}var u=n(3),c=n(5),l=n(11),h=n(13),f=n(16),d=n(17),p=n(19),v=n(20),g=n(24),m=n(25),y=n(26),_=n(21),b=n(27),x=null;r.init=function(t,e){return x?x.global(t).configure(t):x=new r(t,e)},r.prototype.global=function(t){return this.client.global(t),this},r.global=function(t){return x?x.global(t):void i()},r.prototype.configure=function(t,e){var n=this.options,r={};return e&&(r={payload:e}),this.options=c.handleOptions(n,t,r),this.client.configure(this.options,e),this.instrumenter.configure(this.options),this},r.configure=function(t,e){return x?x.configure(t,e):void i()},r.prototype.lastError=function(){return this.client.lastError},r.lastError=function(){return x?x.lastError():void i()},r.prototype.log=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.log(t),{uuid:e}},r.log=function(){if(x)return x.log.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.debug=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.debug(t),{uuid:e}},r.debug=function(){if(x)return x.debug.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.info=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.info(t),{uuid:e}},r.info=function(){if(x)return x.info.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.warn=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warn(t),{uuid:e}},r.warn=function(){if(x)return x.warn.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.warning=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.warning(t),{uuid:e}},r.warning=function(){if(x)return x.warning.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.error=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.error(t),{uuid:e}},r.error=function(){if(x)return x.error.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.critical=function(){var t=this._createItem(arguments),e=t.uuid;return this.client.critical(t),{uuid:e}},r.critical=function(){if(x)return x.critical.apply(x,arguments);var t=s(arguments);i(t)},r.prototype.handleUncaughtException=function(t,e,n,r,i,o){var a,s=c.makeUnhandledStackInfo(t,e,n,r,i,"onerror","uncaught exception",_);c.isError(i)?(a=this._createItem([t,i,o]),a._unhandledStackInfo=s):c.isError(e)?(a=this._createItem([t,e,o]),a._unhandledStackInfo=s):(a=this._createItem([t,o]),a.stackInfo=s),a.level=this.options.uncaughtErrorLevel,a._isUncaught=!0,this.client.log(a)},r.prototype.handleUnhandledRejection=function(t,e){var n="unhandled rejection was null or undefined!";if(t)if(t.message)n=t.message;else{var r=c.stringify(t);r.value&&(n=r.value)}var i,o=t&&t._rollbarContext||e&&e._rollbarContext;c.isError(t)?i=this._createItem([n,t,o]):(i=this._createItem([n,t,o]),i.stackInfo=c.makeUnhandledStackInfo(n,"",0,0,null,"unhandledrejection","",_)),i.level=this.options.uncaughtErrorLevel,i._isUncaught=!0,i._originalArgs=i._originalArgs||[],i._originalArgs.push(e),this.client.log(i)},r.prototype.wrap=function(t,e,n){try{var r;if(r=c.isFunction(e)?e:function(){return e||{}},!c.isFunction(t))return t;if(t._isWrap)return t;if(!t._rollbar_wrapped&&(t._rollbar_wrapped=function(){e&&c.isFunction(e)&&e.apply(this,arguments);try{return t.apply(this,arguments)}catch(e){var n=e;throw n&&(c.isType(n,"string")&&(n=new String(n)),n._rollbarContext=r()||{},n._rollbarContext._wrappedSource=t.toString(),window._rollbarWrappedError=n),n}},t._rollbar_wrapped._isWrap=!0,t.hasOwnProperty))for(var i in t)t.hasOwnProperty(i)&&(t._rollbar_wrapped[i]=t[i]);return t._rollbar_wrapped}catch(e){return t}},r.wrap=function(t,e){return x?x.wrap(t,e):void i()},r.prototype.captureEvent=function(t,e){return this.client.captureEvent(t,e)},r.captureEvent=function(t,e){return x?x.captureEvent(t,e):void i()},r.prototype.captureDomContentLoaded=function(t,e){return e||(e=new Date),this.client.captureDomContentLoaded(e)},r.prototype.captureLoad=function(t,e){return e||(e=new Date),this.client.captureLoad(e)},r.prototype._createItem=function(t){return c.createItem(t,h,this)};var w={version:"2.5.0",scrubFields:["pw","pass","passwd","password","secret","confirm_password","confirmPassword","password_confirmation","passwordConfirmation","access_token","accessToken","secret_key","secretKey","secretToken","cc-number","card number","cardnumber","cardnum","ccnum","ccnumber","cc num","creditcardnumber","credit card number","newcreditcardnumber","new credit card","creditcardno","credit card no","card#","card #","cc-csc","cvc2","cvv2","ccv2","security code","card verification","name on credit card","name on card","nameoncard","cardholder","card holder","name des karteninhabers","card type","cardtype","cc type","cctype","payment type","expiration date","expirationdate","expdate","cc-exp"],logLevel:"debug",reportLevel:"debug",uncaughtErrorLevel:"error",endpoint:"api.rollbar.com/api/1/item/",verbose:!1,enabled:!0,sendConfig:!1,includeItemsInTelemetry:!0,captureIp:!0};t.exports=r},function(t,e,n){"use strict";function r(t,e,n,i){this.options=c.merge(t),this.logger=n,r.rateLimiter.configureGlobal(this.options),r.rateLimiter.setPlatformOptions(i,this.options),this.queue=new a(r.rateLimiter,e,n,this.options),this.notifier=new s(this.queue,this.options),this.telemeter=new u(this.options),this.lastError=null,this.lastErrorHash="none"}function i(t){var e=t.message||"",n=(t.err||{}).stack||String(t.err);return e+"::"+n}var o=n(4),a=n(8),s=n(9),u=n(10),c=n(5),l={maxItems:0,itemsPerMinute:60};r.rateLimiter=new o(l),r.prototype.global=function(t){return r.rateLimiter.configureGlobal(t),this},r.prototype.configure=function(t,e){var n=this.options,r={};return e&&(r={payload:e}),this.options=c.merge(n,t,r),this.notifier&&this.notifier.configure(this.options),this.telemeter&&this.telemeter.configure(this.options),this.global(this.options),this},r.prototype.log=function(t){var e=this._defaultLogLevel();return this._log(e,t)},r.prototype.debug=function(t){this._log("debug",t)},r.prototype.info=function(t){this._log("info",t)},r.prototype.warn=function(t){this._log("warning",t)},r.prototype.warning=function(t){this._log("warning",t)},r.prototype.error=function(t){this._log("error",t)},r.prototype.critical=function(t){this._log("critical",t)},r.prototype.wait=function(t){this.queue.wait(t)},r.prototype.captureEvent=function(t,e){return this.telemeter.captureEvent(t,e)},r.prototype.captureDomContentLoaded=function(t){return this.telemeter.captureDomContentLoaded(t)},r.prototype.captureLoad=function(t){return this.telemeter.captureLoad(t)},r.prototype._log=function(t,e){var n;if(e.callback&&(n=e.callback,delete e.callback),this._sameAsLastError(e)){if(n){var r=new Error("ignored identical item");r.item=e,n(r)}}else try{e.level=e.level||t,this.telemeter._captureRollbarItem(e),e.telemetryEvents=this.telemeter.copyEvents(),this.notifier.log(e,n)}catch(t){this.logger.error(t)}},r.prototype._defaultLogLevel=function(){return this.options.logLevel||"debug"},r.prototype._sameAsLastError=function(t){if(!t._isUncaught)return!1;var e=i(t);return this.lastErrorHash===e||(this.lastError=t.err,this.lastErrorHash=e,!1)},t.exports=r},function(t,e,n){"use strict";function r(t){this.startTime=s.now(),this.counter=0,this.perMinCounter=0,this.platform=null,this.platformOptions={},this.configureGlobal(t)}function i(t,e,n){return!t.ignoreRateLimit&&e>=1&&n>e}function o(t,e,n,r,i,o,s){var u=null;return n&&(n=new Error(n)),n||r||(u=a(t,e,i,o,s)),{error:n,shouldSend:r,payload:u}}function a(t,e,n,r,i){var o,a=e.environment||e.payload&&e.payload.environment;o=i?"item per minute limit reached, ignoring errors until timeout":"maxItems has been hit, ignoring errors until reset.";var s={body:{message:{body:o,extra:{maxItems:n,itemsPerMinute:r}}},language:"javascript",environment:a,notifier:{version:e.notifier&&e.notifier.version||e.version}};return"browser"===t?(s.platform="browser",s.framework="browser-js",s.notifier.name="rollbar-browser-js"):"server"===t?(s.framework=e.framework||"node-js",s.notifier.name=e.notifier.name):"react-native"===t&&(s.framework=e.framework||"react-native",s.notifier.name=e.notifier.name),s}var s=n(5);r.globalSettings={startTime:s.now(),maxItems:void 0,itemsPerMinute:void 0},r.prototype.configureGlobal=function(t){void 0!==t.startTime&&(r.globalSettings.startTime=t.startTime),void 0!==t.maxItems&&(r.globalSettings.maxItems=t.maxItems),void 0!==t.itemsPerMinute&&(r.globalSettings.itemsPerMinute=t.itemsPerMinute)},r.prototype.shouldSend=function(t,e){e=e||s.now();var n=e-this.startTime;(0>n||n>=6e4)&&(this.startTime=e,this.perMinCounter=0);var a=r.globalSettings.maxItems,u=r.globalSettings.itemsPerMinute;if(i(t,a,this.counter))return o(this.platform,this.platformOptions,a+" max items reached",!1);if(i(t,u,this.perMinCounter))return o(this.platform,this.platformOptions,u+" items per minute reached",!1);this.counter++,this.perMinCounter++;var c=!i(t,a,this.counter),l=c;return c=c&&!i(t,u,this.perMinCounter),o(this.platform,this.platformOptions,null,c,a,u,l)},r.prototype.setPlatformOptions=function(t,e){this.platform=t,this.platformOptions=e},t.exports=r},function(t,e,n){"use strict";function r(){if(!j&&(j=!0,c(JSON)&&(s(JSON.stringify)&&(D.stringify=JSON.stringify),s(JSON.parse)&&(D.parse=JSON.parse)),!a(D.stringify)||!a(D.parse))){var t=n(7);t(D)}}function i(t,e){return e===o(t)}function o(t){var e=typeof t;return"object"!==e?e:t?t instanceof Error?"error":{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase():"null"}function a(t){return i(t,"function")}function s(t){var e=/[\\^$.*+?()[\]{}|]/g,n=Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(e,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?"),r=RegExp("^"+n+"$");return u(t)&&r.test(t)}function u(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function c(t){return!i(t,"undefined")}function l(t){var e=o(t);return"object"===e||"array"===e}function h(t){return i(t,"error")}function f(t,e,n){var r,o,a,s=i(t,"object"),u=i(t,"array"),c=[];if(s&&-1!==n.indexOf(t))return t;if(n.push(t),s)for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&c.push(r);else if(u)for(a=0;a<t.length;++a)c.push(a);var l=s?{}:[],h=!0;for(a=0;a<c.length;++a)r=c[a],o=t[r],l[r]=e(r,o,n),h=h&&l[r]===t[r];return 0==c.length||h?t:l}function d(){return"********"}function p(){var t=k(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:7&n|8).toString(16)});return e}function v(t){var e=g(t);return e?(""===e.anchor&&(e.source=e.source.replace("#","")),t=e.source.replace("?"+e.query,"")):"(unknown)"}function g(t){if(i(t,"string")){for(var e=N,n=e.parser[e.strictMode?"strict":"loose"].exec(t),r={},o=e.key.length;o--;)r[e.key[o]]=n[o]||"";return r[e.q.name]={},r[e.key[12]].replace(e.q.parser,function(t,n,i){n&&(r[e.q.name][n]=i)}),r}}function m(t,e,n){n=n||{},n.access_token=t;var r,i=[];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&i.push([r,n[r]].join("="));var o="?"+i.sort().join("&");e=e||{},e.path=e.path||"";var a,s=e.path.indexOf("?"),u=e.path.indexOf("#");-1!==s&&(-1===u||u>s)?(a=e.path,e.path=a.substring(0,s)+o+"&"+a.substring(s+1)):-1!==u?(a=e.path,e.path=a.substring(0,u)+o+a.substring(u)):e.path=e.path+o}function y(t,e){if(e=e||t.protocol,!e&&t.port&&(80===t.port?e="http:":443===t.port&&(e="https:")),e=e||"https:",!t.hostname)return null;var n=e+"//"+t.hostname;return t.port&&(n=n+":"+t.port),t.path&&(n+=t.path),n}function _(t,e){var n,r;try{n=D.stringify(t)}catch(i){if(e&&a(e))try{n=e(t)}catch(t){r=t}else r=i}return{error:r,value:n}}function b(t){var e,n;try{e=D.parse(t)}catch(t){n=t}return{error:n,value:e}}function x(t,e,n,r,i,o,a,s){var u={url:e||"",line:n,column:r};u.func=s.guessFunctionName(u.url,u.line),u.context=s.gatherContext(u.url,u.line);var c=document&&document.location&&document.location.href,l=window&&window.navigator&&window.navigator.userAgent;return{mode:o,message:i?String(i):t||a,url:c,stack:[u],useragent:l}}function w(t,e){return function(e,n){try{r(e,n)}catch(r){t.error(r)}}}function T(t,e,n,r,i){for(var a,s,u,c,l,h,f=[],d=0,v=t.length;v>d;++d){h=t[d];var g=o(h);switch(g){case"undefined":break;case"string":a?f.push(h):a=h;break;case"function":c=w(e,h);break;case"date":f.push(h);break;case"error":case"domexception":s?f.push(h):s=h;break;case"object":case"array":if(h instanceof Error||"undefined"!=typeof DOMException&&h instanceof DOMException){s?f.push(h):s=h;break}if(r&&"object"===g&&!l){for(var m=0,y=r.length;y>m;++m)if(void 0!==h[r[m]]){l=h;break}if(l)break}u?f.push(h):u=h;break;default:if(h instanceof Error||"undefined"!=typeof DOMException&&h instanceof DOMException){s?f.push(h):s=h;break}f.push(h)}}f.length>0&&(u=R(u),u.extraArgs=f);var _={message:a,err:s,custom:u,timestamp:k(),callback:c,uuid:p()};return u&&void 0!==u.level&&(_.level=u.level,delete u.level),r&&l&&(_.request=l),i&&(_.lambdaContext=i),_._originalArgs=t,_}function E(t,e){if(t){var n=e.split("."),r=t;try{for(var i=0,o=n.length;o>i;++i)r=r[n[i]]}catch(t){r=void 0}return r}}function S(t,e,n){if(t){var r=e.split("."),i=r.length;if(!(1>i)){if(1===i)return void(t[r[0]]=n);try{for(var o=t[r[0]]||{},a=o,s=1;i-1>s;s++)o[r[s]]=o[r[s]]||{},o=o[r[s]];o[r[i-1]]=n,t[r[0]]=a}catch(t){return}}}}function O(t,e){function n(t,e,n,r,i,o){return e+d(o)}function r(t){var e;if(i(t,"string"))for(e=0;e<u.length;++e)t=t.replace(u[e],n);return t}function o(t,e){var n;for(n=0;n<s.length;++n)if(s[n].test(t)){e=d(e);break}return e}function a(t,e,n){var s=o(t,e);return s===e?i(e,"object")||i(e,"array")?f(e,a,n):r(s):s}e=e||[];var s=M(e),u=C(e);return f(t,a,[])}function M(t){for(var e,n=[],r=0;r<t.length;++r)e="^\\[?(%5[bB])?"+t[r]+"\\[?(%5[bB])?\\]?(%5[dD])?$",n.push(new RegExp(e,"i"));return n}function C(t){for(var e,n=[],r=0;r<t.length;++r)e="\\[?(%5[bB])?"+t[r]+"\\[?(%5[bB])?\\]?(%5[dD])?",n.push(new RegExp("("+e+"=)([^&\\n]+)","igm"));return n}function P(t){var e,n,r,i=[];for(e=0,n=t.length;n>e;e++){switch(r=t[e],o(r)){case"object":r=_(r),r=r.error||r.value,r.length>500&&(r=r.substr(0,497)+"...");break;case"null":r="null";break;case"undefined":r="undefined";break;case"symbol":r=r.toString()}i.push(r)}return i.join(" ")}function k(){return Date.now?+Date.now():+new Date}function A(t,e){if(t&&t.user_ip&&e!==!0){var n=t.user_ip;if(e)try{var r;if(-1!==n.indexOf("."))r=n.split("."),r.pop(),r.push("0"),n=r.join(".");else if(-1!==n.indexOf(":")){if(r=n.split(":"),r.length>2){var i=r.slice(0,3),o=i[2].indexOf("/");-1!==o&&(i[2]=i[2].substring(0,o));var a="0000:0000:0000:0000:0000";n=i.concat(a).join(":")}}else n=null}catch(t){n=null}else n=null;t.user_ip=n}}function I(t,e,n){var r=R(t,e,n);return!e||e.overwriteScrubFields?r:(e.scrubFields&&(r.scrubFields=(t.scrubFields||[]).concat(e.scrubFields)),r)}var R=n(6),D={},j=!1;r();var L={debug:0,info:1,warning:2,error:3,critical:4},N={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};t.exports={addParamsAndAccessTokenToPath:m,createItem:T,filterIp:A,formatArgsAsString:P,formatUrl:y,get:E,handleOptions:I,isError:h,isFunction:a,isIterable:l,isNativeFunction:s,isType:i,jsonParse:b,LEVELS:L,makeUnhandledStackInfo:x,merge:R,now:k,redact:d,sanitizeUrl:v,scrub:O,set:S,stringify:_,traverse:f,typeName:o,uuid4:p}},function(t,e){"use strict";function n(){var t,e,r,i,a,s={},u=null,c=arguments.length;for(t=0;c>t;t++)if(u=arguments[t],null!=u)for(a in u)e=s[a],r=u[a],s!==r&&(r&&o(r)?(i=e&&o(e)?e:{},s[a]=n(i,r)):"undefined"!=typeof r&&(s[a]=r));return s}var r=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e=r.call(t,"constructor"),n=t.constructor&&t.constructor.prototype&&r.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!e&&!n)return!1;var o;for(o in t);return"undefined"==typeof o||r.call(t,o)};t.exports=n},function(t,e){var n=function(t){function e(t){return 10>t?"0"+t:t}function n(){return this.valueOf()}function r(t){return o.lastIndex=0,o.test(t)?'"'+t.replace(o,function(t){var e=u[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function i(t,e){var n,o,u,l,h,f=a,d=e[t];switch(d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(t)),"function"==typeof c&&(d=c.call(e,t,d)),typeof d){case"string":return r(d);case"number":return isFinite(d)?String(d):"null";case"boolean":case"null":return String(d);case"object":if(!d)return"null";if(a+=s,h=[],"[object Array]"===Object.prototype.toString.apply(d)){for(l=d.length,n=0;l>n;n+=1)h[n]=i(n,d)||"null";return u=0===h.length?"[]":a?"[\n"+a+h.join(",\n"+a)+"\n"+f+"]":"["+h.join(",")+"]",a=f,u}if(c&&"object"==typeof c)for(l=c.length,n=0;l>n;n+=1)"string"==typeof c[n]&&(o=c[n],u=i(o,d),u&&h.push(r(o)+(a?": ":":")+u));else for(o in d)Object.prototype.hasOwnProperty.call(d,o)&&(u=i(o,d),u&&h.push(r(o)+(a?": ":":")+u));return u=0===h.length?"{}":a?"{\n"+a+h.join(",\n"+a)+"\n"+f+"}":"{"+h.join(",")+"}",a=f,u}}var o=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=n,Number.prototype.toJSON=n,String.prototype.toJSON=n);var a,s,u,c;"function"!=typeof t.stringify&&(u={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t.stringify=function(t,e,n){var r;if(a="",s="","number"==typeof n)for(r=0;n>r;r+=1)s+=" ";else"string"==typeof n&&(s=n);if(c=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return i("",{"":t})}),"function"!=typeof t.parse&&(t.parse=function(){var t,e,n,r,i,o={"\\":"\\",'"':'"',"/":"/",t:"	",n:"\n",r:"\r",f:"\f",b:"\b"},a={go:function(){t="ok"},firstokey:function(){r=i,t="colon"},okey:function(){r=i,t="colon"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},s={go:function(){t="ok"},ovalue:function(){t="ocomma"},firstavalue:function(){t="acomma"},avalue:function(){t="acomma"}},u={"{":{go:function(){e.push({state:"ok"}),n={},t="firstokey"},ovalue:function(){e.push({container:n,state:"ocomma",key:r}),n={},t="firstokey"},firstavalue:function(){e.push({container:n,state:"acomma"}),n={},t="firstokey"},avalue:function(){e.push({container:n,state:"acomma"}),n={},t="firstokey"}},"}":{firstokey:function(){var o=e.pop();i=n,n=o.container,r=o.key,t=o.state},ocomma:function(){var o=e.pop();n[r]=i,i=n,n=o.container,r=o.key,t=o.state}},"[":{go:function(){e.push({state:"ok"}),n=[],t="firstavalue"},ovalue:function(){e.push({container:n,state:"ocomma",key:r}),n=[],t="firstavalue"},firstavalue:function(){e.push({container:n,state:"acomma"}),n=[],t="firstavalue"},avalue:function(){e.push({container:n,state:"acomma"}),n=[],t="firstavalue"}},"]":{firstavalue:function(){var o=e.pop();i=n,n=o.container,r=o.key,t=o.state},acomma:function(){var o=e.pop();n.push(i),i=n,n=o.container,r=o.key,t=o.state}},":":{colon:function(){if(Object.hasOwnProperty.call(n,r))throw new SyntaxError("Duplicate key '"+r+'"');t="ovalue"}},",":{ocomma:function(){n[r]=i,t="okey"},acomma:function(){n.push(i),t="avalue"}},"true":{go:function(){i=!0,t="ok"},ovalue:function(){i=!0,t="ocomma"},firstavalue:function(){i=!0,t="acomma"},avalue:function(){i=!0,t="acomma"}},"false":{go:function(){i=!1,t="ok"},ovalue:function(){i=!1,t="ocomma"},firstavalue:function(){i=!1,t="acomma"},avalue:function(){i=!1,t="acomma"}},"null":{go:function(){i=null,t="ok"},ovalue:function(){i=null,t="ocomma"},firstavalue:function(){i=null,t="acomma"},avalue:function(){i=null,t="acomma"}}};return function(n,r){var o,c=/^[\u0020\t\n\r]*(?:([,:\[\]{}]|true|false|null)|(-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)|"((?:[^\r\n\t\\\"]|\\(?:["\\\/trnfb]|u[0-9a-fA-F]{4}))*)")/;t="go",e=[];try{for(;o=c.exec(n),o;)o[1]?u[o[1]][t]():o[2]?(i=+o[2],s[t]()):(i=l(o[3]),a[t]()),n=n.slice(o[0].length)}catch(l){t=l}if("ok"!==t||/[^\u0020\t\n\r]/.test(n))throw t instanceof SyntaxError?t:new SyntaxError("JSON");return"function"==typeof r?function h(t,e){var n,o,a=t[e];if(a&&"object"==typeof a)for(n in i)Object.prototype.hasOwnProperty.call(a,n)&&(o=h(a,n),
void 0!==o?a[n]=o:delete a[n]);return r.call(t,e,a)}({"":i},""):i}}())};t.exports=n},function(t,e,n){"use strict";function r(t,e,n,r){this.rateLimiter=t,this.api=e,this.logger=n,this.options=r,this.predicates=[],this.pendingItems=[],this.pendingRequests=[],this.retryQueue=[],this.retryHandle=null,this.waitCallback=null,this.waitIntervalID=null}var i=n(5);r.prototype.configure=function(t){this.api&&this.api.configure(t);var e=this.options;return this.options=i.merge(e,t),this},r.prototype.addPredicate=function(t){return i.isFunction(t)&&this.predicates.push(t),this},r.prototype.addPendingItem=function(t){this.pendingItems.push(t)},r.prototype.removePendingItem=function(t){var e=this.pendingItems.indexOf(t);-1!==e&&this.pendingItems.splice(e,1)},r.prototype.addItem=function(t,e,n,r){e&&i.isFunction(e)||(e=function(){});var o=this._applyPredicates(t);if(o.stop)return this.removePendingItem(r),void e(o.err);this._maybeLog(t,n),this.removePendingItem(r),this.pendingRequests.push(t);try{this._makeApiRequest(t,function(n,r){this._dequeuePendingRequest(t),e(n,r)}.bind(this))}catch(n){this._dequeuePendingRequest(t),e(n)}},r.prototype.wait=function(t){i.isFunction(t)&&(this.waitCallback=t,this._maybeCallWait()||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitIntervalID=setInterval(function(){this._maybeCallWait()}.bind(this),500)))},r.prototype._applyPredicates=function(t){for(var e=null,n=0,r=this.predicates.length;r>n;n++)if(e=this.predicates[n](t,this.options),!e||void 0!==e.err)return{stop:!0,err:e.err};return{stop:!1,err:null}},r.prototype._makeApiRequest=function(t,e){var n=this.rateLimiter.shouldSend(t);n.shouldSend?this.api.postItem(t,function(n,r){n?this._maybeRetry(n,t,e):e(n,r)}.bind(this)):n.error?e(n.error):this.api.postItem(n.payload,e)};var o=["ECONNRESET","ENOTFOUND","ESOCKETTIMEDOUT","ETIMEDOUT","ECONNREFUSED","EHOSTUNREACH","EPIPE","EAI_AGAIN"];r.prototype._maybeRetry=function(t,e,n){var r=!1;if(this.options.retryInterval)for(var i=0,a=o.length;a>i;i++)if(t.code===o[i]){r=!0;break}r?this._retryApiRequest(e,n):n(t)},r.prototype._retryApiRequest=function(t,e){this.retryQueue.push({item:t,callback:e}),this.retryHandle||(this.retryHandle=setInterval(function(){for(;this.retryQueue.length;){var t=this.retryQueue.shift();this._makeApiRequest(t.item,t.callback)}}.bind(this),this.options.retryInterval))},r.prototype._dequeuePendingRequest=function(t){var e=this.pendingRequests.indexOf(t);-1!==e&&(this.pendingRequests.splice(e,1),this._maybeCallWait())},r.prototype._maybeLog=function(t,e){if(this.logger&&this.options.verbose){var n=e;if(n=n||i.get(t,"body.trace.exception.message"),n=n||i.get(t,"body.trace_chain.0.exception.message"))return void this.logger.error(n);n=i.get(t,"body.message.body"),n&&this.logger.log(n)}},r.prototype._maybeCallWait=function(){return!(!i.isFunction(this.waitCallback)||0!==this.pendingItems.length||0!==this.pendingRequests.length||(this.waitIntervalID&&(this.waitIntervalID=clearInterval(this.waitIntervalID)),this.waitCallback(),0))},t.exports=r},function(t,e,n){"use strict";function r(t,e){this.queue=t,this.options=e,this.transforms=[]}var i=n(5);r.prototype.configure=function(t){this.queue&&this.queue.configure(t);var e=this.options;return this.options=i.merge(e,t),this},r.prototype.addTransform=function(t){return i.isFunction(t)&&this.transforms.push(t),this},r.prototype.log=function(t,e){if(e&&i.isFunction(e)||(e=function(){}),!this.options.enabled)return e(new Error("Rollbar is not enabled"));this.queue.addPendingItem(t);var n=t.err;this._applyTransforms(t,function(r,i){return r?(this.queue.removePendingItem(t),e(r,null)):void this.queue.addItem(i,e,n,t)}.bind(this))},r.prototype._applyTransforms=function(t,e){var n=-1,r=this.transforms.length,i=this.transforms,o=this.options,a=function(t,s){return t?void e(t,null):(n++,n===r?void e(null,s):void i[n](s,o,a))};a(null,t)},t.exports=r},function(t,e,n){"use strict";function r(t){this.queue=[],this.options=o.merge(t);var e=this.options.maxTelemetryEvents||a;this.maxQueueSize=Math.max(0,Math.min(e,a))}function i(t,e){if(e)return e;var n={error:"error",manual:"info"};return n[t]||"info"}var o=n(5),a=100;r.prototype.configure=function(t){var e=this.options;this.options=o.merge(e,t);var n=this.options.maxTelemetryEvents||a,r=Math.max(0,Math.min(n,a)),i=0;this.maxQueueSize>r&&(i=this.maxQueueSize-r),this.maxQueueSize=r,this.queue.splice(0,i)},r.prototype.copyEvents=function(){var t=Array.prototype.slice.call(this.queue,0);if(o.isFunction(this.options.filterTelemetry))try{for(var e=t.length;e--;)this.options.filterTelemetry(t[e])&&t.splice(e,1)}catch(t){this.options.filterTelemetry=null}return t},r.prototype.capture=function(t,e,n,r,a){var s={level:i(t,n),type:t,timestamp_ms:a||o.now(),body:e,source:"client"};r&&(s.uuid=r);try{if(o.isFunction(this.options.filterTelemetry)&&this.options.filterTelemetry(s))return!1}catch(t){this.options.filterTelemetry=null}return this.push(s),s},r.prototype.captureEvent=function(t,e,n){return this.capture("manual",t,e,n)},r.prototype.captureError=function(t,e,n,r){var i={message:t.message||String(t)};return t.stack&&(i.stack=t.stack),this.capture("error",i,e,n,r)},r.prototype.captureLog=function(t,e,n,r){return this.capture("log",{message:t},e,n,r)},r.prototype.captureNetwork=function(t,e,n,r){e=e||"xhr",t.subtype=t.subtype||e,r&&(t.request=r);var i=this.levelFromStatus(t.status_code);return this.capture("network",t,i,n)},r.prototype.levelFromStatus=function(t){return t>=200&&400>t?"info":0===t||t>=400?"error":"info"},r.prototype.captureDom=function(t,e,n,r,i){var o={subtype:t,element:e};return void 0!==n&&(o.value=n),void 0!==r&&(o.checked=r),this.capture("dom",o,"info",i)},r.prototype.captureNavigation=function(t,e,n){return this.capture("navigation",{from:t,to:e},"info",n)},r.prototype.captureDomContentLoaded=function(t){return this.capture("navigation",{subtype:"DOMContentLoaded"},"info",void 0,t&&t.getTime())},r.prototype.captureLoad=function(t){return this.capture("navigation",{subtype:"load"},"info",void 0,t&&t.getTime())},r.prototype.captureConnectivityChange=function(t,e){return this.captureNetwork({change:t},"connectivity",e)},r.prototype._captureRollbarItem=function(t){return this.options.includeItemsInTelemetry?t.err?this.captureError(t.err,t.level,t.uuid,t.timestamp):t.message?this.captureLog(t.message,t.level,t.uuid,t.timestamp):t.custom?this.capture("log",t.custom,t.level,t.uuid,t.timestamp):void 0:void 0},r.prototype.push=function(t){this.queue.push(t),this.queue.length>this.maxQueueSize&&this.queue.shift()},t.exports=r},function(t,e,n){"use strict";function r(t,e,n,r){this.options=t,this.transport=e,this.url=n,this.jsonBackup=r,this.accessToken=t.accessToken,this.transportOptions=i(t,n)}function i(t,e){return a.getTransportFromOptions(t,s,e)}var o=n(5),a=n(12),s={hostname:"api.rollbar.com",path:"/api/1/item/",search:null,version:"1",protocol:"https:",port:443};r.prototype.postItem=function(t,e){var n=a.transportOptions(this.transportOptions,"POST"),r=a.buildPayload(this.accessToken,t,this.jsonBackup);this.transport.post(this.accessToken,n,r,e)},r.prototype.configure=function(t){var e=this.oldOptions;return this.options=o.merge(e,t),this.transportOptions=i(this.options,this.url),void 0!==this.options.accessToken&&(this.accessToken=this.options.accessToken),this},t.exports=r},function(t,e,n){"use strict";function r(t,e,n){if(!s.isType(e.context,"string")){var r=s.stringify(e.context,n);e.context=r.error?"Error: could not serialize 'context'":r.value||"",e.context.length>255&&(e.context=e.context.substr(0,255))}return{access_token:t,data:e}}function i(t,e,n){var r=e.hostname,i=e.protocol,o=e.port,a=e.path,s=e.search,u=t.proxy;if(t.endpoint){var c=n.parse(t.endpoint);r=c.hostname,i=c.protocol,o=c.port,a=c.pathname,s=c.search}return{hostname:r,protocol:i,port:o,path:a,search:s,proxy:u}}function o(t,e){var n=t.protocol||"https:",r=t.port||("http:"===n?80:"https:"===n?443:void 0),i=t.hostname,o=t.path;return t.search&&(o+=t.search),t.proxy&&(o=n+"//"+i+o,i=t.proxy.host||t.proxy.hostname,r=t.proxy.port,n=t.proxy.protocol||n),{protocol:n,hostname:i,path:o,port:r,method:e}}function a(t,e){var n=/\/$/.test(t),r=/^\//.test(e);return n&&r?e=e.substring(1):n||r||(e="/"+e),t+e}var s=n(5);t.exports={buildPayload:r,getTransportFromOptions:i,transportOptions:o,appendPathToPath:a}},function(t,e,n){"use strict";function r(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.error(s.formatArgsAsString(t)):console.error.apply(console,t)}function i(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.info(s.formatArgsAsString(t)):console.info.apply(console,t)}function o(){var t=Array.prototype.slice.call(arguments,0);t.unshift("Rollbar:"),a.ieVersion()<=8?console.log(s.formatArgsAsString(t)):console.log.apply(console,t)}n(14);var a=n(15),s=n(5);t.exports={error:r,info:i,log:o}},function(t,e){!function(t){"use strict";t.console||(t.console={});for(var e,n,r=t.console,i=function(){},o=["memory"],a="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");e=o.pop();)r[e]||(r[e]={});for(;n=a.pop();)r[n]||(r[n]=i)}("undefined"==typeof window?this:window)},function(t,e){"use strict";function n(){var t;if(!document)return t;for(var e=3,n=document.createElement("div"),r=n.getElementsByTagName("i");n.innerHTML="<!--[if gt IE "+ ++e+"]><i></i><![endif]-->",r[0];);return e>4?e:t}var r={ieVersion:n};t.exports=r},function(t,e){"use strict";function n(t,e,n){if(t){var i;if("function"==typeof e._rollbarOldOnError)i=e._rollbarOldOnError;else if(t.onerror){for(i=t.onerror;i._rollbarOldOnError;)i=i._rollbarOldOnError;e._rollbarOldOnError=i}var o=function(){var n=Array.prototype.slice.call(arguments,0);r(t,e,i,n)};n&&(o._rollbarOldOnError=i),t.onerror=o}}function r(t,e,n,r){t._rollbarWrappedError&&(r[4]||(r[4]=t._rollbarWrappedError),r[5]||(r[5]=t._rollbarWrappedError._rollbarContext),t._rollbarWrappedError=null),e.handleUncaughtException.apply(e,r),n&&n.apply(t,r)}function i(t,e,n){if(t){"function"==typeof t._rollbarURH&&t._rollbarURH.belongsToShim&&t.removeEventListener("unhandledrejection",t._rollbarURH);var r=function(t){var n,r,i;try{n=t.reason}catch(t){n=void 0}try{r=t.promise}catch(t){r="[unhandledrejection] error getting `promise` from event"}try{i=t.detail,!n&&i&&(n=i.reason,r=i.promise)}catch(t){i="[unhandledrejection] error getting `detail` from event"}n||(n="[unhandledrejection] error getting `reason` from event"),e&&e.handleUnhandledRejection&&e.handleUnhandledRejection(n,r)};r.belongsToShim=n,t._rollbarURH=r,t.addEventListener("unhandledrejection",r)}}function o(t,e,n){if(t){var r,i,o="EventTarget,Window,Node,ApplicationCache,AudioTrackList,ChannelMergerNode,CryptoOperation,EventSource,FileReader,HTMLUnknownElement,IDBDatabase,IDBRequest,IDBTransaction,KeyOperation,MediaController,MessagePort,ModalWindow,Notification,SVGElementInstance,Screen,TextTrack,TextTrackCue,TextTrackList,WebSocket,WebSocketWorker,Worker,XMLHttpRequest,XMLHttpRequestEventTarget,XMLHttpRequestUpload".split(",");for(r=0;r<o.length;++r)i=o[r],t[i]&&t[i].prototype&&a(e,t[i].prototype,n)}}function a(t,e,n){if(e.hasOwnProperty&&e.hasOwnProperty("addEventListener")){for(var r=e.addEventListener;r._rollbarOldAdd&&r.belongsToShim;)r=r._rollbarOldAdd;var i=function(e,n,i){r.call(this,e,t.wrap(n),i)};i._rollbarOldAdd=r,i.belongsToShim=n,e.addEventListener=i;for(var o=e.removeEventListener;o._rollbarOldRemove&&o.belongsToShim;)o=o._rollbarOldRemove;var a=function(t,e,n){o.call(this,t,e&&e._rollbar_wrapped||e,n)};a._rollbarOldRemove=o,a.belongsToShim=n,e.removeEventListener=a}}t.exports={captureUncaughtExceptions:n,captureUnhandledRejections:i,wrapGlobals:o}},function(t,e,n){"use strict";function r(t,e,n,r,i){r&&l.isFunction(r)||(r=function(){}),l.addParamsAndAccessTokenToPath(t,e,n);var a="GET",s=l.formatUrl(e);o(t,s,a,null,r,i)}function i(t,e,n,r,i){if(r&&l.isFunction(r)||(r=function(){}),!n)return r(new Error("Cannot send empty request"));var a=h.truncate(n);if(a.error)return r(a.error);var s=a.value,u="POST",c=l.formatUrl(e);o(t,c,u,s,r,i)}function o(t,e,n,r,i,o){var h;if(h=o?o():a(),!h)return i(new Error("No way to send a request"));try{try{var d=function(){try{if(d&&4===h.readyState){d=void 0;var t=l.jsonParse(h.responseText);if(s(h))return void i(t.error,t.value);if(u(h)){if(403===h.status){var e=t.value&&t.value.message;f.error(e)}i(new Error(String(h.status)))}else{var n="XHR response had no status code (likely connection failure)";i(c(n))}}}catch(t){var r;r=t&&t.stack?t:new Error(t),i(r)}};h.open(n,e,!0),h.setRequestHeader&&(h.setRequestHeader("Content-Type","application/json"),h.setRequestHeader("X-Rollbar-Access-Token",t)),h.onreadystatechange=d,h.send(r)}catch(t){if("undefined"!=typeof XDomainRequest){if(!window||!window.location)return i(new Error("No window available during request, unknown environment"));"http:"===window.location.href.substring(0,5)&&"https"===e.substring(0,5)&&(e="http"+e.substring(5));var p=new XDomainRequest;p.onprogress=function(){},p.ontimeout=function(){var t="Request timed out",e="ETIMEDOUT";i(c(t,e))},p.onerror=function(){i(new Error("Error during request"))},p.onload=function(){var t=l.jsonParse(p.responseText);i(t.error,t.value)},p.open(n,e,!0),p.send(r)}else i(new Error("Cannot find a method to transport a request"))}}catch(t){i(t)}}function a(){var t,e,n=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],r=n.length;for(e=0;r>e;e++)try{t=n[e]();break}catch(t){}return t}function s(t){return t&&t.status&&200===t.status}function u(t){return t&&l.isType(t.status,"number")&&t.status>=400&&t.status<600}function c(t,e){var n=new Error(t);return n.code=e||"ENOTFOUND",n}var l=n(5),h=n(18),f=n(13);t.exports={get:r,post:i}},function(t,e,n){"use strict";function r(t,e){return[t,f.stringify(t,e)]}function i(t,e){var n=t.length;return n>2*e?t.slice(0,e).concat(t.slice(n-e)):t}function o(t,e,n){n="undefined"==typeof n?30:n;var r,o=t.data.body;if(o.trace_chain)for(var a=o.trace_chain,s=0;s<a.length;s++)r=a[s].frames,r=i(r,n),a[s].frames=r;else o.trace&&(r=o.trace.frames,r=i(r,n),o.trace.frames=r);return[t,f.stringify(t,e)]}function a(t,e){return e&&e.length>t?e.slice(0,t-3).concat("..."):e}function s(t,e,n){function r(e,n,i){switch(f.typeName(n)){case"string":return a(t,n);case"object":case"array":return f.traverse(n,r,i);default:return n}}return e=f.traverse(e,r,[]),[e,f.stringify(e,n)]}function u(t){return t.exception&&(delete t.exception.description,t.exception.message=a(255,t.exception.message)),t.frames=i(t.frames,1),t}function c(t,e){var n=t.data.body;if(n.trace_chain)for(var r=n.trace_chain,i=0;i<r.length;i++)r[i]=u(r[i]);else n.trace&&(n.trace=u(n.trace));return[t,f.stringify(t,e)]}function l(t,e){return t.length>e}function h(t,e,n){n="undefined"==typeof n?524288:n;for(var i,a,u,h=[r,o,s.bind(null,1024),s.bind(null,512),s.bind(null,256),c];i=h.shift();)if(a=i(t,e),t=a[0],u=a[1],u.error||!l(u.value,n))return u;return u}var f=n(5);t.exports={truncate:h,raw:r,truncateFrames:o,truncateStrings:s,maybeTruncateValue:a}},function(t,e){"use strict";function n(t){var e,n,r={protocol:null,auth:null,host:null,path:null,hash:null,href:t,hostname:null,port:null,pathname:null,search:null,query:null};if(e=t.indexOf("//"),-1!==e?(r.protocol=t.substring(0,e),n=e+2):n=0,e=t.indexOf("@",n),-1!==e&&(r.auth=t.substring(n,e),n=e+1),e=t.indexOf("/",n),-1===e){if(e=t.indexOf("?",n),-1===e)return e=t.indexOf("#",n),-1===e?r.host=t.substring(n):(r.host=t.substring(n,e),r.hash=t.substring(e)),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),r;r.host=t.substring(n,e),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=e}else r.host=t.substring(n,e),r.hostname=r.host.split(":")[0],r.port=r.host.split(":")[1],r.port&&(r.port=parseInt(r.port,10)),n=e;if(e=t.indexOf("#",n),-1===e?r.path=t.substring(n):(r.path=t.substring(n,e),r.hash=t.substring(e)),r.path){var i=r.path.split("?");r.pathname=i[0],r.query=i[1],r.search=r.query?"?"+r.query:null}return r}t.exports={parse:n}},function(t,e,n){"use strict";function r(t,e,n){if(t.data=t.data||{},t.err)try{t.stackInfo=t.err._savedStackTrace||p.parse(t.err)}catch(e){v.error("Error while parsing the error object.",e);try{t.message=t.err.message||t.err.description||t.message||String(t.err)}catch(e){t.message=String(t.err)||String(e)}delete t.err}n(null,t)}function i(t,e,n){t.message||t.stackInfo||t.custom||n(new Error("No message, stack info, or custom data"),null),n(null,t)}function o(t,e,n){var r=e.payload&&e.payload.environment||e.environment;t.data=d.merge(t.data,{environment:r,level:t.level,endpoint:e.endpoint,platform:"browser",framework:"browser-js",language:"javascript",server:{},uuid:t.uuid,notifier:{name:"rollbar-browser-js",version:e.version}}),n(null,t)}function a(t){return function(e,n,r){if(!t||!t.location)return r(null,e);var i="$remote_ip";n.captureIp?n.captureIp!==!0&&(i+="_anonymize"):i=null,d.set(e,"data.request",{url:t.location.href,query_string:t.location.search,user_ip:i}),r(null,e)}}function s(t){return function(e,n,r){if(!t)return r(null,e);var i=t.navigator||{},o=t.screen||{};d.set(e,"data.client",{runtime_ms:e.timestamp-t._rollbarStartTime,timestamp:Math.round(e.timestamp/1e3),javascript:{browser:i.userAgent,language:i.language,cookie_enabled:i.cookieEnabled,screen:{width:o.width,height:o.height}}}),r(null,e)}}function u(t){return function(e,n,r){if(!t||!t.navigator)return r(null,e);for(var i,o=[],a=t.navigator.plugins||[],s=0,u=a.length;u>s;++s)i=a[s],o.push({name:i.name,description:i.description});d.set(e,"data.client.javascript.plugins",o),r(null,e)}}function c(t,e,n){t.stackInfo?h(t,e,n):l(t,e,n)}function l(t,e,n){var r=t.message,i=t.custom;if(!r)if(i){var o=e.scrubFields,a=d.stringify(d.scrub(i,o));r=a.error||a.value||""}else r="";var s={body:r};i&&(s.extra=d.merge(i)),d.set(t,"data.body",{message:s}),n(null,t)}function h(t,e,n){var r=t.data.description,i=t.stackInfo,o=t.custom,a=p.guessErrorClass(i.message),s=i.name||a[0],u=a[1],c={exception:{"class":s,message:u}};r&&(c.exception.description=r);var h=i.stack;if(h&&0===h.length&&t._unhandledStackInfo&&t._unhandledStackInfo.stack&&(h=t._unhandledStackInfo.stack),h){0===h.length&&(c.exception.stack=i.rawStack,c.exception.raw=String(i.rawException));var f,v,g,m,y,_,b,x;for(c.frames=[],b=0;b<h.length;++b)f=h[b],v={filename:f.url?d.sanitizeUrl(f.url):"(unknown)",lineno:f.line||null,method:f.func&&"?"!==f.func?f.func:"[anonymous]",colno:f.column},e.sendFrameUrl&&(v.url=f.url),v.method&&v.method.endsWith&&v.method.endsWith("_rollbar_wrapped")||(g=m=y=null,_=f.context?f.context.length:0,_&&(x=Math.floor(_/2),m=f.context.slice(0,x),g=f.context[x],y=f.context.slice(x)),g&&(v.code=g),(m||y)&&(v.context={},m&&m.length&&(v.context.pre=m),y&&y.length&&(v.context.post=y)),f.args&&(v.args=f.args),c.frames.push(v));c.frames.reverse(),o&&(c.extra=d.merge(o)),d.set(t,"data.body",{trace:c}),n(null,t)}else t.message=s+": "+u,l(t,e,n)}function f(t,e,n){var r=e.scrubFields;t.data=d.scrub(t.data,r),n(null,t)}var d=n(5),p=n(21),v=n(13);t.exports={handleItemWithError:r,ensureItemHasSomethingToSay:i,addBaseInfo:o,addRequestInfo:a,addClientInfo:s,addPluginInfo:u,addBody:c,scrubPayload:f}},function(t,e,n){"use strict";function r(){return l}function i(){return null}function o(t){var e={};return e._stackFrame=t,e.url=t.fileName,e.line=t.lineNumber,e.func=t.functionName,e.column=t.columnNumber,e.args=t.args,e.context=i(e.url,e.line),e}function a(t){function e(){var t,e=[];if(n.stack)t=n;else try{throw n}catch(n){t=n}try{e=c.parse(t)}catch(n){e=[]}for(var r=[],i=0;i<e.length;i++)r.push(new o(e[i]));return r}return{stack:e(),message:t.message,name:t.name,rawStack:t.stack,rawException:t}}function s(t){return new a(t)}function u(t){if(!t||!t.match)return["Unknown error. There was no error message to display.",""];var e=t.match(h),n="(unknown)";return e&&(n=e[e.length-1],t=t.replace((e[e.length-2]||"")+n+":",""),t=t.replace(/(^[\s]+|[\s]+$)/g,"")),[n,t]}var c=n(22),l="?",h=new RegExp("^(([a-zA-Z0-9-_$ ]*): *)?(Uncaught )?([a-zA-Z0-9-_$ ]*): ");t.exports={guessFunctionName:r,guessErrorClass:u,gatherContext:i,parse:s,Stack:a,Frame:o}},function(t,e,n){var r,i,o;!function(a,s){"use strict";i=[n(23)],r=s,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}(this,function(t){"use strict";function e(t,e,n){if("function"==typeof Array.prototype.map)return t.map(e,n);for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=e.call(n,t[i]);return r}function n(t,e,n){if("function"==typeof Array.prototype.filter)return t.filter(e,n);for(var r=[],i=0;i<t.length;i++)e.call(n,t[i])&&r.push(t[i]);return r}var r=/(^|@)\S+\:\d+/,i=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if("undefined"!=typeof t.stacktrace||"undefined"!=typeof t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(i))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=t.replace(/[\(\)\s]/g,"").split(":"),n=e.pop(),r=e[e.length-1];if(!isNaN(parseFloat(r))&&isFinite(r)){var i=e.pop();return[e.join(":"),i,n]}return[e.join(":"),n,void 0]},parseV8OrIE:function(r){var o=n(r.stack.split("\n"),function(t){return!!t.match(i)},this);return e(o,function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var n=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(n.pop()),i=n.join(" ")||void 0,o="eval"===r[0]?void 0:r[0];return new t(i,void 0,o,r[1],r[2],e)},this)},parseFFOrSafari:function(r){var i=n(r.stack.split("\n"),function(t){return!t.match(o)},this);return e(i,function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t(e);var n=e.split("@"),r=this.extractLocation(n.pop()),i=n.shift()||void 0;return new t(i,void 0,r[0],r[1],r[2],e)},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)/i,r=e.message.split("\n"),i=[],o=2,a=r.length;a>o;o+=2){var s=n.exec(r[o]);s&&i.push(new t(void 0,void 0,s[2],s[1],void 0,r[o]))}return i},parseOpera10:function(e){for(var n=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,r=e.stacktrace.split("\n"),i=[],o=0,a=r.length;a>o;o+=2){var s=n.exec(r[o]);s&&i.push(new t(s[3]||void 0,void 0,s[2],s[1],void 0,r[o]))}return i},parseOpera11:function(i){var o=n(i.stack.split("\n"),function(t){return!!t.match(r)&&!t.match(/^Error created at/)},this);return e(o,function(e){var n,r=e.split("@"),i=this.extractLocation(r.pop()),o=r.shift()||"",a=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(n=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var s=void 0===n||"[arguments not available]"===n?void 0:n.split(",");return new t(a,s,i[0],i[1],i[2],e)},this)}}})},function(t,e,n){var r,i,o;!function(n,a){"use strict";i=[],r=a,o="function"==typeof r?r.apply(e,i):r,!(void 0!==o&&(t.exports=o))}(this,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t,e,n,r,i,o){void 0!==t&&this.setFunctionName(t),void 0!==e&&this.setArgs(e),void 0!==n&&this.setFileName(n),void 0!==r&&this.setLineNumber(r),void 0!==i&&this.setColumnNumber(i),void 0!==o&&this.setSource(o)}return e.prototype={getFunctionName:function(){return this.functionName},setFunctionName:function(t){this.functionName=String(t)},getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getFileName:function(){return this.fileName},setFileName:function(t){this.fileName=String(t)},getLineNumber:function(){return this.lineNumber},setLineNumber:function(e){if(!t(e))throw new TypeError("Line Number must be a Number");this.lineNumber=Number(e)},getColumnNumber:function(){return this.columnNumber},setColumnNumber:function(e){if(!t(e))throw new TypeError("Column Number must be a Number");this.columnNumber=Number(e)},getSource:function(){return this.source},setSource:function(t){this.source=String(t)},toString:function(){var e=this.getFunctionName()||"{anonymous}",n="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",i=t(this.getLineNumber())?":"+this.getLineNumber():"",o=t(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+n+r+i+o}},e})},function(t,e,n){"use strict";function r(t,e,n){var r=e.payload||{};r.body&&delete r.body;var i=u.merge(t.data,r);t._isUncaught&&(i._isUncaught=!0),t._originalArgs&&(i._originalArgs=t._originalArgs),n(null,i)}function i(t,e,n){t.telemetryEvents&&u.set(t,"data.body.telemetry",t.telemetryEvents),n(null,t)}function o(t,e,n){if(!t.message)return void n(null,t);var r="data.body.trace_chain.0",i=u.get(t,r);if(i||(r="data.body.trace",i=u.get(t,r)),i){if(!i.exception||!i.exception.description)return u.set(t,r+".exception.description",t.message),void n(null,t);var o=u.get(t,r+".extra")||{},a=u.merge(o,{message:t.message});u.set(t,r+".extra",a)}n(null,t)}function a(t){return function(e,n,r){var i=u.merge(e);try{u.isFunction(n.transform)&&n.transform(i.data,e)}catch(i){return n.transform=null,t.error("Error while calling custom transform() function. Removing custom transform().",i),void r(null,e)}r(null,i)}}function s(t,e,n){if(!e.sendConfig)return n(null,t);var r="_rollbarConfig",i=u.get(t,"data.custom")||{};i[r]=e,t.data.custom=i,n(null,t)}var u=n(5);t.exports={itemToPayload:r,addTelemetryData:i,addMessageWithError:o,userTransform:a,addConfigToPayload:s}},function(t,e,n){"use strict";function r(t,e){return!i.get(e,"plugins.jquery.ignoreAjaxErrors")||!i.get(t,"body.message.extra.isAjax")}var i=n(5);t.exports={checkIgnore:r}},function(t,e,n){"use strict";function r(t,e){var n=t.level,r=c.LEVELS[n]||0,i=e.reportLevel,o=c.LEVELS[i]||0;return!(o>r)}function i(t){return function(e,n){var r=!!e._isUncaught;delete e._isUncaught;var i=e._originalArgs;delete e._originalArgs;try{c.isFunction(n.onSendCallback)&&n.onSendCallback(r,i,e)}catch(e){n.onSendCallback=null,t.error("Error while calling onSendCallback, removing",e)}try{if(c.isFunction(n.checkIgnore)&&n.checkIgnore(r,i,e))return!1}catch(e){n.checkIgnore=null,t.error("Error while calling custom checkIgnore(), removing",e)}return!0}}function o(t){return function(e,n){return!s(e,n,"blacklist",t)}}function a(t){return function(e,n){return s(e,n,"whitelist",t)}}function s(t,e,n,r){var i=!1;"blacklist"===n&&(i=!0);var o,a,s,u,l,h,f,d,p,v;try{if(o=i?e.hostBlackList:e.hostWhiteList,f=o&&o.length,a=c.get(t,"body.trace"),!o||0===f)return!i;if(!a||!a.frames||0===a.frames.length)return!i;for(l=a.frames.length,p=0;l>p;p++){if(s=a.frames[p],u=s.filename,!c.isType(u,"string"))return!i;for(v=0;f>v;v++)if(h=o[v],d=new RegExp(h),d.test(u))return!0}}catch(t){i?e.hostBlackList=null:e.hostWhiteList=null;var g=i?"hostBlackList":"hostWhiteList";return r.error("Error while reading your configuration's "+g+" option. Removing custom "+g+".",t),!i}return!1}function u(t){return function(e,n){var r,i,o,a,s,u,l,h,f;try{if(s=!1,o=n.ignoredMessages,!o||0===o.length)return!0;if(l=e.body,h=c.get(l,"trace.exception.message"),f=c.get(l,"message.body"),r=h||f,!r)return!0;for(a=o.length,i=0;a>i&&(u=new RegExp(o[i],"gi"),!(s=u.test(r)));i++);}catch(e){n.ignoredMessages=null,t.error("Error while reading your configuration's ignoredMessages option. Removing custom ignoredMessages.")}return!s}}var c=n(5);t.exports={checkLevel:r,userCheckIgnore:i,urlIsNotBlacklisted:o,urlIsWhitelisted:a,messageIsIgnored:u}},function(t,e,n){"use strict";function r(t,e,n,r,i){var o=t[e];t[e]=n(o),r&&r[i].push([t,e,o])}function i(t,e){for(var n;t[e].length;)n=t[e].shift(),n[0][n[1]]=n[2]}function o(t){if(!t||!t.attributes)return null;for(var e=t.attributes,n=0;n<e.length;++n)if("name"===e[n].key)return e[n].value;return null}function a(t){for(var e=[],n=0;n<t.length;++n)e.push(new RegExp(t[n],"i"));return function(t){var n=o(t);if(!n)return!1;for(var r=0;r<e.length;++r)if(e[r].test(n))return!0;return!1}}function s(t,e,n,r,i){var o=t.autoInstrument;t.enabled===!1||o===!1?this.autoInstrument={}:(u.isType(o,"object")||(o=h),this.autoInstrument=u.merge(h,o)),this.scrubTelemetryInputs=!!t.scrubTelemetryInputs,this.telemetryScrubber=t.telemetryScrubber,this.defaultValueScrubber=a(t.scrubFields),this.telemeter=e,this.rollbar=n,this._window=r||{},this._document=i||{},this.replacements={network:[],log:[],navigation:[],connectivity:[]},this.eventRemovers={dom:[],connectivity:[]},this._location=this._window.location,this._lastHref=this._location&&this._location.href}var u=n(5),c=n(19),l=n(28),h={network:!0,networkResponseHeaders:!1,networkResponseBody:!1,networkRequestBody:!1,log:!0,dom:!0,navigation:!0,connectivity:!0};s.prototype.configure=function(t){var e=t.autoInstrument,n=u.merge(this.autoInstrument);t.enabled===!1||e===!1?this.autoInstrument={}:(u.isType(e,"object")||(e=h),this.autoInstrument=u.merge(h,e)),this.instrument(n),void 0!==t.scrubTelemetryInputs&&(this.scrubTelemetryInputs=!!t.scrubTelemetryInputs),void 0!==t.telemetryScrubber&&(this.telemetryScrubber=t.telemetryScrubber)},s.prototype.instrument=function(t){!this.autoInstrument.network||t&&t.network?!this.autoInstrument.network&&t&&t.network&&this.deinstrumentNetwork():this.instrumentNetwork(),!this.autoInstrument.log||t&&t.log?!this.autoInstrument.log&&t&&t.log&&this.deinstrumentConsole():this.instrumentConsole(),!this.autoInstrument.dom||t&&t.dom?!this.autoInstrument.dom&&t&&t.dom&&this.deinstrumentDom():this.instrumentDom(),!this.autoInstrument.navigation||t&&t.navigation?!this.autoInstrument.navigation&&t&&t.navigation&&this.deinstrumentNavigation():this.instrumentNavigation(),!this.autoInstrument.connectivity||t&&t.connectivity?!this.autoInstrument.connectivity&&t&&t.connectivity&&this.deinstrumentConnectivity():this.instrumentConnectivity()},s.prototype.deinstrumentNetwork=function(){i(this.replacements,"network")},s.prototype.instrumentNetwork=function(){function t(t,n){t in n&&u.isFunction(n[t])&&r(n,t,function(t){return e.rollbar.wrap(t)})}var e=this;if("XMLHttpRequest"in this._window){var n=this._window.XMLHttpRequest.prototype;r(n,"open",function(t){return function(e,n){return u.isType(n,"string")&&(this.__rollbar_xhr={method:e,url:n,status_code:null,start_time_ms:u.now(),end_time_ms:null}),t.apply(this,arguments)}},this.replacements,"network"),r(n,"send",function(n){return function(i){function o(){if(a.__rollbar_xhr){if(null===a.__rollbar_xhr.status_code){a.__rollbar_xhr.status_code=0;var t=null;e.autoInstrument.networkRequestBody&&(t=i),a.__rollbar_event=e.telemeter.captureNetwork(a.__rollbar_xhr,"xhr",void 0,t)}if(a.readyState<2&&(a.__rollbar_xhr.start_time_ms=u.now()),a.readyState>3){a.__rollbar_xhr.end_time_ms=u.now();var n=null;if(e.autoInstrument.networkResponseHeaders){var r=e.autoInstrument.networkResponseHeaders;n={};try{var o,s;if(r===!0){var c=a.getAllResponseHeaders();if(c){var l,h,f=c.trim().split(/[\r\n]+/);for(s=0;s<f.length;s++)l=f[s].split(": "),o=l.shift(),h=l.join(": "),n[o]=h}}else for(s=0;s<r.length;s++)o=r[s],n[o]=a.getResponseHeader(o)}catch(t){}}var d=null;if(e.autoInstrument.networkResponseBody)try{d=a.responseText}catch(t){}var p=null;(d||n)&&(p={},
d&&(p.body=d),n&&(p.headers=n)),p&&(a.__rollbar_xhr.response=p);try{var v=a.status;v=1223===v?204:v,a.__rollbar_xhr.status_code=v,a.__rollbar_event.level=e.telemeter.levelFromStatus(v)}catch(t){}}}}var a=this;return t("onload",a),t("onerror",a),t("onprogress",a),"onreadystatechange"in a&&u.isFunction(a.onreadystatechange)?r(a,"onreadystatechange",function(t){return e.rollbar.wrap(t,void 0,o)}):a.onreadystatechange=o,n.apply(this,arguments)}},this.replacements,"network")}"fetch"in this._window&&r(this._window,"fetch",function(t){return function(n,r){for(var i=new Array(arguments.length),o=0,a=i.length;a>o;o++)i[o]=arguments[o];var s,c=i[0],l="GET";u.isType(c,"string")?s=c:c&&(s=c.url,c.method&&(l=c.method)),i[1]&&i[1].method&&(l=i[1].method);var h={method:l,url:s,status_code:null,start_time_ms:u.now(),end_time_ms:null},f=null;return e.autoInstrument.networkRequestBody&&(i[1]&&i[1].body?f=i[1].body:i[0]&&!u.isType(i[0],"string")&&i[0].body&&(f=i[0].body)),e.telemeter.captureNetwork(h,"fetch",void 0,f),t.apply(this,i).then(function(t){h.end_time_ms=u.now(),h.status_code=t.status;var n=null;if(e.autoInstrument.networkResponseHeaders){var r=e.autoInstrument.networkResponseHeaders;n={};try{if(r===!0);else for(var i=0;i<r.length;i++){var o=r[i];n[o]=t.headers.get(o)}}catch(t){}}var a=null;return n&&(a={headers:n}),a&&(h.response=a),t})}},this.replacements,"network")},s.prototype.deinstrumentConsole=function(){if("console"in this._window&&this._window.console.log)for(var t;this.replacements.log.length;)t=this.replacements.log.shift(),this._window.console[t[0]]=t[1]},s.prototype.instrumentConsole=function(){function t(t){var r=n[t],i=n,o="warn"===t?"warning":t;n[t]=function(){var t=Array.prototype.slice.call(arguments),n=u.formatArgsAsString(t);e.telemeter.captureLog(n,o),r&&Function.prototype.apply.call(r,i,t)},e.replacements.log.push([t,r])}if("console"in this._window&&this._window.console.log)for(var e=this,n=this._window.console,r=["debug","info","warn","error","log"],i=0,o=r.length;o>i;i++)t(r[i])},s.prototype.deinstrumentDom=function(){("addEventListener"in this._window||"attachEvent"in this._window)&&this.removeListeners("dom")},s.prototype.instrumentDom=function(){if("addEventListener"in this._window||"attachEvent"in this._window){var t=this.handleClick.bind(this),e=this.handleBlur.bind(this);this.addListener("dom",this._window,"click","onclick",t,!0),this.addListener("dom",this._window,"blur","onfocusout",e,!0)}},s.prototype.handleClick=function(t){try{var e=l.getElementFromEvent(t,this._document),n=e&&e.tagName,r=l.isDescribedElement(e,"a")||l.isDescribedElement(e,"button");n&&(r||l.isDescribedElement(e,"input",["button","submit"]))?this.captureDomEvent("click",e):l.isDescribedElement(e,"input",["checkbox","radio"])&&this.captureDomEvent("input",e,e.value,e.checked)}catch(t){}},s.prototype.handleBlur=function(t){try{var e=l.getElementFromEvent(t,this._document);e&&e.tagName&&(l.isDescribedElement(e,"textarea")?this.captureDomEvent("input",e,e.value):l.isDescribedElement(e,"select")&&e.options&&e.options.length?this.handleSelectInputChanged(e):l.isDescribedElement(e,"input")&&!l.isDescribedElement(e,"input",["button","submit","hidden","checkbox","radio"])&&this.captureDomEvent("input",e,e.value))}catch(t){}},s.prototype.handleSelectInputChanged=function(t){if(t.multiple)for(var e=0;e<t.options.length;e++)t.options[e].selected&&this.captureDomEvent("input",t,t.options[e].value);else t.selectedIndex>=0&&t.options[t.selectedIndex]&&this.captureDomEvent("input",t,t.options[t.selectedIndex].value)},s.prototype.captureDomEvent=function(t,e,n,r){if(void 0!==n)if(this.scrubTelemetryInputs||"password"===l.getElementType(e))n="[scrubbed]";else{var i=l.describeElement(e);this.telemetryScrubber?this.telemetryScrubber(i)&&(n="[scrubbed]"):this.defaultValueScrubber(i)&&(n="[scrubbed]")}var o=l.elementArrayToString(l.treeToArray(e));this.telemeter.captureDom(t,o,n,r)},s.prototype.deinstrumentNavigation=function(){var t=this._window.chrome,e=t&&t.app&&t.app.runtime,n=!e&&this._window.history&&this._window.history.pushState;n&&i(this.replacements,"navigation")},s.prototype.instrumentNavigation=function(){var t=this._window.chrome,e=t&&t.app&&t.app.runtime,n=!e&&this._window.history&&this._window.history.pushState;if(n){var i=this;r(this._window,"onpopstate",function(t){return function(){var e=i._location.href;i.handleUrlChange(i._lastHref,e),t&&t.apply(this,arguments)}},this.replacements,"navigation"),r(this._window.history,"pushState",function(t){return function(){var e=arguments.length>2?arguments[2]:void 0;return e&&i.handleUrlChange(i._lastHref,e+""),t.apply(this,arguments)}},this.replacements,"navigation")}},s.prototype.handleUrlChange=function(t,e){var n=c.parse(this._location.href),r=c.parse(e),i=c.parse(t);this._lastHref=e,n.protocol===r.protocol&&n.host===r.host&&(e=r.path+(r.hash||"")),n.protocol===i.protocol&&n.host===i.host&&(t=i.path+(i.hash||"")),this.telemeter.captureNavigation(t,e)},s.prototype.deinstrumentConnectivity=function(){("addEventListener"in this._window||"body"in this._document)&&(this._window.addEventListener?this.removeListeners("connectivity"):i(this.replacements,"connectivity"))},s.prototype.instrumentConnectivity=function(){if("addEventListener"in this._window||"body"in this._document)if(this._window.addEventListener)this.addListener("connectivity",this._window,"online",void 0,function(){this.telemeter.captureConnectivityChange("online")}.bind(this),!0),this.addListener("connectivity",this._window,"offline",void 0,function(){this.telemeter.captureConnectivityChange("offline")}.bind(this),!0);else{var t=this;r(this._document.body,"ononline",function(e){return function(){t.telemeter.captureConnectivityChange("online"),e&&e.apply(this,arguments)}},this.replacements,"connectivity"),r(this._document.body,"onoffline",function(e){return function(){t.telemeter.captureConnectivityChange("offline"),e&&e.apply(this,arguments)}},this.replacements,"connectivity")}},s.prototype.addListener=function(t,e,n,r,i,o){e.addEventListener?(e.addEventListener(n,i,o),this.eventRemovers[t].push(function(){e.removeEventListener(n,i,o)})):r&&(e.attachEvent(r,i),this.eventRemovers[t].push(function(){e.detachEvent(r,i)}))},s.prototype.removeListeners=function(t){for(var e;this.eventRemovers[t].length;)(e=this.eventRemovers[t].shift())()},t.exports=s},function(t,e){"use strict";function n(t){return(t.getAttribute("type")||"").toLowerCase()}function r(t,e,r){if(t.tagName.toLowerCase()!==e.toLowerCase())return!1;if(!r)return!0;t=n(t);for(var i=0;i<r.length;i++)if(r[i]===t)return!0;return!1}function i(t,e){return t.target?t.target:e&&e.elementFromPoint?e.elementFromPoint(t.clientX,t.clientY):void 0}function o(t){for(var e,n=5,r=[],i=0;t&&n>i&&(e=u(t),"html"!==e.tagName);i++)r.unshift(e),t=t.parentNode;return r}function a(t){for(var e,n,r=80,i=" > ",o=i.length,a=[],u=0,c=t.length-1;c>=0;c--){if(e=s(t[c]),n=u+a.length*o+e.length,c<t.length-1&&n>=r+3){a.unshift("...");break}a.unshift(e),u+=e.length}return a.join(i)}function s(t){if(!t||!t.tagName)return"";var e=[t.tagName];t.id&&e.push("#"+t.id),t.classes&&e.push("."+t.classes.join("."));for(var n=0;n<t.attributes.length;n++)e.push("["+t.attributes[n].key+'="'+t.attributes[n].value+'"]');return e.join("")}function u(t){if(!t||!t.tagName)return null;var e,n,r,i,o={};o.tagName=t.tagName.toLowerCase(),t.id&&(o.id=t.id),e=t.className,e&&"string"==typeof e&&(o.classes=e.split(/\s+/));var a=["type","name","title","alt"];for(o.attributes=[],i=0;i<a.length;i++)n=a[i],r=t.getAttribute(n),r&&o.attributes.push({key:n,value:r});return o}t.exports={describeElement:u,descriptionToString:s,elementArrayToString:a,treeToArray:o,getElementFromEvent:i,isDescribedElement:r,getElementType:n}}])})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(27),o=r(i),a=function(t){var e=document.getElementById("download_file_url");t||(jQuery("body").prepend('<div class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.<div><a href="'+e.href+'" class="button btn_primary">Download file</a></div></div>'),jQuery("[ng-view]").hide());o["default"].get(angular.module("viewerConfig"),"_invokeQueue.0.2.1",{});return angular.module("viewer",[]),window.console&&window.console.log("incompatible"),"incompatible"},s=function(){var t="viewer";try{jQuery(".browsehappy").length&&(t=a(!0));var e=platform.name,n=parseInt(platform.version);if("Opera"===e&&12>n)return a();if("Safari"===e&&"iOS"===platform.os.family&&6>n)return a();o["default"].include(["Android","iOS"],platform.os.family)||("Firefox"===e&&9>n&&(t=a()),"Chrome"===e&&20>n&&(t=a()))}catch(r){window.console&&window.console.log(r)}return t};e["default"]=s}]),angular.module("viewer").run(["$templateCache",function(t){t.put("app/empty.html",'<div class="big-cloudapp-logo"></div>'),t.put("app/annotations/annotations.html",'<iframe id="add_file_frame" ng-src="{{ uploadFrameUrl }}" style="display: none;"></iframe><div ng-if="annotate.item.state == \'success\'" class="annotations_canvas"><navbar mode="annotate"></navbar><flash-messages></flash-messages><div id="canvas" ng-class="{non_sticky: !annotate.service.drawing.sticky}" class="cursor_{{annotate.service.drawing.mode}} {{annotate.service.drawing.commands.getColor()}}"><div ng-if="annotate.service.state == \'pending\'" class="progressbar_container"><div style="width: {{ annotate.service.image.progress }}%;" class="progressbar"></div><span>{{ annotate.service.image.progress }}%</span></div></div></div><div ng-if="annotate.item.state == \'pending\'" class="loading"><div class="big-cloudapp-logo"></div></div>'),t.put("app/codeView/codeView.html",'<div class="spinner"></div><div ng-switch="vm.language"><div id="markdown" ng-switch-when="markdown" btf-markdown="vm.code"></div><div ng-switch-default="" hljs="" hljs-source="vm.code" hljs-language="{{ vm.language }}"></div></div>'),t.put("app/comments/comments.html",'<form ng-class="pending(\'createComment\')" name="vm.newCommentForm" ng-submit="vm.submitComment()" class="add_comment_form"><span class="comments_title">Comments</span><div ng-if="pending(\'createComment\')"></div><textarea ng-model="vm.newComment.content" required="" placeholder="Comment" ng-maxlength="1000" class="form-control"></textarea> <input type="submit" value="Comment" ng-disabled="vm.newCommentForm.$invalid" class="button btn_primary pull-right"><span ng-if="vm.newCommentForm.$error.maxlength" class="error_msg">Text is too long</span><span ng-if="vm.newCommentForm.$error.required" class="error_msg">Text cannot be empty</span><div class="clear"></div></form><div ng-if="vm.commentService.count == 0"><div class="comments_emptystate">Hey, don’t let it go unsaid! Add your comments that your teammates can review and reply to.</div></div><div ng-class="pending(\'getComments\')" class="comments_list"><div ng-repeat="comment in vm.commentService.comments | orderBy: \'-created_at\'" class="event"><div class="type_icon"><img ng-src="{{ vm.avatar(comment) }}"><span>{{ comment.user[0] }}</span></div><div class="event_details"><strong>{{ comment.user }}</strong><p ng-bind-html="vm.commentContent(comment)"></p><span ng-click="vm.toggleAbsoluteDate()"><span ng-if="vm.absoluteDate">{{ comment.created_at | amCalendar }}</span><span ng-if="!vm.absoluteDate">{{ comment.created_at | amTimeAgo }}</span></span><a ng-if="vm.canDestroy(comment)" ng-click="vm.destroy(comment)" class="delete_comment">Delete</a><div class="clear"></div></div><div class="clear"></div></div></div>'),t.put("app/embed/embed.html",'<div class="embed-modal"><div class="modal-header"><h4>Embed HTML</h4></div><div class="modal-body"><div class="form-group"><label>Add this drop to your website by copying the code below</label><div class="copy_embed_html"><input id="embed-html" type="text" ng-model="vm.currentWithOptions" ng-readonly="true" class="form-control"> <button ngclipboard="" data-clipboard-target="#embed-html" analytics="item_copied" analytics-type="embed_html" analytics-campaign_medium="button" class="button btn_primary">Copy</button></div></div><div class="form-group"><label>Where would you like to embed this drop ?</label><div class="single_box"><div class="radio"><label><input type="radio" ng-model="vm.current" ng-value="vm.embed.embed_html_js" ng-change="vm.changeType(\'js\')">Web page</label> <label><input type="radio" ng-model="vm.current" ng-value="vm.embed.embed_html_iframe" ng-change="vm.changeType(\'iframe\')">Web page (iframe)</label> <label><input type="radio" ng-model="vm.current" ng-value="vm.embed.embed_html" ng-change="vm.changeType(\'html\')">HTML</label></div></div></div><div class="form-group"><div class="single_box"><div class="checkbox"><label><input type="checkbox" ng-model="vm.notitle" ng-change="vm.updateCurrent()">Hide Title in Embed</label></div><div class="checkbox"><label ng-class="{\'muted\': vm.item.details.branding}"><input type="checkbox" ng-model="vm.nobranding" ng-change="vm.updateCurrent()" ng-disabled="vm.item.details.branding">Hide Branding in Embed</label><a ng-if="vm.item.details.branding" ng-href="{{url.upgradePlan(\'source_referral=viewer_embed_modal_upgrade\')}}" target="_self" class="upgrade">Upgrade</a></div></div></div><div class="preview"><h5>Preview</h5><div ng-bind-html="vm.trustedPreview"></div></div></div></div>'),t.put("app/events/events.html",'<div ng-class="pending(\'getEvents\')" class="events_list"><div ng-repeat="event in vm.eventService.events | orderBy: \'-created_at\'" class="event-animation div"><div ng-class="[event.event_type, event.action]" class="event"><div class="type_icon"></div><div class="event_details"><strong>{{ event.user }}</strong> {{ event.description }}<br><span ng-click="vm.toggleAbsoluteDate()"><span ng-if="vm.absoluteDate">{{ event.created_at | amCalendar }}</span><span ng-if="!vm.absoluteDate">{{ event.created_at | amTimeAgo }}</span></span></div><div class="clear"></div></div></div></div>'),t.put("app/flag/flag.html",'<div class="flag-modal"><div class="modal-header"><h4>Flag this drop</h4></div><div class="modal-body"><ng-form name="vm.flagForm"><div class="form-group"><input type="hidden" ng-model="vm.flag.reason" required=""> <label class="block">Reason for flagging*</label> <label class="radio-inline"><input name="reason" ng-model="vm.flag.reason" type="radio" value="DMCA" class="js-checkox-input">DMCA</label> <label class="radio-inline"><input name="reason" ng-model="vm.flag.reason" type="radio" value="Copyright" class="js-checkox-input">Copyright</label> <label class="radio-inline"><input name="reason" ng-model="vm.flag.reason" type="radio" value="Malware" class="js-checkox-input">Malware</label> <label class="radio-inline"><input name="reason" ng-model="vm.flag.reason" type="radio" value="Other" class="js-checkox-input">Other</label></div><div class="row sm_space"><div class="col-sm-4"><div show-errors="" class="form-group"><label>Email*</label> <input name="email" ng-model="vm.flag.email" placeholder="Your email" type="email" required="" class="form-control"></div></div><div class="col-sm-4"><div show-errors="" class="form-group"><label>Name*</label> <input name="name" ng-model="vm.flag.name" placeholder="Your name" type="text" required="" class="form-control"></div></div><div class="col-sm-4"><div class="form-group"><label>Organization</label> <input ng-model="vm.flag.organization" placeholder="Organization" type="text" class="form-control"></div></div></div><div class="form-group"><label>Comments</label> <textarea class="form-control"></textarea></div><br><h6>By checking the following boxes, I state UNDER PENALTY OF PERJURY of law that:</h6><div ng-if="[\'DMCA\', \'Copyright\'].indexOf(vm.flag.reason) != -1" class="form-group"><div show-errors="" class="checkbox input-group"><label><input name="proclamation_1" ng-model="vm.flag.proclamation_1" type="checkbox" required="" class="form-control">I hereby state that I have a good faith belief that the sharing of copyrighted material at the location above is not authorized by the copyright owner, its agent or the law (e.g., as a fair use).</label></div><div show-errors="" class="checkbox input-group"><label><input name="proclamation_2" ng-model="vm.flag.proclamation_2" type="checkbox" required="" class="form-control">I hereby state that the information in this Notice is accurate and under penalty of perjury, that I am the owner or authorised to act on behalf of the owner, of the copyright or of an exclusive right under the copyright that is allegedly infringed.</label></div><div show-errors="" class="checkbox input-group"><label><input name="proclamation_3" ng-model="vm.flag.proclamation_3" type="checkbox" required="" class="form-control">I acknowledge that under Section 512(f) any person who knowingly materially misrepresents that material or activity is infringing may be subject to liability for damages.</label></div></div><div ng-if="[\'Malware\', \'Other\'].indexOf(vm.flag.reason) != -1" class="form-group"><div show-errors="" class="checkbox input-group"><label><input name="proclamation_4" ng-model="vm.flag.proclamation_4" type="checkbox" required="" class="form-control">It is believed that the mentioned drops are in violation of the CloudApp Terms of Service.</label></div></div><br><div show-errors="" class="form-group"><label>Typing your full name in this box will act as your digital signature</label> <input name="signature" ng-model="vm.flag.signature" placeholder="Your full name" type="text" required="" class="w50 form-control"></div><div class="modal-footer"><button type="submit" ng-click="vm.save()" class="button btn_primary">Flag drop</button><a href="#" ng-click="vm.cancel()" class="button btn_secondary">Cancel</a></div></ng-form></div></div>'),t.put("app/flashMessages/flashMessages.html",'<div style="margin: auto; width: 500px;" class="flash-messages"><uib-alert ng-repeat="message in flashVm.flashMessages.items()" type="{{ message.type }}" dismiss-on-timeout="{{ message.timeout }}" close="message.close()">{{ message.text }}</uib-alert></div>'),t.put("app/imageView/imageView.html",'<div id="image_viewport" ng-class="{\'zoom\': vm.zoom, zoomable: vm.zoomable}"><div class="image_wrapper"><img id="drop-image" ng-src="{{ vm.item.data.latest_source_url }}" class="raw_image"><canvas id="drop-canvas" style="padding-bottom:0px;position:absolute;top:0;left:0;height:100%;" ng-click="vm.toggleZoom()"></canvas></div><style type="text/css" id="dynamicCss"></style></div>'),t.put("app/login/login.html",'<div ng-switch="vm.action" class="modal-header"><h4 ng-init="vm.changed()" ng-switch-when="signIn" class="with_logo">Login to CloudApp</h4><h4 ng-hide="vm.confirmation" ng-init="vm.changed()" ng-switch-default="" class="with_logo">Created with CloudApp</h4><h1 ng-show="vm.confirmation">Welcome to CloudApp!</h1><p ng-hide="vm.confirmation" class="muted f14 text-center"><em>CloudApp is a productivity tool to share and communicate visually. Capture + Share: HD Videos, Screen Recordings, GIFs, and Annotated Screenshots.</em></p></div><div class="modal-body"><p ng-show="vm.confirmation" class="f14 text-center with_big_logo">Your account has been created.<br>Now download CloudApp and get started creating screen recording, GIFs, annotated screenshots and sharing them with others.</p><div ng-hide="vm.confirmation"><form name="vm.loginForm"><div class="form-group"><label>Email address</label> <input ng-model="vm.user.email" placeholder="email@example.com" type="email" class="form-control"></div><div class="form-group"><label>Password</label> <input type="password" ng-model="vm.user.password" class="form-control"><div ng-show="vm.errors.length" class="errors"><p ng-repeat="error in vm.errors" ng-bind-html="error"></p></div></div><div ng-if="vm.action == \'signIn\'"><button ng-click="vm.signIn()" class="w100 button btn_primary">Login</button></div><div ng-if="vm.action != \'signIn\'"><p class="terms">By signing up you accept our&nbsp;<a ng-href="{{ vm.termsUrl }}">Terms of Use</a></p><button ng-if="!vm.advertised" ng-click="vm.signUp()" class="w100 button btn_carnation">Join Now - Free Forever</button> <button ng-if="vm.advertised" analytics="OuibounceRegularSignupClicked" ng-click="vm.signUp()" class="w100 button btn_carnation">GET STARTED FOR FREE</button></div><div class="or">or</div><a ng-if="!vm.advertised" ng-click="vm.google()" class="w100 button btn_primary button_google">Sign up using Google</a><a ng-if="vm.advertised" analytics="OuibounceGoogleSignupClicked" ng-click="vm.google()" class="w100 button btn_primary button_google">Sign up using Google</a></form></div><div ng-switch="vm.action" class="additional_links"><a ng-hide="vm.confirmation" ng-click="vm.sso()">Sign in with SSO</a><a ng-hide="vm.confirmation" ng-switch-when="signIn" ng-click="vm.action = \'signUp\'">Don\'t have a CloudApp account?</a><a ng-show="vm.confirmation" ng-href="{{ vm.setupCloudappUrl }}" class="button btn_primary w100">DOWNLOAD CLOUDAPP</a><div ng-show="vm.confirmation"><br><a ng-click="vm.close()">No thanks, stay on the page</a></div><a ng-hide="vm.confirmation" ng-swwitch-default="" ng-click="vm.action = \'signIn\'">Already have an account?</a><a ng-hide="vm.confirmation" ng-switch-when="signIn" ng-href="{{ vm.resetUrl }}" target="_self">Forgot your password?</a></div></div>'),t.put("app/login/login.modal.html",'<div class="login-modal"><login callback="vm.callback(success, action)" close="vm.close()" action="vm.action" params="vm.params"></login></div>'),t.put("app/main/main.html",'<div ng-switch="main.item.state" class="main_div"><flash-messages></flash-messages><div ng-switch-when="success" class="success"><div ng-hide="main.item.details" class="big-cloudapp-logo animated pulse infinite ng-animate-disabled"></div><div id="main" ng-show="main.item.details" ng-init="main.init()"><navbar></navbar><div ng-switch="main.item.data.type" ng-class="{\'rhc_hidden\': main.rhcHidden(), \'rhc_available\': main.rhcAvailable()}" class="item_view"><tout ng-class="isVisibleClassName"></tout><image-view ng-switch-when="image"></image-view><video-view ng-switch-when="video"></video-view><video-view ng-switch-when="audio"></video-view><pdf-view ng-switch-when="pdf" ng-class="pending(\'pdfLoad\')"></pdf-view><code-view ng-switch-when="code" ng-class="pending(\'codeLoad\')"></code-view><other-view ng-switch-when="other"></other-view></div><sidebar ng-if="can(\'view_related\') || can(\'view_comments\') || can(\'view_events\')" ng-model="main"></sidebar></div></div><div ng-switch-when="empty" class="empty"><div class="big-cloudapp-logo animated pulse infinite"></div><div class="exception-handler"><div class="unauthorized"><div class="unauthorized_container"><h1>Something went wrong</h1></div></div></div></div><div ng-switch-when="pending" class="pending"><div class="big-cloudapp-logo animated pulse infinite"></div><h2>Uploading...</h2></div><div ng-switch-when="not_found" class="unauthorized error"><div class="unauthorized_container"><h1>CloudApp</h1><h2>Nothing lives here.</h2><p>Perhaps the person who shared this link with you deleted it. Or they’re not ready to share it. Or maybe a Yeti has taken it to a cave. And that Yeti has children. And those children love CloudApp links.</p></div></div><div ng-switch-when="expired" class="unauthorized error"><div class="unauthorized_container"><h1>CloudApp</h1><h2>The item you are looking for has expired.</h2></div></div><div ng-switch-when="error" class="unauthorized error"><div class="unauthorized_container"><h1>CloudApp</h1><h2>Oops! Surprised?</h2><p>So are we. No one should ever have to see pages like this. Sorry about that!<br>Contact us at<a href="mailto:support@getcloudapp.com">support@getcloudapp.com</a>or<a href="https://www.getcloudapp.com/help/">our support site</a> if you think we can help. Or if you’d like us to share our GIF of the day with you. Or a poem.</p></div></div><unauthorized ng-switch-when="unauthorized"></unauthorized></div>'),t.put("app/navbar/actions.html",'<div class="actions_menu"><div class="main_menu ng-animate-disabled"><a ng-if="can(\'join\') &amp;&amp; vm.item.details.branding" ng-click="vm.signUp({ source_referral: \'viewer_join_button\' })" class="button btn_carnation hidden-xs">Get Started</a><a ng-if="can(\'view_comments\')" uib-tooltip="Add comment" ng-click="vm.toggleComments()" ng-class="{btn_active: !vm.sidebarFactory.hidden}" class="btn_icon btn_comments hidden-xs"></a><div ng-click="vm.ui.toggleShareMenu()" class="btn_icon btn_share ng-animate-disabled"><div ng-if="vm.item" ng-class="{\'hidden\': !vm.share_menu}" outside-if-not="menu_share_dropdown,btn_share" click-outside="vm.ui.toggleShareMenu(false)" class="menu_share_dropdown"><ul><li><a class="muted">Share file via:</a></li><li><a ng-click="vm.share()" analytics="Share Drop Modal Opened" analytics-campaign_medium="menu" class="ico_email ico_dropdown">Email</a></li><li><a ng-click="vm.shareVia.facebook()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="facebook" class="ico_facebook ico_dropdown">Facebook</a></li><li><a ng-click="vm.shareVia.twitter()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="twitter" class="ico_twitter ico_dropdown">Twitter</a></li><li><a ng-click="vm.shareVia.googleplus()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="googleplus" class="ico_googleplus ico_dropdown">Googleplus</a></li><li><a ng-click="vm.shareVia.pinterest()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="pinterest" class="ico_pinterest ico_dropdown">Pinterest</a></li><li><a ng-click="vm.shareVia.tumblr()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="tumblr" class="ico_tumblr ico_dropdown">Tumblr</a></li><li><a ng-click="vm.shareVia.reddit()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="reddit" class="ico_reddit ico_dropdown">Reddit</a></li><li><a ng-click="vm.shareVia.linkedin()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="linkedin" class="ico_linkedin ico_dropdown">Linkedin</a></li><li><a ng-click="vm.shareVia.blogger()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="blogger" class="ico_blogger ico_dropdown">Blogger</a></li><li><a ng-click="vm.shareVia.delicious()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="delicious" class="ico_delicious ico_dropdown">Delicious</a></li><li><a ng-click="vm.shareVia.flipboard()" analytics="Drop Shared" analytics-campaign_medium="menu" analytics-type="flipboard" class="ico_flipboard ico_dropdown">Flipboard</a></li></ul></div></div><a href="#" ng-if="can(\'upgrade_restrict\')" ng-click="vm.privacy()" class="btn_icon btn_privacy hidden-xs"></a><a ng-if="can(\'restrict\')" ng-click="vm.privacy()" ng-init="vm.item.getPrivacy()" ng-class="{\'active\': can(\'restrict_remote_ip\') || vm.item.isRestricted() }" uib-tooltip="Share settings" analytics="security_modal_opened" analytics-campaign_medium="button" class="btn_icon btn_privacy hidden-xs"></a><a ng-if="can(\'annotate\')" ng-href="{{ url.annotate(vm.item) }}" analytics="Drop Open With Annotation" analytics-campaign_medium="button" class="btn_icon btn_label btn_annotate hidden-xs">Annotate</a><a ng-if="can(\'upgrade_annotate\')" ng-click="vm.signUp()" class="btn_icon btn_label btn_annotate hidden-xs">Annotate</a><a ng-if="vm.showChromeInstallButton()" ng-click="vm.chromeInlineInstall()" class="btn_icon btn_label btn_chrome hidden-xs">Install Chrome Extension</a><a ng-if="can(\'join\') &amp;&amp; vm.item.details.branding" ng-click="vm.signUp({ source_referral: \'viewer_favorites\' })" class="button btn_default hidden-xs">Add to Favorites</a><a ng-if="can(\'join\') &amp;&amp; vm.item.details.branding" ng-click="vm.signUp({ source_referral: \'viewer_collections\' })" class="button btn_default hidden-xs">Add to Collection</a><a ng-if="can(\'admin\')" ng-href="{{ url.viewOnAdmin(vm.item) }}" class="button btn_default hidden-xs">View on Admin</a><a ng-if="is_pro()" ng-click="vm.toggleEvents()" class="button btn_default hidden-xs">Analytics</a><a ng-if="is_trial()" ng-href="{{ url.upgradePlan(\'source_referral=viewer_upgrade_daysintrial\') }}" class="pay_link">{{ trial_days_left() }} days left on trial, join CloudApp</a><a ng-if="is_free()" ng-href="{{ vm.plansPath }}" uib-tooltip="You can remove this if you have a plan" class="q-mark hidden-xs">?</a><a ng-href="{{ vm.item.details.download_url }}" target="_self" class="button btn_default hidden-xs">Download</a><div class="clear"></div></div><div class="clear"></div></div><div class="clear"></div>'),t.put("app/navbar/annotations.html",'<div class="actions_menu"><div state="{{ vm.item.annotations.state }}" class="annotations_menu"><div class="annotations_final_actions"><button ng-if="can(\'save_annotate\')" ng-click="vm.item.annotations.save()" class="button btn_primary"></button> <button ng-if="!can(\'save_annotate\')" ng-click="vm.signUpAnnotate()" class="button btn_primary"></button> <button ng-click="vm.item.annotations.finish()" class="button btn_secondary"></button></div><div ng-if="vm.item.annotations.state != \'pending\'" class="annotations_options"><button ng-click="vm.annotate().removeActive()" ng-disabled="!vm.annotate().canRemove()" class="btn_icon btn_trash btn_right"></button> <button ng-class="vm.modeClass(\'blur\')" ng-click="vm.annotate().blurClick()" tooltip-enable="!vm.annotate().mode(\'blur\')" uib-tooltip="Blur" class="btn_icon btn_blur"></button> <button ng-class="vm.modeClass(\'text\')" ng-click="vm.setAnnotate(\'text\')" uib-tooltip="Type" class="btn_icon btn_text"></button> <button ng-class="vm.modeClass(\'rectangle\')" ng-click="vm.setAnnotate(\'rectangle\')" uib-tooltip="Rectangle" class="btn_icon btn_rectangle"></button> <button ng-class="vm.modeClass(\'circle\')" ng-click="vm.setAnnotate(\'circle\')" uib-tooltip="Ellipse" class="btn_icon btn_circle"></button> <button ng-class="vm.modeClass(\'drawing\')" ng-click="vm.setAnnotate(\'drawing\')" uib-tooltip="Draw" class="btn_icon btn_draw"></button> <button ng-class="vm.modeClass(\'line\')" ng-click="vm.setAnnotate(\'line\')" uib-tooltip="Line" class="btn_icon btn_line"></button> <button ng-class="vm.modeClass(\'arrow\')" ng-click="vm.setAnnotate(\'arrow\')" uib-tooltip="Arrow" class="btn_icon btn_arrow btn_left"></button><span ng-hide="vm.annotate().mode(\'blur\')"><select ng-class="vm.annotate().getColor()" change="vm.setColor(value)" class="chosen-select btn_color btn_icon"><option value="red" class="circle red">Red</option><option value="orange" class="circle orange">Orange</option><option value="green" class="circle green">Green</option><option value="blue" class="circle blue">Blue</option><option value="white" class="circle white">White</option><option value="black" class="circle black">Black</option></select></span><a ng-click="vm.annotate().redo()" ng-disabled="!vm.annotate().canRedo()" uib-tooltip="Redo" class="btn_icon btn_redo btn_right"></a><a ng-click="vm.annotate().undo()" ng-disabled="!vm.annotate().canUndo()" uib-tooltip="Undo" class="btn_icon btn_undo btn_left"></a><div class="clear"></div></div><div class="clear"></div></div></div><div class="clear"></div>'),t.put("app/navbar/brand-popover.html",'<div class="upgrade_popover"><p>Replace this logo with your own by upgrading or inviting a friend.</p><a ng-href="{{ url.upgradePlan(\'source_referral=viewer_cloudapp_logo\') }}" target="_self" class="button btn_primary">Upgrade</a><a ng-href="{{ url.referFriend(\'source_referral=viewer_cloudapp_logo\') }}" class="link_secondary">Invite a friend</a></div>'),t.put("app/navbar/menu.html",'<a ng-click="vm.ui.toggleMenu()" analytics="file_more_clicked" analytics-campaign_medium="menu" class="menu_icon ng-animate-disabled"></a><div ng-if="vm.item" ng-class="{\'hidden\': !vm.menu}" ng-init="vm.initClipboard()" outside-if-not="menu_dropdown,menu_icon" click-outside="vm.ui.toggleMenu(false)" class="menu_dropdown"><ul class="mobile_actions visible-xs"><li ng-if="can(\'annotate\')"><a ng-href="{{ url.annotate(vm.item) }}" class="ico_annotation ico_dropdown">Add annotation</a></li><li ng-if="can(\'upgrade_restrict\')"><a href="#" ng-click="vm.privacy()" class="ico_privacy ico_dropdown">Share settings</a></li><li ng-if="can(\'restrict\')"><a ng-if="can(\'restrict\')" ng-init="vm.item.getPrivacy()" ng-click="vm.privacy()" analytics="security_modal_opened" analytics-campaign_medium="menu" class="ico_privacy ico_dropdown">Share settings</a></li><li><a ng-click="vm.openEmbedModal()" analytics="embed_modal_opened" analytics-campaign_medium="menu" class="ico_embed ico_dropdown">Embed HTML</a></li></ul><ul><li><a ng-href="{{ url.originalUrl(vm.item) }}" target="_self">View original file<div ngclipboard="" data-clipboard-text="{{ url.originalUrl(vm.item) }}" uib-tooltip="Copy link" tooltip-placement="left" analytics="item_copied" analytics-type="link_direct" analytics-campaign_medium="button" class="btn_icon btn_copy"></div></a></li><li><a ng-href="{{ url.secure(vm.item) }}" class="hidden-xs">View secure link<div ngclipboard="" data-clipboard-text="{{ url.secure(vm.item) }}" uib-tooltip="Copy link" tooltip-placement="left" analytics="item_copied" analytics-type="link_secure" analytics-campaign_medium="button" class="btn_icon btn_copy"></div></a></li><li><a class="hidden-xs">Embed<div ng-click="vm.openEmbedModal()" uib-tooltip="Copy Embed HTML" tooltip-placement="left" analytics="embed_modal_opened" analytics-campaign_medium="button" class="btn_icon btn_copy"></div></a></li><li class="hidden-xs"><a ng-click="vm.toggleCheatSheet()" analytics="shortcuts_shown" analytics-type="general" analytics-campaign_medium="menu">Show shortcuts<div class="shortcut">⇧?</div></a></li><li class="hidden-xs"><a ng-if="main.canFlag()" ng-click="main.flag()" analytics="flag_file_modal_opened" analytics-campaign_medium="menu">Flag this drop</a></li></ul><ul class="not_signedin"><li ng-click="vm.signIn({ source_referral: \'viewer_join_menu_link\' })" ng-if="can(\'join\')"><a>Login</a></li><li ng-click="vm.signUp({ source_referral: \'viewer_join_menu_link\' })" ng-if="can(\'join\')"><a>Join CloudApp</a></li><li ng-click="vm.signOut()" ng-if="!can(\'join\')" analytics="user_signed_out" analytics-campaign_medium="menu"><a>Sign out</a></li></ul></div>'),
t.put("app/navbar/navbar.html",'<link rel="stylesheet" type="text/css" href="//s3.amazonaws.com/static.cl.ly/vendor/buttons.css"><ng-include src="\'app/navbar/annotations.html\'" ng-if="vm.mode == \'annotate\'"></ng-include><div ng-if="vm.mode != \'annotate\'"><a href="{{ url.back() }}" uib-tooltip="Back to your files" tooltip-placement="right" ng-if="!can(\'join\')" analytics="file_list_opened" analytics-campaign_medium="button" class="back_to_list"></a><div ng-if="vm.item.details.custom_logo" class="brand"><a ng-href="{{ url.ensureExternalUrl(vm.item.details.homepage_url) }}" analytics="logo_clicked" analytics-campaign_medium="image" analytics-type="brand"><img ng-src="{{ vm.item.details.custom_logo }}"></a></div><a ng-if="can(\'change_logo\') &amp;&amp; vm.item.details.branding" ng-href="#" analytics="logo_clicked" analytics-campaign_medium="image" analytics-type="cloudapp_popover" popover-trigger="outsideClick" uib-popover-template="\'app/navbar/brand-popover.html\'" class="hidden-xs cloudapp_brand"></a><a ng-if="!can(\'change_logo\') &amp;&amp; vm.item.details.branding" ng-href="{{ url.marketing(\'?source_referral=viewer_cloudapp_logo\') }}" target="_blank" analytics="logo_clicked" analytics-campaign_medium="image" analytics-type="cloudapp" class="hidden-xs cloudapp_brand"></a><a ng-if="vm.item.details.branding" ng-href="{{ url.marketing(\'?source_referral=viewer_cloudapp_logo\') }}" target="_blank" analytics="logo_clicked" analytics-campaign_medium="image" analytics-type="cloudapp" class="visible-xs cloudapp_brand"></a><a ng-if="false" ng-href="{{ vm.enginesTeamMembershipPath() }}" class="button slack-button hidden-xs">Invite teammates from Slack</a><h2><span>{{ vm.item.data.name }}</span><a uib-tooltip="Add to favorites" ng-click="vm.item.toggleFavorite()" ng-class="{\'active\': vm.item.favorite}" ng-init="vm.item.getFavorite()" ng-if="can(\'favorite\')" class="btn_favorite"></a></h2><ng-include src="\'app/navbar/menu.html\'"></ng-include><ng-include src="\'app/navbar/actions.html\'"></ng-include><ouibounce ng-if="can(\'see_ads\')" action="can(\'join\') ? \'login\' : \'upgrade\'"></ouibounce></div>'),t.put("app/navbar/share-popover.html",'<div class="share-via"><span ng-click="vm.shareVia.facebook()" class="facebook"></span><span ng-click="vm.shareVia.twitter()" class="twitter"></span><span ng-click="vm.shareVia.pinterest()" class="pinterest"></span><span ng-click="vm.shareVia.googleplus()" class="googleplus"></span><span ng-click="vm.shareVia.linkedin()" class="linkedin"></span><span ng-click="vm.shareVia.blogger()" class="blogger"></span><span ng-click="vm.shareVia.delicious()" class="delicious"></span><span ng-click="vm.shareVia.flipboard()" class="flipboard"></span><span ng-click="vm.shareVia.reddit()" class="reddit"></span><span ng-click="vm.shareVia.tumblr()" class="tumblr"></span><span ng-click="vm.shareVia.email()" class="email"></span></div>'),t.put("app/otherView/otherView.html",'<div class="file_exapmle"><div class="extension">{{ vm.item.fileExtension() }}</div></div><a ng-if="vm.item.details.download_url" ng-href="{{ vm.item.details.download_url }}" target="_self" class="button btn_primary">Download {{ vm.item.fileWithoutExtension() }}.{{ vm.item.fileExtension() }}</a><p ng-if="vm.item.data.mimetype == \'application/pdf\'" class="file_too_big">Your file was huge, so we’re not displaying our typical preview for the sake of speed!</p>'),t.put("app/ouibounce/ouibounce.html",'<div id="ouibounce-modal"><div class="underlay"></div><div class="modal"><div ng-switch="vm.action" class="modal-ouibounce-content"><login ng-switch-when="login" action="\'signUp\'" advertised="true" close="vm.close()" callback="vm.ouibounceCallback(success, action)" params="{source_referral: \'viewer_ouibounce\'}"></login><upgrade ng-switch-when="upgrade"></upgrade></div></div></div>'),t.put("app/pdfView/pdfView.html",'<link rel="stylesheet" type="text/css" href="//s3.amazonaws.com/static.cl.ly/vendor/pdf_viewer.css"><script src="//s3.amazonaws.com/static.cl.ly/vendor/pdf.js"></script><script src="//s3.amazonaws.com/static.cl.ly/vendor/pdf_viewer.js"></script><div class="spinner"></div><section id="pdf" ng-class="pending(\'pdfLoad\')"><div id="viewer" class="pdfViewer"></div></section>'),t.put("app/privacy/expiration.html",'<div ng-class="[pending(\'expire\')]"><div class="form-inline"><div class="checkbox"><label><input type="checkbox" ng-model="vm.privacy.advancedExpiration.time">in&nbsp;</label></div><div show-errors="" class="form-group"><input name="expire_time" type="number" min="1" ng-model="vm.privacy.advancedExpiration.expirePeriodCount" ng-required="vm.privacy.advancedExpiration.time" class="form-control short_input"><select ng-model="vm.privacy.advancedExpiration.expirePeriod" class="chosen-select"><option value="3600">hour(s)</option><option value="86400">day(s)</option><option value="604800">week(s)</option><option value="2592000">month(s)</option></select><span ng-show="vm.privacy.advancedExpiration.expirePeriodCount" class="f12 muted hidden-xs">({{ vm.privacy.advancedExpiration.when() | amDateFormat:\'MMM Do YYYY, h:mm a\' }})</span></div></div><div class="form-inline"><div class="checkbox"><label><input type="checkbox" ng-model="vm.privacy.advancedExpiration.views">after&nbsp;</label></div><div show-errors="" class="form-group"><input name="expire_views" type="number" min="1" ng-model="vm.privacy.advancedExpiration.expiresAfterViews" ng-required="vm.privacy.advancedExpiration.views" class="form-control short_input">views</div></div></div><div class="checkbox checkbox_remember"><label><input type="checkbox" ng-model="vm.privacy.advancedExpiration.remember">Remember this custom setting</label></div>'),t.put("app/privacy/privacy.html",'<div ng-class="[pending(\'getPrivacy\'), pending(\'setPrivacy\')]" class="share_settings_modal"><div ng-if="can(\'upgrade_restrict\')" class="turn_on_security"><div class="box"><div class="ico_privacy"></div><h3>Want to add security to your shared files?</h3><p class="f14">Upgrade to any paying plan or invite a friend and get up to 12 months of CloudApp Pro.</p><br><a ng-href="{{ url.upgradePlan(\'source_referral=viewer_privacy_upgrade_button\') }}" target="_self" class="button btn_primary">Upgrade</a><a ng-href="{{ url.referFriend(\'source_referral=viewer_privacy_invite_friend_button\') }}" class="link_secondary">Invite a friend</a><br><a ng-click="vm.cancel()" class="no_thanks">No, thanks</a></div></div><form name="vm.privacyForm"><div class="modal-header"><h4>Share settings</h4></div><div class="modal-body"><h6>Who can access this link?</h6><div ng-if="can(\'restrict_remote_ip\')" class="checkbox"><label class="bold"><input type="checkbox" checked="" disabled="">This drop is restricted to your IP address</label></div><div ng-repeat="option in vm.privacy.options" ng-class="{\'active\': vm.privacy.current_option == option.name}" class="single_box"><div class="radio"><label><input type="radio" ng-model="vm.privacy.current_option" value="{{ option.name }}"><span class="radio_label">{{ option.label }}</span><div ng-if="option.type == \'password\'" class="password inline-block"><div ng-if="vm.privacy.current_option == \'password\'" class="form-group inline-block"><a ng-click="vm.passwordInput = true" ng-if="!vm.passwordInput" class="link_change_password">Change</a> <input ng-if="vm.passwordInput" ng-model="vm.privacy.password" type="password" required="" class="form-control"></div></div></label></div><div ng-if="option.type == \'members\'" class="users"><div ng-if="vm.privacy.current_option == \'users\'" class="access_box"><team-selector ng-model="vm.privacy"></team-selector><div class="checkbox"><label><input type="checkbox" ng-model="vm.privacy.notify"><span class="regular f11">Notify added people via email</span></label></div></div></div></div><br><div ng-if="can(\'expire\')" class="expiration_settings"><h6>When does this link expire?</h6><div class="light_box">Expires &nbsp;<div class="inline-block"><div ng-show="vm.item.isExpiring()" class="btn_icon btn_expiration_on ng-animate-disabled js-expiration-on"><span ng-click="vm.toggleAbsoluteDate()" ng-if="vm.absoluteDate">{{ vm.item.details.expires_at | amCalendar }}</span><span ng-click="vm.toggleAbsoluteDate()" ng-if="!vm.absoluteDate">{{ vm.item.details.expires_at | amTimeAgo }}</span><span ng-if="vm.privacy.expiration.expires_after_views &amp;&amp; vm.privacy.expiration.expires_at">&nbsp;or&nbsp;</span><span ng-if="vm.privacy.expiration.expires_after_views">after {{ vm.viewsLeft() }}&nbsp;<ng-pluralize count="vm.viewsLeft()" when="{\'1\': \'view\', \'other\': \'views\'}"></ng-pluralize></span><a ng-click="vm.removeExpiration()" class="btn_cancel btn_icon"></a></div><div ng-hide="vm.item.isExpiring()" ng-animate="false" class="js-expiration-off"><select ng-model="vm.updateExpiration" data-placeholder="Never" ng-model-options="{ getterSetter: true }" class="btn_icon chosen-select ng-animate-disabled"><option value="0/" class="border">Never</option><option value="{{ vm.getLastExpire() }}" ng-if="vm.getLastExpire()" class="border">{{ vm.getLastExpireMessage() }}</option><option value="3600/">in 1 hour</option><option value="86400/">in 1 day</option><option value="604800/" class="border">in 1 week</option><option value="0/1">after 1 view</option><option value="0/10" class="border">after 10 views</option><option value="advanced">Advanced settings</option></select></div></div><div ng-if="vm.privacy.showAdvanced" class="advanced_settings"><ng-include src="\'app/privacy/expiration.html\'"></ng-include></div></div></div></div><div class="modal-footer"><button ng-click="vm.save()" ng-disabled="vm.invalid()" class="button btn_primary">Save</button> <button ng-click="vm.cancel()" class="button btn_secondary">Cancel</button></div></form></div>'),t.put("app/related/related.html",'<div ng-if="relatedVm.related().length"><h2>Related drops</h2><ul><li ng-repeat="item in relatedVm.related()"><a href="/{{ item }}" target="_self"><img ng-src="{{ relatedVm.thumbnail(item) }}" style="width: 95px"></a></li></ul></div>'),t.put("app/share/share.html",'<div class="modal-header share_header"><h1>Share this link to anyone</h1><span class="muted">{{ vm.item.data.name }}</span><div class="preview"><img ng-src="{{ vm.item.thumbnail(\'h40w40\') }}"></div></div><div class="modal-body"><div class="share_content"><ng-form name="vm.shareForm" class="share_form"><team-selector ng-model="vm.share"></team-selector><textarea ng-model="vm.share.message" placeholder="Message (optional)" class="form-control"></textarea></ng-form></div><div ng-if="can(\'restrict\')" class="checkbox"><label><input type="checkbox" ng-model="vm.share.restricted"><span ng-if="!vm.item.privacy.restricted">Make this drop accessible only for selected people</span><span ng-if="vm.item.privacy.restricted">Add these friends to your VIP list for this classified, private content.</span></label></div></div><div class="modal-footer"><button ng-click="vm.save()" ng-disabled="vm.invalid()" class="button btn_primary">Share</button> <button ng-click="vm.cancel()" class="button btn_secondary">Cancel</button></div>'),t.put("app/sidebar/sidebar.html",'<div id="sidebar" class="right_hand_column"><a ng-click="vm.toggleHidden()" class="ico_close"></a><div class="sidebar_share"><span class="sidebar_title">Share this link</span><div class="link_box">{{ url.share(vm.item) }}<a ngclipboard="" ng-click="vm.copyFeedback()" data-clipboard-text="{{ url.share(vm.item) }}" class="link_box_copy {{copyClass}}">{{copyText}}</a></div><div class="share_options"><a ng-click="vm.shareVia.facebook()" analytics="Drop Shared" analytics-campaign_medium="button" analytics-type="facebook" class="ico_facebook"></a><a ng-click="vm.shareVia.twitter()" analytics="Drop Shared" analytics-campaign_medium="button" analytics-type="twitter" class="ico_twitter"></a><a href="mailto:?subject=Check%20out%20what%20I%20created%20with%20CloudApp&amp;body=Check%20my%20drop%20at%20{{ url.share(vm.item) }}." analytics="Share Drop Modal Opened" analytics-campaign_medium="button" ng-if="can(\'share_email\')" class="ico_email"></a><a ng-click="vm.openEmbedModal()" analytics="embed_modal_opened" analytics-campaign_medium="button" class="ico_embed"></a></div></div><div ng-if="is_free() &amp;&amp; can(\'own\')" class="sidebar_share"><span class="sidebar_title">Who viewed your link?</span><div class="invite_text">Invite someone to CloudApp and unlock the ability to see who views your link after they create their first drop. You can also upgrade to Pro to use this and other pro features.</div><div class="invite_text"><a ng-href="{{ url.referFriend(\'utm_campaign=refer_a_friend_to_unlock\') }}" class="button btn_primary">Refer to unlock</a></div><div class="events_list"><div class="event"><div class="type_icon"><img src="https://s.gravatar.com/avatar/aaf19dea642b17e842190909640cb215?s=80&amp;d=blank"><span>j</span></div><div class="event_details"><strong>john@doe.com</strong>&nbsp; viewed file<br><span>30 minutes ago</span></div></div><div class="event"><div class="type_icon"><img src="https://s.gravatar.com/avatar/aaf19dea642b17e842190909640cb215?s=80&amp;d=blank"><span>j</span></div><div class="event_details"><strong>john@doe.com</strong>&nbsp; viewed file<br><span>2 days ago</span></div></div><div class="vanish_layer"></div></div></div><related ng-if="can(\'view_related\')"></related><div ng-click="vm.toggleHidden()" ng-if="vm.sidebarFactory.hidden" class="rhc_arrow"></div><div ng-if="false" class="rhc_nav"><a ng-if="can(\'view_comments\')" ng-class="{active: vm.isCommentsTab()}" ng-click="vm.setTab(\'comments\')" class="tab_el tab_comments"><span>Comments</span><span class="number">{{ vm.item.commentCount() }}</span></a><span ng-if="can(\'view_comments\') &amp;&amp; can(\'view_events\')" class="separator">&nbsp;|&nbsp;</span><a ng-if="can(\'view_events\')" ng-class="{active: vm.isEventsTab()}" ng-click="vm.setTab(\'events\')" analytics="Viewer Events Tab Opened" class="tab_el tab_events new_event"><span>Events</span></a><a ng-click="vm.toggleHidden()" class="ico_close"></a><div class="clear"></div></div><div ng-show="vm.isCommentsTab()"><comments ng-if="can(\'view_comments\')" class="comments"></comments><div ng-if="!can(\'comment\') &amp;&amp; false" class="join_to_team"><div class="comments"><form name="vm.newCommentForm" ng-submit="vm.submitComment()" class="add_comment_form"><textarea ng-model="vm.newComment.content" required="" placeholder="Comment" class="form-control"></textarea> <input type="submit" value="Comment" ng-disabled="vm.newCommentForm.$invalid" class="button btn_primary pull-right"><span class="error_msg"></span><div class="clear"></div></form><div class="comments_emptystate">Hey, don’t let it go unsaid! Add your comments that your teammates can review and reply to.</div></div><div class="clear"></div><div class="animation"><h4 class="js-first hidden">Want to get team feedback?</h4><p class="f14 js-second hidden">Create a team and accelerate your workflow.</p><a ng-href="{{ url.newTeam() }}" class="js-third button btn_primary hidden w100">Get Started & Claim your team</a></div></div></div><div ng-show="vm.isEventsTab()"><events ng-if="can(\'view_events\')" class="events"></events></div></div>'),t.put("app/signup/signup.html",'<div class="signup"><div class="container"><div class="row"><div class="col-xs-12 text-center"><div class="logo_cloudapp"></div><h3>Show, don\'t tell</h3></div></div><div class="row"><div class="col-sm-2 hidden-xs"></div><div class="col-md-4 download_app"><video></video><p>Free for <strong>Mac, Windows, Linux</strong>and <strong>iOS.</strong></p><button class="button">Download CloudApp</button></div><div class="col-sm-4 create_account"><ng-include src="\'app/login/login.html\'"></ng-include></div><div class="col-sm-2 hidden-xs"></div></div><div class="row"><div class="col-sm-2 hidden-xs"></div><div class="col-sm-8"><div class="partners_logos"></div></div><div class="col-sm-2 hidden-xs"></div></div></div></div>'),t.put("app/teamSelector/teamSelector.html",'<div class="add_team"><div ng-if="vm.availableTeams.length &gt; 1" class="many_teams"><span class="label_name">Add members from your team</span><select options="vm.availableTeams" change="vm.teamSelect(value)" class="chosen-select"><option>Select a team</option><option ng-repeat="team in vm.availableTeams" value="{{ team.id }}">{{ team.name }}</option></select></div><div ng-if="vm.availableTeams.length == 1" ng-repeat="team in vm.availableTeams" class="one_team"><button ng-click="vm.teamSelect(team.id)">+ Add {{ team.name }} members</button></div></div><div class="multiselect"><tags-input template="app/teamSelector/teamSelectorTemplate.html" ng-model="vm._users" add-on-space="true" placeholder="Add an email" allowed-tags-pattern="^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$" on-tag-added="vm.newTag($tag)" on-tag-removed="vm.change()"><auto-complete source="vm.autocomplete($query)" select-first-match="false"></auto-complete></tags-input></div>'),t.put("app/teamSelector/teamSelectorTemplate.html",'<div ng-class="data.class" class="tag-template"><span>{{ $getDisplayText() }}</span><a ng-click="$removeTag()" class="remove-button">&#10006;</a></div>'),t.put("app/textView/textView.html","<h1>TEXT</h1>"),t.put("app/tout/tout.html",'<div ng-if="tout.visible" class="tout hidden-xs"><span>{{tout.message}}</span><div class="tout_cta"><div ng-if="tout.expanded" class="expanded"><div ng-click="tout.expanded = false" analytics="ToutMinimized" analytics-content="{{ tout.message}}" analytics-expanded="yes" analytics-user="{{ tout.toutFor }}" analytics-offer="{{ tout.buttonMsg }}" class="ico_close"></div><h4>{{ tout.headline }}</h4><p>{{ tout.tagline }}</p><a href="{{ tout.button_url }}" analytics="ToutClicked" analytics-expanded="yes" analytics-content="{{ tout.message}}" analytics-user="{{ tout.user_type }}" analytics-offer="{{ tout.button_msg }}" class="btn_icon btn_expanded">{{tout.button_msg}}</a></div><a ng-if="!tout.expanded" analytics="ToutClicked" analytics-content="{{ tout.message}}" analytics-expanded="no" analytics-user="{{ tout.user_type }}" analytics-offer="{{ tout.button_msg }}" ng-click="tout.onClick()" class="btn_icon btn_minimized">{{tout.button_msg}}</a></div></div>'),t.put("app/unauthorized/unauthorized.html",'<div ng-switch="vm.action()" class="unauthorized"><div class="unauthorized_container"><div ng-switch-when="password"><div class="unauthorized_permission_page"><div class="unauthorized_logo"></div><form class="password_form"><div class="input-group"><input type="password" ng-model="vm.passwordForm.password" placeholder="Password required" class="form-control"><div class="input-group-btn"><button ng-click="vm.passwordForm.submit()" class="btn button btn_primary">Unlock</button><a ng-if="vm.item.access.has_session" ng-click="vm.createPasswordRequest()" class="btn button btn_primary">Send request</a></div></div></form></div></div><div ng-switch-when="login"><login callback="vm.loginCallback(success)"></login></div><div ng-switch-when="access"><div ng-if="vm.item.access.can_send_request" class="unauthorized_permission_page"><div class="unauthorized_logo"></div><h1>You need permission to see this file</h1><a ng-click="vm.createAccessRequest()" class="button btn_primary">Request access</a></div><div ng-if="!vm.item.access.can_send_request" class="unauthorized_permission_page"><div class="unauthorized_logo"></div><div class="text-center"><h1 class="check">Request already sent</h1></div></div></div><div ng-switch-when="not_available" class="unauthorized_permission_page"><div class="unauthorized_logo"></div><div class="text-center"><h1>Drop is not available</h1></div></div><div ng-switch-default=""></div></div></div>'),t.put("app/upgrade/upgrade.html",'<div class="modal-header"><h4 class="with_logo">Upgrade to CloudApp Pro</h4><p class="muted f14 text-center"></p><em>Communicate faster with unlimited screen recordings,<br>secure sharing, longer GIF capture, 1GB max file size and 2GB/file daily bandwidth.</em></div><div class="modal-body"><a ng-href="{{ vm.url.upgradePlan(\'source_referral=viewer_ouibounce\') }}" analytics="OuibounceUpgradeClicked" class="button btn_primary">UPGRADE NOW</a></div>'),t.put("app/videoView/videoView.html",'<div ng-if="vm.item.data.source_url" ng-switch="vm.item.data.type"><div ng-switch-when="audio" class="audio_view"><audio id="player" controls="" preload="auto" class="video-js vjs-default-skin"></audio></div><div ng-switch-when="video" class="video_view"><video id="player" controls="" preload="auto" width="900" height="560" class="video-js vjs-default-skin"></video></div></div>')}]);
//# sourceMappingURL=../6388251c/app.js.map